<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>æ‰¾è¯•å·</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-12-14T05:36:51.423Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>zhaoShijuan</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡</title>
    <link href="http://yoursite.com/2019/12/14/Vue%E5%AE%9E%E6%88%98%E5%BC%80%E5%8F%91-%E7%94%9F%E6%80%81%E7%AF%87/"/>
    <id>http://yoursite.com/2019/12/14/Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡/</id>
    <published>2019-12-14T05:30:58.000Z</published>
    <updated>2019-12-14T05:36:51.423Z</updated>
    
    <content type="html"><![CDATA[<p>Vueç”Ÿæ€åœˆä¸­ï¼Œå¸¸ç”¨åˆ°çš„å°±æ˜¯Vuexä»¥åŠVueRouterï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä»¥åŠæ˜¯å¦‚ä½•æŒ‚è½½åˆ°Vueå®ä¾‹ä¸Šçš„ï¼Ÿè¿™äº›é—®é¢˜å°†æ˜¯æˆ‘ä¸‹é¢ğŸ‘‡å†…å®¹çš„é‡ç‚¹ã€‚å½“ç„¶ä¹Ÿæ¶‰åŠåˆ°ä¸€äº›åœ¨å¼€å‘ä¸­æ‰€ä½¿ç”¨åˆ°çš„ç»„ä»¶åº“ä»¥åŠå•å…ƒæµ‹è¯•jestï¼Œè¿™äº›åªæ˜¯ä¸€ç¬”å¸¦è¿‡â€¦<br><a id="more"></a></p><h2 id="Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡"><a href="#Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡" class="headerlink" title="Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡"></a>Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡</h2><h3 id="ç›®å½•"><a href="#ç›®å½•" class="headerlink" title="ç›®å½•"></a>ç›®å½•</h3><ul><li><a href="#Vuex-demo">Vuexå®æˆ˜</a></li><li><a href="#Vuex">VuexåŸç†ä»¥åŠæºç åˆ†æ</a></li><li><a href="#VueRouter">VueRouteråŸç†</a></li><li><a href="#VueRouter-mode">VueRouterè·¯ç”±æ¨¡å¼</a></li><li><a href="#SPA">å•é¡µé¢SPA &amp; è§£å†³æ–¹æ¡ˆNuxt</a></li><li><a href="#componentsUI">UIç»„ä»¶åº“</a></li><li><a href="#jest">å•å…ƒæµ‹è¯•</a></li></ul><h3 id="Vuexå®æˆ˜"><a href="#Vuexå®æˆ˜" class="headerlink" title="Vuexå®æˆ˜"></a><div id="Vuex-demo">Vuexå®æˆ˜</div></h3><blockquote><p>ç–‘é—®ï¼šæ‰©å±•è´­ç‰©è½¦ç¤ºä¾‹ï¼Œæä¾›å•æ¬¡æ·»åŠ 1-Nçš„æ•°é‡åˆ°è´­ç‰©è½¦åŠŸèƒ½</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;&#125;,</span><br><span class="line">    mutations: &#123;&#125;,</span><br><span class="line">    actions: &#123;&#125;,</span><br><span class="line">    modules: &#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    store: storeInstance,</span><br><span class="line">    render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨Vuexçš„æ­¥éª¤ï¼š</p><ol><li>æ³¨å†ŒVuexï¼šVue.use(Vuex);</li><li>åˆ›å»ºStoreå®ä¾‹ï¼šnew Vuex.Store(options)</li><li>æŒ‚è½½$storeï¼šnew Vue({store: storeInstance})</li></ol><h3 id="VuexåŸç†"><a href="#VuexåŸç†" class="headerlink" title="VuexåŸç†"></a><div id="Vuex">VuexåŸç†</div></h3><p><a href="Vuex.md">Vuexè¯¦è§£</a></p><blockquote><p>Vuexè¯¾åç–‘é—®</p></blockquote><ol><li>Vuexæ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼æä¾›å“åº”å¼æ•°æ®çš„ï¼Ÿ</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç­”ï¼šåˆ©ç”¨Vueçš„dataç‰¹æ€§å®ç°</p><ol start="2"><li>$storeæ˜¯å¦‚ä½•æŒ‚è½½åˆ°å®ä¾‹thisä¸Šçš„ï¼Ÿ</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç­”ï¼šåœ¨beforeCreateé’©å­å‡½æ•°ä¸­è°ƒç”¨vuexInit</p><ol start="3"><li>æ‰©å±•min-vuexï¼Œå®ç°gettersï¼Œå¹¶å®ç°vuexçš„æ–¹å¼æ³¨å…¥$store</li></ol><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ç­”ï¼šåˆ©ç”¨Vueçš„computeç‰¹æ€§ + æ‹¦æˆªå®ç°</p><p><strong>æš‚ä¸”å…ˆè®°ä½è¿™äº›ç–‘é—®ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹vuexã€‚</strong></p><p><img src="vuexæœºåˆ¶.png" alt="vuexæœºåˆ¶"></p><blockquote><p>Vuexæä¾›çš„å±æ€§å’Œæ–¹æ³•</p></blockquote><ol><li>å±æ€§ï¼šstateï¼Œgetters</li><li>æ–¹æ³•ï¼šcommitï¼Œdispatchï¼ŒreplaceStateï¼ŒregisterModuleï¼ŒunregisterModuleï¼Œwatchï¼Œsubscribeï¼ŒsubscribeActionï¼ŒhotUpdate</li><li>è¾…åŠ©å‡½æ•°ï¼šmapStateï¼ŒmapGettersï¼ŒmapMutationsï¼ŒmapActionsï¼ŒcreateNamespaceHelpers</li></ol><blockquote><p>Vuexæ€ç»´å¯¼å›¾</p></blockquote><p><img src="vuex.png" alt="vuexæ€ç»´å¯¼å›¾"></p><blockquote><p>æ€»ç»“</p></blockquote><ol><li><p>æ³¨å†ŒVuex</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue.useä¼šè°ƒç”¨æ‰§è¡ŒVuexå¯¹å¤–æš´éœ²çš„installæ–¹æ³•</span></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"><span class="comment">// Vuex-installæ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> Vue;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span> (<span class="params">_Vue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (_Vue &amp;&amp; Vue === _Vue) &#123;</span><br><span class="line">        <span class="comment">// è¯´æ˜å·²ç»æ³¨å†Œè¿‡ï¼Œæç¤ºåªèƒ½æ³¨å†Œä¸€æ¬¡</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Vue = _Vue;</span><br><span class="line">        <span class="comment">// å…¨å±€æ··å…¥beforeCreateé’©å­å‡½æ•°ï¼Œæ‰§è¡ŒVuexInitæ–¹æ³•</span></span><br><span class="line">        Vue.mixin(&#123;</span><br><span class="line">            beforeCreate: VuexInit</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºStoreå®ä¾‹</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºStoreå®ä¾‹</span></span><br><span class="line"><span class="keyword">new</span> Vuex.Store(options)</span><br><span class="line"><span class="comment">// Vuex.Storeç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Store</span> () </span>&#123;</span><br><span class="line">    construct (options) &#123;</span><br><span class="line">        <span class="comment">// ... åˆå§‹åŒ–æ•°æ®ç­‰ç­‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æŒ‚è½½$store</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¯ä¸ªç»„ä»¶æ‰§è¡Œåˆ°beforeCreateé’©å­å‡½æ•°æ—¶ï¼Œä¼šæ‰§è¡Œåˆ°æ³¨å†ŒVuexæ—¶æ··å…¥çš„å…¨å±€beforeCreateä¸­VuexInitå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">VuexInit</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> options = <span class="keyword">this</span>.$options;</span><br><span class="line">    <span class="keyword">if</span> (options.store) &#123;</span><br><span class="line">        <span class="keyword">this</span>.$store = <span class="built_in">Object</span>.prototype.toString.call(options.store).includes(<span class="string">'Function'</span>)</span><br><span class="line">        ? options.store()</span><br><span class="line">        : options.store;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.parent &amp;&amp; <span class="keyword">this</span>.parent.$store) &#123;</span><br><span class="line">        <span class="comment">// ä¿è¯æ¯ä¸ªç»„ä»¶ä¸­çš„$storeæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ª$storeï¼›ä»¥åŠå¯ä»¥ç›´æ¥åœ¨æ¯ä¸ªç»„ä»¶ä¸­ä½¿ç”¨this.$store</span></span><br><span class="line">        <span class="keyword">this</span>.$store = <span class="keyword">this</span>.parent.$store</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="vueRouteråŸç†"><a href="#vueRouteråŸç†" class="headerlink" title="vueRouteråŸç†"></a><div id="VueRouter">vueRouteråŸç†</div></h3><p><a href="VueRouter.md">VueRouterè¯¦è§£</a></p><blockquote><p>VueRouterä½¿ç”¨</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. VueRouteræ³¨å†Œ</span></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. åˆ›å»ºVueRouterå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    mode: <span class="string">''</span>,</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">''</span>,</span><br><span class="line">            name: <span class="string">''</span>,</span><br><span class="line">            component: ç»„ä»¶,</span><br><span class="line">            children: []</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. VueRouteræ³¨å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>VueRouterè§£æ</p></blockquote><ol><li><p>VueRouteræ³¨å†Œ</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Vue.useä¼šæ‰§è¡ŒVueRouterçš„installæ–¹æ³•</span></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"><span class="comment">// installæ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> _Vue;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">install</span> (<span class="params">Vue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (install.installed &amp;&amp; _Vue === Vue) <span class="keyword">return</span>;</span><br><span class="line">    install.installed = <span class="literal">true</span>;</span><br><span class="line">    _Vue = Vue;</span><br><span class="line">    <span class="comment">// æ··å…¥beforeCreate,destroyed</span></span><br><span class="line">    Vue.mixin(&#123;</span><br><span class="line">        beforeCreate()&#123;</span><br><span class="line">            <span class="keyword">if</span> (isDef(<span class="keyword">this</span>.$options.router)) &#123;</span><br><span class="line">                <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span>;</span><br><span class="line">                <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router;</span><br><span class="line">                <span class="comment">// VueRouterç±»ä¸­çš„initæ–¹æ³•ï¼Œä¼šåˆå§‹åŒ–ä¸€å †ä¸œè¥¿ï¼ŒåŒæ—¶æ‰§è¡ŒtransitionTo</span></span><br><span class="line">                <span class="keyword">this</span>._router.init(<span class="keyword">this</span>);</span><br><span class="line">                <span class="comment">// å°†æ•´ä¸ªå¯¹è±¡å˜æˆå“åº”å¼</span></span><br><span class="line">                Vue.util.defineReactive(<span class="keyword">this</span>, <span class="string">'_route'</span>, <span class="keyword">this</span>._router.history.current);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>._routerRoot = (<span class="keyword">this</span>.$parent &amp;&amp; <span class="keyword">this</span>.$parent._routerRoot) || <span class="keyword">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        destoryed() &#123;&#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// æŒ‚è½½å±æ€§$ruoterå’Œ$route</span></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$router'</span>, &#123;</span><br><span class="line">        get () &#123; <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._router; &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$route'</span>, &#123;</span><br><span class="line">        get () &#123; <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._route; &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'RouterView'</span>, View);</span><br><span class="line">    Vue.component(<span class="string">'RouterLink'</span>, Link);</span><br><span class="line">    <span class="comment">// è§„å®šç»„ä»¶å†…è·¯ç”±å¯¼èˆªçš„åˆå¹¶è§„åˆ™</span></span><br><span class="line">    <span class="keyword">const</span> strats = Vue.config.optionMergeStrategies;</span><br><span class="line">    strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºVueRouterå®ä¾‹</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    mode: <span class="string">''</span>,</span><br><span class="line">    routes: []</span><br><span class="line">    <span class="comment">// ... ä¸€å †é…ç½®é¡¹</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// VueRouterç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span></span>&#123;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line">    <span class="keyword">constructor</span> (options) &#123;</span><br><span class="line">        <span class="comment">// é‡è¦ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å«addRoutesæ–¹æ³• + æ˜ å°„è¡¨å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// æ˜ å°„è¡¨æ˜¯ä¸€ä¸ªåŒ…å«é‡Œé¢å«æœ‰pathList, pathMap, nameMap</span></span><br><span class="line">        <span class="keyword">this</span>.matcher = createMatcher(options.routes || [], <span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">// åˆå§‹åŒ–è·¯ç”±æ¨¡å¼</span></span><br><span class="line">        <span class="keyword">let</span> mode = options.mode || <span class="string">'hash'</span>;</span><br><span class="line">        <span class="comment">// supportsPushStateæ˜¯çœ‹å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒhtml5çš„historyæ¨¡å¼</span></span><br><span class="line">        <span class="keyword">this</span>.fallback = mode === <span class="string">'history'</span> &amp;&amp; !supportsPushState &amp;&amp; options.fallback !== <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// é™çº§å¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.fallback) &#123;</span><br><span class="line">            mode = <span class="string">'hash'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æµè§ˆå™¨ç¯å¢ƒè¿˜æ˜¯æœåŠ¡å™¨ç¯å¢ƒ</span></span><br><span class="line">        <span class="keyword">if</span> (!inBrowser) &#123;</span><br><span class="line">        mode = <span class="string">'abstract'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.mode = mode;</span><br><span class="line">        <span class="comment">// æ ¹æ®this.modeåˆ›å»ºä¸åŒçš„è·¯ç”±æ¨¡å¼å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// history|hash|abstractæ¨¡å¼å¯¹åº”HTML5History|HashHistory|AbstractHistory</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>VueRouteræ³¨å…¥ç»„ä»¶</p><p> ç»„ä»¶åœ¨åˆ›å»ºæ‰§è¡Œåˆ°beforeCreateé’©å­å‡½æ•°æ—¶ï¼Œä¼šæ‰§è¡Œåˆ°VueRouteræ³¨å…¥çš„beforeCreateé’©å­å‡½æ•°ã€‚è¿›è€Œï¼Œä¼šæ‰§è¡Œé‡Œé¢çš„ <code>this._router.init(this);</code></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// VueRouterå®ä¾‹çš„initæ–¹æ³•ï¼Œé‡ç‚¹ä¼šæ‰§è¡ŒtransitionToæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">init</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="keyword">this</span>.history;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (history <span class="keyword">instanceof</span> HTML5History) &#123;</span><br><span class="line">        history.transitionTo(history.getCurrentLocation());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (history <span class="keyword">instanceof</span> HashHistory) &#123;</span><br><span class="line">        <span class="keyword">const</span> setupHashListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            history.setupListeners();</span><br><span class="line">        &#125;</span><br><span class="line">        history.transitionTo(</span><br><span class="line">            history.getCurrentLocation(),</span><br><span class="line">            setupHashListener,</span><br><span class="line">            setupHashListener</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>####<span style="color: red; font-weight: bold;">VueRouterè·¯ç”±åˆ‡æ¢</span></p><p>æ ¸å¿ƒæ–¹æ³•å°±æ˜¯confirmTransitionï¼Œèƒ½å¤Ÿè§¦å‘è¿™ä¸ªæ–¹æ³•çš„æ˜¯transitionToæ–¹æ³•ï¼Œè§¦å‘transitionToæ–¹æ³•çš„æ˜¯ï¼šåˆå§‹åŒ–ï¼ŒVueRouteå®ä¾‹routerçš„pushå’Œreplaceæ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// transitionTo</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transitionTo</span> (<span class="params">location, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®åˆå§‹åŒ–å¾—åˆ°çš„æ˜ å°„è¡¨å¯¹è±¡è¿›è¡Œçš„match</span></span><br><span class="line">    <span class="keyword">const</span> route = <span class="keyword">this</span>.router.match(location, <span class="keyword">this</span>.current);</span><br><span class="line">    <span class="keyword">this</span>.confirmTransition(</span><br><span class="line">    route,</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line">            <span class="comment">// å½“å‰updateRouteæ–¹æ³•ä¸­å«æœ‰å…¨å±€router.afterEnteræ‰§è¡Œ</span></span><br><span class="line">            <span class="keyword">this</span>.updateRoute(route)</span><br><span class="line">            <span class="comment">// æ‰§è¡Œpushæˆ–è€…replaceä¸­ä¼ å…¥çš„onCompleteæ–¹æ³•</span></span><br><span class="line">            onComplete &amp;&amp; onComplete(route)</span><br><span class="line">            <span class="keyword">this</span>.ensureURL()</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œæ³¨å†Œçš„onReadyæ–¹æ³•</span></span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.ready) &#123;</span><br><span class="line">                <span class="keyword">this</span>.ready = <span class="literal">true</span></span><br><span class="line">                <span class="keyword">this</span>.readyCbs.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">                    cb(route)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    err =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (onAbort) &#123;</span><br><span class="line">            <span class="comment">// æ‰§è¡Œpushæˆ–è€…replaceä¸­ä¼ å…¥çš„onCompleteæ–¹æ³•</span></span><br><span class="line">            onAbort(err)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// confirmTransition</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">confirmTransition</span> (<span class="params">route, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... å‰æœŸå¤„ç†,currentå°±æ˜¯formæ—§è·¯å¾„</span></span><br><span class="line">    <span class="keyword">const</span> current = <span class="keyword">this</span>.current;</span><br><span class="line">    <span class="keyword">const</span> abort = <span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å¾—åˆ°çš„updatedæ˜¯ä¸¤ä¸ªå…±åŒæ‹¥æœ‰çš„ï¼Œdeactivedè¡¨ç¤ºformæ‰€æ‹¥æœ‰çš„ï¼Œactiveçš„è¡¨ç¤ºtoæ‰€æ‹¥æœ‰çš„</span></span><br><span class="line">    <span class="keyword">const</span> &#123;updated, deactivated, activated&#125; = resolveQueue(<span class="keyword">this</span>.current.matched, route.matched);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> queue = [].concat(</span><br><span class="line">    <span class="comment">// ç»„ä»¶å†…çš„beforeRouteLeave</span></span><br><span class="line">    extractLeaveGuards(deactivated),</span><br><span class="line">    <span class="comment">// å…¨å±€é…ç½®çš„router.beforeEach</span></span><br><span class="line">    <span class="keyword">this</span>.router.beforeHooks,</span><br><span class="line">    <span class="comment">// ç»„ä»¶å†…çš„beforeRouteUpdate</span></span><br><span class="line">    extractUpdateGuards(updated),</span><br><span class="line">    <span class="comment">// è·¯ç”±ä¿¡æ¯é…ç½®routesä¸­çš„beforeEnter</span></span><br><span class="line">    activated.map(<span class="function"><span class="params">m</span> =&gt;</span> m.beforeEnter)</span><br><span class="line">    <span class="comment">// asyncç»„ä»¶ï¼Œå¼‚æ­¥ç»„ä»¶</span></span><br><span class="line">    resolveAsyncComponents(activated)</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.pending = route;</span><br><span class="line">    <span class="comment">// éå†å™¨</span></span><br><span class="line">    <span class="keyword">const</span> iterator = <span class="function">(<span class="params">hook, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å¯¹äºå‡½æ•°æ‰§è¡Œå¤„ç†</span></span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// æ‰§è¡Œqueueé˜Ÿåˆ—å‡½æ•°</span></span><br><span class="line">    runQueue(queue, iterator, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> postEnterCbs = [];</span><br><span class="line">        <span class="keyword">const</span> isValid = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.current === route;</span><br><span class="line">        <span class="comment">// ç»„ä»¶beforeRouteEnter</span></span><br><span class="line">        <span class="keyword">const</span> enterGuards = extractEnterGuards(activated, postEnterCbs, isValid);</span><br><span class="line">        <span class="comment">// å…¨å±€router.beforeResolve</span></span><br><span class="line">        <span class="keyword">const</span> queue = enterGuards.concat(<span class="keyword">this</span>.router.resolveHooks);</span><br><span class="line">        runQueue(queue, iterator, () =&gt; &#123;</span><br><span class="line">            <span class="comment">// onCompleteæ¥æºäºtransitionToæ–¹æ³•ï¼Œæ­¤æ–¹æ³•é‡Œé¢åŒ…å«äº†updateRouteæ‰§è¡Œï¼Œå¹¶ä¸”updateRouteæ–¹æ³•ä¸­å«æœ‰</span></span><br><span class="line">            <span class="comment">// å…¨å±€router.afterEnterçš„æ‰§è¡Œ</span></span><br><span class="line">            onComplete(route);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šé¢çš„ä»£ç å¯ä»¥å¾—åˆ°ã€è·¯ç”±åˆ‡æ¢æ—¶ï¼Œæ‰€æœ‰è·¯ç”±å¯¼èˆªæ‰§è¡Œçš„é¡ºåºã€‘ï¼š</p><p><img src="å¯¼èˆªå®ˆå«æ‰§è¡Œé¡ºåº.jpg" alt="å¯¼èˆªå®ˆå«æ‰§è¡Œé¡ºåº"></p><h3 id="vueRouterè·¯ç”±æ¨¡å¼"><a href="#vueRouterè·¯ç”±æ¨¡å¼" class="headerlink" title="vueRouterè·¯ç”±æ¨¡å¼"></a><div id="VueRouter-mode">vueRouterè·¯ç”±æ¨¡å¼</div></h3><ul><li>hashæ¨¡å¼ï¼šæ ¼å¼å¦‚a/#/b</li><li>historyæ¨¡å¼ï¼šæ ¼å¼å¦‚a/bï¼Œéœ€è¦æµè§ˆå™¨æ”¯æŒ</li><li>abstractæ¨¡å¼ï¼šæœåŠ¡å™¨ç«¯</li></ul><blockquote><p>hashå’Œhistoryä¸»è¦åŒºåˆ«å°±æ˜¯å¯¹äºè·¯å¾„å¤„ç†</p><ol><li>pushã€replaceå¯¹äºè·¯å¾„å¤„ç†ä¸ä¸€è‡´</li><li>windowç›‘å¬çš„äº‹ä»¶ä¸ä¸€è‡´</li></ol></blockquote><ul><li><p>hashè·¯ç”±å®ç°</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  <span class="built_in">window</span>.addEventListener(</span><br><span class="line">    supportsPushState ? <span class="string">'popstate'</span> : <span class="string">'hashchange'</span>,</span><br><span class="line">    () =&gt; &#123;</span><br><span class="line">      <span class="comment">// å‡½æ•°å¤„ç†</span></span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">location, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span>;</span><br><span class="line">      <span class="keyword">this</span>.transitionTo(location, route =&gt; &#123;</span><br><span class="line">          pushHash(route.fullPath);</span><br><span class="line">      &#125;, onAbort);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// pushHashæ–¹æ³•</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">pushHash</span> (<span class="params">path</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (supportsPushState) &#123;</span><br><span class="line">  <span class="comment">// å¦‚æœå½“å‰æ”¯æŒHTML5çš„historyæ—¶</span></span><br><span class="line">  <span class="comment">// åˆ™å°±ä¼šæ‰§è¡Œå’Œhistoryæ¨¡å¼ä¸€æ ·çš„pushStateæ–¹æ³•</span></span><br><span class="line">  pushState(getUrl(path));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.hash = path;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>historyè·¯ç”±å®ç°</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'popstate'</span>, e =&gt; &#123;</span><br><span class="line"><span class="comment">// å‡½æ•°å¤„ç†</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span> (<span class="params">location, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">current</span>: fromRoute &#125; = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.transitionTo(location, route =&gt; &#123;</span><br><span class="line">        pushState(cleanPath(<span class="keyword">this</span>.base + route.fullPath));</span><br><span class="line">    &#125;, onAbort);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¯¹äºpushStateæ–¹æ³•ï¼Œä¸¤ä¸ªæ˜¯ä¸€è‡´çš„</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pushState</span> (<span class="params">url, replace</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> history = <span class="built_in">window</span>.history;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (replace) &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨çš„æ˜¯window.history.replaceState</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨çš„æ˜¯window.history.pushState</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨window.location.replaceæˆ–è€…æ˜¯window.location.assign</span></span><br><span class="line">        <span class="built_in">window</span>.location[replace ? <span class="string">'replace'</span> : <span class="string">'assign'</span>](url);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>ä¸ºä»€ä¹ˆhistoryä¸‹åˆ·æ–°é¡µé¢ä¼š404[å¦‚æœåç«¯ä¸åšé…ç½®]</p></blockquote><p>ç­”æ¡ˆï¼šhistoryæ¨¡å¼å½¢å¼ä¸ºa/b/cä¼šè¢«æœåŠ¡å™¨ç†è§£æˆåœ¨è¯·æ±‚aè·¯å¾„ä¸‹bè·¯å¾„ä¸‹cèµ„æºï¼Œä½†æ˜¯åœ¨æœåŠ¡å™¨ä¸Šæ ¹æœ¬æ²¡æœ‰è¿™ä¸ªèµ„æºå°±ä¼šå‡ºç°404é”™è¯¯ã€‚å› æ­¤å¦‚æœè¦ä½¿ç”¨historyæ—¶ï¼Œéœ€è¦åç«¯è¿›è¡Œé…ç½®ã€‚</p><h3 id="å•é¡µé¢SPA-amp-è§£å†³æ–¹æ¡ˆNuxt"><a href="#å•é¡µé¢SPA-amp-è§£å†³æ–¹æ¡ˆNuxt" class="headerlink" title="å•é¡µé¢SPA &amp; è§£å†³æ–¹æ¡ˆNuxt"></a><div id="SPA">å•é¡µé¢SPA &amp; è§£å†³æ–¹æ¡ˆNuxt</div></h3><blockquote><p>å•é¡µé¢SPAç¼ºç‚¹</p></blockquote><ul><li><p>ä¸åˆ©äºSEOã€æœç´¢å¼•æ“ã€‘</p><p>  <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæœåŠ¡ç«¯å¤„ç†ç„¶åå°†htmlè¿”å›æµè§ˆå™¨ç«¯ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“åŒæ„SSRã€‚åŒæ„SSR â€“ é€‚åˆåŠ¨æ€æ¸²æŸ“ï¼Œé…ç½®ç¹çã€‚<br>  <br></p></li><li><p>é¦–å±æ¸²æŸ“æ—¶é—´é•¿</p><p>  <strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šé¢„æ¸²æŸ“Prerendering â€“ Prerenderingé€‚åˆé™æ€ç«™ç‚¹<br>   <br></p></li></ul><blockquote><p>è§£å†³æ–¹æ¡ˆNuxt - è§£å†³SEOé—®é¢˜</p></blockquote><p>  <a href="https://zh.nuxtjs.org/" target="_blank" rel="noopener">Nuxtå®˜ç½‘</a></p><h3 id="UIç»„ä»¶åº“"><a href="#UIç»„ä»¶åº“" class="headerlink" title="UIç»„ä»¶åº“"></a><div id="componentsUI">UIç»„ä»¶åº“</div></h3><p><img src="ç»„ä»¶åº“å¯¹æ¯”.jpg" alt="ç»„ä»¶åº“å¯¹æ¯”"></p><ul><li><a href="https://element.eleme.cn/" target="_blank" rel="noopener">element-ui</a></li><li><a href="https://www.antdv.com/" target="_blank" rel="noopener">Ant Design of Vue</a></li><li><a href="https://www.iviewui.com/" target="_blank" rel="noopener">iview</a></li></ul><blockquote><p>æŒ‰éœ€åŠ è½½</p></blockquote><p><a href="https://unpkg.com/browse/element-ui@2.13.0/" target="_blank" rel="noopener">element-uiåŒ…</a></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•´ä¸ªå¼•ç”¨</span></span><br><span class="line"><span class="keyword">import</span> element <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line"><span class="comment">// é”™è¯¯çš„æŒ‰éœ€åŠ è½½</span></span><br><span class="line"><span class="keyword">import</span> &#123;Select, Option, Button, MessageBox, Message&#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br></pre></td></tr></table></figure><p>åªè¦æ˜¯ä»<code>element-ui</code>å¼•å…¥ä¸œè¥¿ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œelement-ui/src/index.jsæ–‡ä»¶ã€‚è€Œæ”¹æ–‡ä»¶ä¸­ä¼šå°†elemeent-uiç»„ä»¶åº“ä¸­æ‰€æœ‰çš„ç»„ä»¶éƒ½importè¿›æ¥ï¼Œé‚£ä¹ˆå°±ä¼šå°†æ‰€æœ‰ç»„ä»¶åŠ è½½è¿‡æ¥ã€‚åªæ˜¯<code>import {Select} from &#39;element-ui&#39;</code>è¿™ç§æ¨¡å¼ï¼Œå‡å°‘äº†Vueå…¨å±€ç»„ä»¶çš„æŒ‚è½½è€Œå·²ï¼Œå¹¶ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„ <code>æŒ‰éœ€åŠ è½½</code>ã€‚</p><ul><li><p>element-uiå®˜ç½‘æŒ‰éœ€åŠ è½½æ¨è<br><img src="element-uiæŒ‰éœ€åŠ è½½.jpg" alt="element-uiå®˜ç½‘æŒ‰éœ€åŠ è½½æ¨è"></p></li><li><p>Ant Design of Vueå®˜ç½‘æŒ‰éœ€åŠ è½½æ¨è<br><img src="antdvæŒ‰éœ€åŠ è½½.jpg" alt="Ant Design of Vueå®˜ç½‘æŒ‰éœ€åŠ è½½æ¨è"></p></li><li><p>iviewå®˜ç½‘æŒ‰éœ€åŠ è½½æ¨è<br><img src="iviewæŒ‰éœ€åŠ è½½.jpg" alt="iviewæŒ‰éœ€åŠ è½½"></p></li></ul><h3 id="å•å…ƒæµ‹è¯•-jset"><a href="#å•å…ƒæµ‹è¯•-jset" class="headerlink" title="å•å…ƒæµ‹è¯•- jset"></a><div id="jest">å•å…ƒæµ‹è¯•- <a href="https://jestjs.io/" target="_blank" rel="noopener">jset</a></div></h3><blockquote><p>å¸¸ç”¨æ–¹æ³•</p></blockquote><ul><li>describe åˆ›å»ºä¸€ä¸ªå°†å‡ ä¸ªç›¸å…³æµ‹è¯•ç»„åˆåœ¨ä¸€èµ·çš„æ¨¡å—</li><li>testï¼Œåˆ«åitã€‚è¿è¡Œæµ‹è¯•</li><li>expect æ–­è¨€æŸä¸ªå€¼</li></ul><blockquote><p> å€¼å¯¹æ¯”</p></blockquote><ul><li>toBe(value) åŸå§‹å€¼æˆ–æ£€æŸ¥å¯¹è±¡å®ä¾‹çš„å¼•ç”¨ä¸€è‡´æ€§</li><li>toEqual(value) é€’å½’æ¯”è¾ƒå¯¹è±¡å®ä¾‹çš„æ‰€æœ‰å±æ€§</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Vueç”Ÿæ€åœˆä¸­ï¼Œå¸¸ç”¨åˆ°çš„å°±æ˜¯Vuexä»¥åŠVueRouterï¼Œé‚£ä¹ˆå®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿä»¥åŠæ˜¯å¦‚ä½•æŒ‚è½½åˆ°Vueå®ä¾‹ä¸Šçš„ï¼Ÿè¿™äº›é—®é¢˜å°†æ˜¯æˆ‘ä¸‹é¢ğŸ‘‡å†…å®¹çš„é‡ç‚¹ã€‚å½“ç„¶ä¹Ÿæ¶‰åŠåˆ°ä¸€äº›åœ¨å¼€å‘ä¸­æ‰€ä½¿ç”¨åˆ°çš„ç»„ä»¶åº“ä»¥åŠå•å…ƒæµ‹è¯•jestï¼Œè¿™äº›åªæ˜¯ä¸€ç¬”å¸¦è¿‡â€¦&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2019/12/11/Vue%E5%AE%9E%E6%88%98%E5%BC%80%E5%8F%91-%E7%94%9F%E6%80%81%E7%AF%87/Vuex/"/>
    <id>http://yoursite.com/2019/12/11/Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡/Vuex/</id>
    <published>2019-12-11T15:27:34.000Z</published>
    <updated>2019-12-11T15:27:34.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h1><h2 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h2><h3 id="VuexçŠ¶æ€ç®¡ç†"><a href="#VuexçŠ¶æ€ç®¡ç†" class="headerlink" title="VuexçŠ¶æ€ç®¡ç†"></a>VuexçŠ¶æ€ç®¡ç†</h3><blockquote><p>çŠ¶æ€ç®¡ç†æ¨¡å¼</p></blockquote><ul><li>stateï¼Œé©±åŠ¨åº”ç”¨çš„æ•°æ®æº</li><li>viewï¼Œä»¥å£°æ˜æ–¹å¼å°†stateæ˜ å°„åˆ°è§†å›¾</li><li>actionsï¼Œå“åº”åœ¨viewä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–</li></ul><blockquote><p>åº”ç”¨é‡åˆ°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€æ—¶ï¼Œå•å‘æ•°æ®æµçš„ç®€æ´æ€§å¾ˆå®¹æ˜“è¢«ç ´åï¼š</p></blockquote><ul><li>å¤šå°‘ä¸ªè§†å›¾ä¾èµ–äºåŒä¸€çŠ¶æ€</li><li>æ¥è‡ªä¸åŒè§†å›¾çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€</li></ul><blockquote><p>Vuex</p></blockquote><ul><li>ä¸€ä¸ªå…¨å±€çš„å•ä¾‹æ¨¡å¼</li><li>æ ¸å¿ƒå°±æ˜¯storeï¼ŒåŒ…å«ç€åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ã€‚</li></ul><blockquote><p>Vuexå’Œå•çº¯çš„å…¨å±€å¯¹è±¡çš„ä¸åŒï¼š</p></blockquote><ul><li>Vuexçš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ã€‚Storeä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°ã€‚</li><li>ä¸èƒ½ç›´æ¥ä¿®æ”¹storeä¸­çš„çŠ¶æ€ã€‚æ”¹å˜storeä¸­çŠ¶æ€çš„å”¯ä¸€æ–¹å¼å°±æ˜¯æ˜¾ç¤ºæäº¤(commit)mutationã€‚</li></ul><p><strong>Vuexæ˜¯ä¸€ä¸ªä¸é—­åˆçš„çŠ¶æ€ç®¡ç†æ¨¡å¼å®ä¾‹ï¼Œå®ƒå°†çŠ¶æ€ç®¡ç†æ¨¡å¼ä¸­çš„æ•°æ®stateå’Œå˜æ›´stateçš„äº‹ç‰©actionsã€mutationsä¸Vueç»„ä»¶è¿›è¡Œç»“åˆï¼Œå½¢æˆä¸€ä¸ªé—­åˆçš„çŠ¶æ€ç®¡ç†ã€‚ç»„ä»¶é€šè¿‡æ˜¾ç¤ºæäº¤ä¿®æ”¹Vuexä¸­æ•°æ®ï¼ŒVuexä¸­æ•°æ®ç»“åˆVueå“åº”å¼åŸç†æ¥è§¦å‘ç»„ä»¶æ›´æ–°ã€‚å…¶ä¸­ï¼ŒDevtoolså·¥å…·å¯ä»¥ç›‘å¬Vuexä¸­mutationsäº‹åŠ¡ä¸­å¯¹stateçš„ä¿®æ”¹ã€‚</strong></p><h3 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h3><ol><li><p>Storeæ„é€ å™¨é€‰é¡¹</p><ul><li><p>state â€“ å­˜å‚¨æ•°æ®ï¼ŒStoreå®ä¾‹çš„æ ¹stateå¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">state: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢stateè¢«å…±äº«ï¼Œåˆ›å»ºå•ä¾‹æƒ³æ³•ã€‚ä¸vueä¸­dataæ˜¯ä¸€ä¸ªå‡½æ•°æƒ³æ³•ä¸€è‡´ã€‚</p></blockquote></li><li><p>getters â€“ storeå®ä¾‹çš„è®¡ç®—å±æ€§ï¼Œç±»ä¼¼äºcomputed</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">    getShoppingCartLen(state) &#123;</span><br><span class="line">        <span class="keyword">return</span> state.shoppingCart.length</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ol><ul><li><p>mutations â€“ ä¿®æ”¹storeä¸­çŠ¶æ€çš„å¤„ç†äº‹åŠ¡ï¼Œç±»ä¼¼äº‹ä»¶æ³¨å†Œ</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨å†Œäº‹åŠ¡</span></span><br><span class="line"><span class="keyword">import</span> &#123;SET_USER_NAME&#125; <span class="keyword">from</span> <span class="string">'mutations-types'</span></span><br><span class="line">mutations: &#123;</span><br><span class="line">    SET_USER_NAME: <span class="function"><span class="keyword">function</span> (<span class="params">state, payload</span>) </span>&#123;</span><br><span class="line">        state.user.name = payload</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æäº¤ä¿®æ”¹storeä¸­çŠ¶æ€</span></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'SET_USER_NAME'</span>, <span class="string">'zhaoshijuan'</span>)</span><br></pre></td></tr></table></figure><blockquote><p>vuexçš„storeæ˜¯å“åº”å¼çš„ï¼Œå› æ­¤éœ€è¦mutationæ“ä½œstoreä¸­çŠ¶æ€æ—¶æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li>æå‰åœ¨storeä¸­åˆå§‹åŒ–å¥½æ‰€æœ‰æ‰€éœ€å±æ€§</li><li>éœ€è¦æ·»åŠ æ–°å±æ€§ï¼šVue.set(obj, property, value); æˆ–è€… æ–°å¯¹è±¡æ›¿æ¢è€å¯¹è±¡ã€‚</li></ol></blockquote></li></ul><ul><li><p>actions â€“ å¼‚æ­¥æ“ä½œäº‹åŠ¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">    setusername: <span class="function"><span class="keyword">function</span> (<span class="params">context, payload</span>) </span>&#123;</span><br><span class="line">        context.commit(<span class="string">'SET_USER_NAME'</span>, payload)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>actionsä¸mutationsåŒºåˆ«ï¼šactionæäº¤çš„æ˜¯mutationï¼Œmutationç›´æ¥ä¿®æ”¹çŠ¶æ€ï¼›actionå¯ä»¥åŒ…å«å¼‚æ­¥æ“ä½œã€‚</p></blockquote></li></ul><ul><li><p>modules â€“ æ¨¡å—</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">modules: &#123;</span><br><span class="line">    user: &#123;</span><br><span class="line">        namespaced: <span class="literal">true</span>,</span><br><span class="line">        state: &#123;<span class="attr">name</span>: <span class="string">''</span>&#125;,</span><br><span class="line">        getters: &#123;&#125;,</span><br><span class="line">        mutations: &#123;&#125;,</span><br><span class="line">        actions: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ‰€æœ‰æœ‰å…³çŠ¶æ€çš„ï¼Œæ‹¿åˆ°çš„éƒ½æ˜¯å±€éƒ¨çŠ¶æ€ï¼ŒåŒ…å«context.stateæŒ‡å‘çš„ä¹Ÿæ˜¯å±€éƒ¨çŠ¶æ€ã€‚context.rootStateæŒ‡å‘æ ¹çŠ¶æ€ï¼Œæˆ–è€…ä½œä¸ºå‚æ•°rootStateä¼ é€’ã€‚</p></blockquote></li><li><p>plugins â€“ æ’ä»¶ï¼Œæ–¹æ³•æ•°ç»„ï¼Œstoreæ˜¯æ–¹æ³•å‚æ•°</p></li><li><p>strict â€“ æ˜¯å¦æ˜¯ä¸¥æ ¼æ¨¡å¼ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä»»ä½•mutationå¤„ç†å‡½æ•°ä»¥å¤–ä¿®æ”¹Vuex stateéƒ½ä¼šæŠ¥é”™ã€‚</p></li><li><p>devtools â€“ è®¢é˜…åˆ°devtoolsæ’ä»¶</p></li></ul><ol start="2"><li><p>Storeå®ä¾‹å±æ€§</p><ul><li>state â€“ this.$store.stateæ˜¯storeä¸­çŠ¶æ€</li><li>getters â€“ this.$store.gettersæ˜¯storeä¸­getters</li></ul></li></ol><ol start="3"><li><p>Storeå®ä¾‹æ–¹æ³•</p><ul><li><p>commit â€“ æäº¤mutation</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'mutationType'</span>, mutationPayload, options);</span><br><span class="line"><span class="keyword">this</span>.$store.commit(&#123;</span><br><span class="line">    type: <span class="string">'mutationType'</span>,</span><br><span class="line">    mutationPayload: mutationPayload</span><br><span class="line">&#125;, options)</span><br></pre></td></tr></table></figure></li><li><p>dispatch â€“ åˆ†å‘action</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.dispatch(type, payload, options);</span><br><span class="line"><span class="keyword">this</span>.$store.dispathc(&#123;</span><br><span class="line">    type: type,</span><br><span class="line">    payload: payload</span><br><span class="line">&#125;, options)</span><br></pre></td></tr></table></figure></li><li><p>replaceState â€“ æ›¿æ¢storeçš„æ ¹çŠ¶æ€</p></li><li>watch â€“ å“åº”å¼ç›‘å¬fnè¿”å›å€¼ã€‚watch(fn, callback, options)</li><li>subscribe â€“ è®¢é˜…mutationï¼Œmutationå®Œæˆåè°ƒç”¨</li><li>subscribeAction â€“ è®¢é˜…actionï¼Œé»˜è®¤æ˜¯åœ¨actionè°ƒç”¨ä¹‹å‰è§¦å‘ã€‚å«æœ‰beforeï¼ŒafteræŒ‡å®šè®¢é˜…å¤„ç†å‡½æ•°åœ¨actionåˆ†å‘ä¹‹å‰ï¼Œä¹‹åè°ƒç”¨</li><li>registerModule â€“ æ³¨å†ŒæŒ‡å®špathçš„module</li><li>unregisterModule â€“ å¸è½½æŒ‡å®špathçš„module</li><li>hotUpdate â€“ çƒ­æ›¿æ¢æ–°çš„actionå’Œmutation</li></ul></li></ol><h3 id="è¾…åŠ©å‡½æ•°"><a href="#è¾…åŠ©å‡½æ•°" class="headerlink" title="è¾…åŠ©å‡½æ•°"></a>è¾…åŠ©å‡½æ•°</h3><ul><li>mapState â€“ åœ¨è®¡ç®—å±æ€§ä¸­æ··å…¥storeä¸­çŠ¶æ€</li><li>mapGetters â€“ è®¡ç®—å±æ€§ä¸­æ··å…¥storeä¸­getters</li><li>mapMutations â€“ æ–¹æ³•methodsæ··å…¥mutationäº‹åŠ¡</li><li>mapActions â€“ æ–¹æ³•methodsæ··å…¥actionäº‹åŠ¡</li><li>createNamespacedHelpers â€“ åˆ›å»ºåŸºäºå‘½åç©ºé—´çš„è¾…åŠ©å‡½æ•°ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡å®šå‘½åç©ºé—´çš„mapState,mapGetters,mapMutations,mapActionså¯¹è±¡</li></ul><h2 id="æºç å®ç°"><a href="#æºç å®ç°" class="headerlink" title="æºç å®ç°"></a>æºç å®ç°</h2><h3 id="Vuexå®‰è£…æ³¨å†Œ"><a href="#Vuexå®‰è£…æ³¨å†Œ" class="headerlink" title="Vuexå®‰è£…æ³¨å†Œ"></a>Vuexå®‰è£…æ³¨å†Œ</h3><ul><li>Vue.use(Vuex) =&gt; ä¼šè§¦å‘Vuexçš„installæ–¹æ³•</li><li>Vuexä¸­applyMixinæ–¹æ³•ï¼šå¯¹äºVueç‰ˆæœ¬è¿›è¡Œåˆ¤æ–­ï¼Œ2.xç‰ˆæœ¬ä¸­ï¼ŒVue.mixin({beforeCreate: vuexInit})</li><li>vuexInitæ–¹æ³•ï¼šå°†this.$options.storeæ³¨å…¥åˆ°this.$storeä¸Š</li></ul><h3 id="Storeå®ä¾‹åŒ–-Vuexä¾èµ–äºpromise"><a href="#Storeå®ä¾‹åŒ–-Vuexä¾èµ–äºpromise" class="headerlink" title="Storeå®ä¾‹åŒ– [Vuexä¾èµ–äºpromise]"></a>Storeå®ä¾‹åŒ– [Vuexä¾èµ–äºpromise]</h3><ul><li><p>new ModuleCollection(options)</p><ul><li>ModuleCollection.register(path, rawModule)</li><li>new Module(rawModule)ï¼šæ¯ä¸ªmoduleæ¨¡å—</li><li>å¯¹äºåˆšå¼€å§‹ï¼Œpathä¸ºç©ºæ•°ç»„ï¼Œä¼šæ‰§è¡Œthis.root = newModule</li><li><p>rawModule.modulesä¹Ÿå°±æ˜¯åœ¨new Vuex.Storeæ—¶ä¼ é€’çš„modulesæ•°æ®ï¼Œå¦‚æœæœ‰å€¼ï¼Œå°±ä¼šé€’å½’è¿è¡Œå¦‚ä¸‹[å°†moduleså»ºç«‹æˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„]</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// thisæŒ‡å‘ModuleCollectionï¼Œpathæ˜¯ä¸€ç›´è´¯ç©¿çš„æ•°æ®</span></span><br><span class="line">forEachValue(rawModule.modules, (rawChildModule, key) =&gt; &#123;</span><br><span class="line">    <span class="keyword">this</span>.register(path.concat(key), rawChildModule, runtime);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>pathå·²ç»ä¸å†æ˜¯ç©ºæ•°ç»„ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹ä»£ç </p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// thisæŒ‡å‘ModuleCollectionï¼Œå»ºç«‹çˆ¶å­å…³ç³»</span></span><br><span class="line"><span class="keyword">const</span> parent = <span class="keyword">this</span>.get(path.slice(<span class="number">0</span>, <span class="number">-1</span>))</span><br><span class="line">parent.addChild(path[path.length - <span class="number">1</span>], newModule)</span><br><span class="line"></span><br><span class="line"><span class="comment">// parentæ˜¯moduleå®ä¾‹ï¼Œparent.addChildæ–¹æ³•å¦‚ä¸‹[thisæŒ‡å‘module]</span></span><br><span class="line">addChild(key, <span class="built_in">module</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>._children[key] = <span class="built_in">module</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p>installModule(this, state, [], _this.module.root)</p><p> ä¸Šé¢æ•°æ®stateå°±æ˜¯_this.module.root.stateã€‚installModule(state, rootState, path, module, hot)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¯¹äºmutationsï¼Œactionsï¼Œgettersï¼Œ_wrapperGettersç­‰åˆå§‹åŒ–ã€‚éå†æ¯ä¸ªmoduleçš„actionsï¼Œmutationsï¼Œgettersï¼Œchildæ•°æ®</span><br></pre></td></tr></table></figure></li></ul><pre><code>- æ ¹æ®namespaceè®¾ç½®_store._modulesNamespaceMap[namespace] = moduleã€‚- è®¾ç½®æ¯ä¸ªmodule.context = makeLocalContextï¼Œå¯ä»¥é¿å…é‡åé—®é¢˜ï¼Œcommitæäº¤mutationæ—¶ï¼Œä¸åŠ namespaceä¹Ÿå¯ä»¥æˆåŠŸã€‚- **makeLocalContext**è¿”å›çš„æ˜¯ä¸€ä¸ªlocalå¯¹è±¡ï¼šdispatchï¼Œcommitï¼Œgettersã€‚dispatchã€commitæ ¹æ®ä¼ é€’çš„å‚æ•°namespace + typeå½¢æˆæ–°çš„typeå€¼ï¼Œå†è°ƒç”¨store[methodName]\(type)ã€‚    <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mutationï¼Œactionå¯¹åº”çš„commit(namespace/mutationName)ï¼Œdispathc(namespace/actionName)ï¼Œ_mutationå’Œ_actionä¸€å±‚å¯¹è±¡ï¼Œkeyå€¼æ˜¯å«æœ‰ä¸€å±‚å±‚namespaceï¼›stateå¯¹åº”çš„state[namespace]å¯¹è±¡å½¢å¼ä¸€å±‚ä¸€å±‚å¾€ä¸‹æŸ¥æ‰¾ã€‚</span><br></pre></td></tr></table></figure>- **forEachMutation** é€’å½’registerMutation- **forEachAction** é€’å½’registerActionï¼Œæ¯ä¸ªactionï¼ˆé™¤äº†è¿”å›å€¼æ˜¯Promiseç±»å‹çš„ï¼‰è¢«æ‰§è¡Œåè¿”å›çš„æ˜¯ä¸€ä¸ªPromise.resolve(actionå‡½æ•°æ‰§è¡Œåç»“æœ)å®ä¾‹åŒ–åçš„Promiseå®ä¾‹- **forEachGetter** é€’å½’registerGetterï¼Œæ¯ä¸ªgetterä¼šæŒ‚è½½åœ¨store._wrappedGettersä¸Š- **forEachChild** é€’å½’æ‰§è¡ŒinstallModuleï¼Œä¼ é€’çš„pathæ˜¯ï¼šå…¨å±€pathä¸€ç›´concat(key)</code></pre><ul><li><p>resetStoreVM(this, state)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¿è¯äº†Vuexçš„storeä¸­stateå­˜å‚¨æ•°æ®æ˜¯å“åº”å¼ï¼Œå¹¶ä¸”gettersç±»ä¼¼äºVueçš„computedï¼Œæ‹¥æœ‰ç¼“å­˜ã€‚</span><br></pre></td></tr></table></figure></li></ul><pre><code>- store.gettersçš„æ¯ä¸ªgetteråšä¸€ä¸ªgetæ‹¦æˆªï¼Œæ‹¦æˆªè¿”å›store.\_vm[key]ï¼šstore.\_vmå®ä¾‹ä¸Šå¯¹åº”çš„computed-key- store._vmæ˜¯ä¸€ä¸ªVueå®ä¾‹ï¼Œdataæ•°æ®$$state: state, computedå…¶å®å°±æ˜¯ä¼ é€’çš„æ‰€æœ‰çš„getters</code></pre><h2 id="å®ç°Vuexå…³é”®ç‚¹"><a href="#å®ç°Vuexå…³é”®ç‚¹" class="headerlink" title="å®ç°Vuexå…³é”®ç‚¹"></a>å®ç°Vuexå…³é”®ç‚¹</h2><h3 id="æ„é€ å‡½æ•°å‚æ•°"><a href="#æ„é€ å‡½æ•°å‚æ•°" class="headerlink" title="æ„é€ å‡½æ•°å‚æ•°"></a>æ„é€ å‡½æ•°å‚æ•°</h3><ul><li>stateå“åº”å¼ï¼Œåˆ©ç”¨new Vue({data: {$$state: state}})å®ä¾‹åŒ–Vueï¼Œä½¿å¾—stateæ‹¥æœ‰å’ŒVueä¸€æ ·çš„å“åº”å¼ã€‚</li><li>gettersç¼“å­˜è®¡ç®—ï¼Œåˆ©ç”¨Vueå®ä¾‹çš„computedç‰¹æ€§ã€‚</li><li>mutationsæ³¨æ„æ¨¡å—åŒ–ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åˆ©ç”¨call</li><li>actionsæ³¨æ„æ¨¡å—åŒ–ï¼ŒåŒæ—¶contextä¼ é€’çš„ä¸æ˜¯storeæœ¬èº«ï¼Œè€Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰ç›¸åŒdispatch,commit,getters,state,rootGetters,rootStateæ•°æ®çš„å¯¹è±¡</li><li>modules é€’å½’å®ç°<ul><li>é¦–å…ˆéœ€è¦ä¸€ä¸ªLocalContext</li><li>é€’å½’ç»™rootStateæ·»åŠ stateå½¢æˆä¸€ä¸ªæ ‘å½¢çŠ¶æ€ç®¡ç†</li><li>å°†gettersç›´æ¥æŒ‚è½½åœ¨store_wrappedGettersï¼ŒObject.defineProperty(store.getters)getæ‹¦æˆªè¿”å›vueå®ä¾‹computeï¼Œæ³¨å†Œåˆ°storeå®ä¾‹çš„getterså±æ€§</li><li>å°†mutationsæŒ‚è½½åœ¨store._mutationï¼Œå¹¶ä¸”å±æ€§åç§°å°±æ˜¯namespace + â€˜/â€˜ + keyï¼Œå±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„</li><li>å°†actionsæŒ‚è½½åœ¨store._actionsï¼Œå±æ€§åç§°æ˜¯namspace + â€˜/â€˜ + keyï¼Œå±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„</li><li>modulesé€’å½’æŒ‚è½½åœ¨store._modules.root._childrenï¼Œä¸€å±‚ä¸€å±‚å½¢æˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„</li></ul></li></ul><h3 id="å®ä¾‹å±æ€§"><a href="#å®ä¾‹å±æ€§" class="headerlink" title="å®ä¾‹å±æ€§"></a>å®ä¾‹å±æ€§</h3><ul><li>state è¿”å›çš„æ˜¯storeå®ä¾‹ä¸Š_vm._data.\$\$stateï¼Œä¹Ÿå°±æ˜¯Vueå®ä¾‹ä¸­dataçš„$$stateæ•°æ®</li><li>getters registerGetteræ—¶ï¼Œå°†æ¯ä¸ªmoduleæå–åˆ°this._wrappedGetterså¯¹è±¡ä¸­ï¼Œåœ¨å¯¹storeå®ä¾‹gettersæ¯ä¸ªå±æ€§è¿›è¡Œæ‹¦æˆªæ—¶ï¼ŒObject.definePropertyä¸­getè¿”å›this._wrappedGetterså¯¹åº”getter</li></ul><h3 id="å®ä¾‹æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•"></a>å®ä¾‹æ–¹æ³•</h3><ul><li>dispatch</li><li>commit</li><li>subscribe è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿è¡Œåå¯ä»¥åœæ­¢è®¢é˜…ã€‚è®¢é˜…mutationï¼Œåœ¨æ¯ä¸ªmutationå®Œæˆåè°ƒç”¨ã€‚</li><li>subscribeAction è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿è¡Œååœæ­¢è®¢é˜…ã€‚è®¢é˜…actionï¼Œåœ¨æ¯ä¸ªactionåˆ†å‘è°ƒç”¨ã€‚ã€beforeï¼ŒafteræŒ‡å®šactionåˆ†å‘ä¹‹å‰ä¹‹åã€‘</li><li>replaceState æ›¿æ¢æ•´ä¸ªstoreå®ä¾‹ä¸Šçš„stateæ•°æ®</li><li>watch å®é™…æ˜¯this._watcherVM.$watchã€‚è¿”å›å‡½æ•°ç”¨äºåœæ­¢ç›‘å¬ã€‚</li><li>registerModule æ³¨å†Œæ¨¡å—ã€‚éœ€è¦installModuleï¼ŒresetStoreVM</li><li>unregisterModule å¸è½½æ¨¡å—ã€‚åˆ é™¤æ¨¡å—æ•°æ®ï¼ŒåŒæ—¶å°†stateä¹ŸVue.deleteã€‚æ ¹æ®æœ€æ–°æ•°æ®installModuleå’ŒresetStoreVM</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vuex&quot;&gt;&lt;a href=&quot;#vuex&quot; class=&quot;headerlink&quot; title=&quot;vuex&quot;&gt;&lt;/a&gt;vuex&lt;/h1&gt;&lt;h2 id=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;a href=&quot;#åŸºæœ¬æ¦‚å¿µ&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬æ¦‚å¿µ&quot;&gt;&lt;/a
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://yoursite.com/2019/12/11/Vue%E5%AE%9E%E6%88%98%E5%BC%80%E5%8F%91-%E7%94%9F%E6%80%81%E7%AF%87/VueRouter/"/>
    <id>http://yoursite.com/2019/12/11/Vueå®æˆ˜å¼€å‘-ç”Ÿæ€ç¯‡/VueRouter/</id>
    <published>2019-12-11T15:19:38.000Z</published>
    <updated>2019-12-11T15:19:38.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="VueRouter"><a href="#VueRouter" class="headerlink" title="VueRouter"></a>VueRouter</h2><ol><li><p>åœ¨Vueç»„ä»¶ä¸­æ³¨å†ŒVueRouter</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(VueRouter)</span><br></pre></td></tr></table></figure></li><li><p>å®šä¹‰ï¼ˆè·¯ç”±ï¼‰ç»„ä»¶</p><p> å®šä¹‰åˆ›å»ºè·¯ç”±é…ç½®ä¿¡æ¯æ—¶æ‰€éœ€è¦ç”¨åˆ°çš„ç»„ä»¶ã€‚</p></li><li><p>åˆ›å»ºVueRouterå®ä¾‹ï¼Œå¹¶ä¸”é…ç½®è·¯ç”±åŒ¹é…ä¿¡æ¯ä»¥åŠå…¶ä»–é…ç½®ä¿¡æ¯</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">''</span>, <span class="attr">name</span>: <span class="string">''</span>, <span class="attr">component</span>: componentName&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>Vueå®ä¾‹ä¸­æŒ‚è½½VueRouterå®ä¾‹</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    router</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol><h2 id="è·¯ç”±æ³¨å†Œ"><a href="#è·¯ç”±æ³¨å†Œ" class="headerlink" title="è·¯ç”±æ³¨å†Œ"></a>è·¯ç”±æ³¨å†Œ</h2><h3 id="1-Vue-use-VueRouter"><a href="#1-Vue-use-VueRouter" class="headerlink" title="1. Vue.use(VueRouter)"></a>1. Vue.use(VueRouter)</h3><blockquote><p>åªæœ‰åœ¨new Vueå®ä¾‹æ—¶ï¼Œä¼ å…¥routersé…ç½®æ‰§è¡Œinstallæ‰æ˜¯æœ‰æ„ä¹‰çš„ã€‚</p></blockquote><p>Vue.useæ–¹æ³•è°ƒç”¨çš„æ˜¯VueRouterä¸­çš„installæ–¹æ³•ã€‚VueRouterä¸­installæ–¹æ³•åˆ©ç”¨äº†Vue.mixinæ··å…¥beforeCreateå’Œdestroyedé’©å­å‡½æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Vue.mixin(&#123;</span><br><span class="line">    beforeCreate () &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.$options.router !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">            <span class="comment">// æ ¹ç»„ä»¶Vueå®ä¾‹</span></span><br><span class="line">            <span class="keyword">this</span>._routerRoot = <span class="keyword">this</span></span><br><span class="line">            <span class="comment">// æ³¨å†Œè·¯ç”±ç›¸å…³ä¿¡æ¯ï¼š$route, $routerç­‰</span></span><br><span class="line">            <span class="keyword">this</span>._router = <span class="keyword">this</span>.$options.router</span><br><span class="line">            <span class="comment">// this._routerå®é™…æ˜¯ä¸€ä¸ªVueRouterå®ä¾‹</span></span><br><span class="line">            <span class="keyword">this</span>._router.init(<span class="keyword">this</span>)</span><br><span class="line">            <span class="comment">// å°†_routeå˜æˆä¸€ä¸ªå“åº”å¼çš„</span></span><br><span class="line">            Vue.util.defineReactive(<span class="keyword">this</span>, <span class="string">'_route'</span>, <span class="keyword">this</span>._router.history.current)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// éæ ¹ç»„ä»¶</span></span><br><span class="line">            <span class="keyword">this</span>._routerRoot = (<span class="keyword">this</span>.$parent || <span class="keyword">this</span>.$parent._routerRoot) || <span class="keyword">this</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è°ƒç”¨registerInstanceæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¼šåœ¨RouterViewç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        registerInstance(<span class="keyword">this</span>, <span class="keyword">this</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed () &#123;</span><br><span class="line">        <span class="comment">// é”€æ¯è·¯ç”±</span></span><br><span class="line">        registerInstance(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨VueåŸå‹ä¸ŠæŒ‚è½½äº†$router, $routeå±æ€§ï¼›æ³¨å†Œäº†å…¨å±€ç»„ä»¶-RouterViewå’ŒRouterLinkï¼›å®šä¹‰è·¯ç”±å¯¼èˆªçš„åˆå¹¶ç­–ç•¥-ä¸vueçš„createdé’©å­å‡½æ•°åˆå¹¶è§„åˆ™ä¸€è‡´ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‚è½½$router</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$router'</span>, &#123;</span><br><span class="line">    get () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._router</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æŒ‚è½½$route</span></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(Vue.prototype, <span class="string">'$route'</span>, &#123;</span><br><span class="line">    get () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._routerRoot._route</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æ³¨å†Œå…¨å±€ç»„ä»¶</span></span><br><span class="line">Vue.component(<span class="string">'RouterView'</span>, View)</span><br><span class="line">Vue.component(<span class="string">'RouterLink'</span>, Link)</span><br><span class="line"><span class="comment">// å®šä¹‰åˆå¹¶ç­–ç•¥</span></span><br><span class="line"><span class="keyword">const</span> strats = Vue.config.optionMergeStrategies</span><br><span class="line">strats.beforeRouteEnter = strats.beforeRouteLeave = strats.beforeRouteUpdate = strats.created</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><ol><li>Vueç¼–å†™æ’ä»¶çš„æ—¶å€™éœ€è¦æä¾›é™æ€çš„installæ–¹æ³•</li><li>VueRouterçš„installæ–¹æ³•ä¼šç»™æ¯ä¸ªç»„ä»¶æ³¨å…¥beforeCreateå’Œdestroyedé’©å­å‡½æ•°ï¼Œåœ¨beforeCreateè¿›è¡Œä¸€äº›ç§æœ‰å±æ€§å®šä¹‰å’Œè·¯ç”±åˆå§‹åŒ–ã€‚</li></ol><h3 id="2-VueRouterã€è·¯ç”±åˆå§‹åŒ–"><a href="#2-VueRouterã€è·¯ç”±åˆå§‹åŒ–" class="headerlink" title="2. VueRouterã€è·¯ç”±åˆå§‹åŒ–"></a>2. VueRouterã€è·¯ç”±åˆå§‹åŒ–</h3><ol start="3"><li>initæ–¹æ³•æ‰§è¡ŒtransitionToæ–¹æ³•åšè·¯ç”±è¿‡æ¸¡</li><li>æ‰§è¡Œrouter.macthæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸­æ‰§è¡Œmatcher.match</li></ol><h4 id="è·¯ç”±åˆå§‹åŒ–"><a href="#è·¯ç”±åˆå§‹åŒ–" class="headerlink" title="è·¯ç”±åˆå§‹åŒ–"></a>è·¯ç”±åˆå§‹åŒ–</h4><h4 id="1-å®ä¾‹åŒ–VueRouter"><a href="#1-å®ä¾‹åŒ–VueRouter" class="headerlink" title="1. å®ä¾‹åŒ–VueRouter"></a>1. å®ä¾‹åŒ–VueRouter</h4><p>  new VueRouterä¼šè¿›å…¥VueRouterç±»ä¸­çš„constructoræ„é€ å™¨ä¸­ã€‚æ„é€ å™¨æ¥å—ä¸€ä¸ªé…ç½®é¡¹ä¿¡æ¯optionså¯¹è±¡ï¼ŒåŒ…å«äº†è·¯ç”±é…ç½®ä¿¡æ¯routesï¼Œè·¯ç”±æ¨¡å¼modeï¼Œé™çº§å¤„ç†fallbackç­‰ã€‚</p><ul><li>fallbackï¼šé™çº§å¤„ç†ï¼Œå¯¹äºè·¯ç”±æ¨¡å¼çš„é™çº§å¤„ç†ï¼Œå¦‚æœä¸æ”¯æŒhistoryå°±ä¼šé™çº§åˆ°hashæ¨¡å¼ã€‚</li><li>è·¯ç”±æ¨¡å¼hash,history,abstractåˆ†åˆ«å¯¹åº”ä¸åŒçš„ç±»HashHistory,Html5History,AbstractHistoryã€‚è¿™ä¸‰ä¸ªç±»éƒ½ç»§æ‰¿äºhistoryç±»ã€‚</li></ul>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VueRouter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> (options) &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="comment">// options.routeså°±æ˜¯å®ä¾‹åŒ–VueRouterä¼ é€’å‚æ•°ä¸­çš„routesè·¯ç”±é…ç½®ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">this</span>.matcher = createMatcher(options.routes || [], <span class="keyword">this</span>)</span><br><span class="line">        <span class="comment">// ...è·¯ç”±æ¨¡å¼é…ç½®ä»¥åŠæ ¹æ®è·¯ç”±æ¨¡å¼æ¥åˆ›å»ºå¯¹åº”çš„historyå®ä¾‹</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  åˆ›å»ºè·¯ç”±æ˜ å°„è¡¨ï¼Œæ–¹ä¾¿ä»¥åæ ¹æ®pathæˆ–è€…nameæŸ¥æ‰¾åˆ°æƒ³è¦çš„recordã€‚å¹¶ä¸”å¯¹å¤–æä¾›äº†addRoutes(routes)æ–¹æ³•ï¼Œæ–¹ä¾¿åŠ¨æ€æ·»åŠ routesä¿¡æ¯ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">function createMatcher (routes, router) &#123;</span><br><span class="line">    const &#123;pathList, pathMap, nameMap&#125; = createRouteMap(routes)</span><br><span class="line">    </span><br><span class="line">    function addRoutes (routes) &#123;</span><br><span class="line">        createRouteMap(routes, pathList, pathMap, nameMap)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // å¯¹å¤–æä¾›ä¸€ä¸ªaddRoutesæ–¹æ³•ï¼Œæ–¹ä¾¿è‡ªå·±åŠ¨æ€æ·»åŠ routesä¿¡æ¯</span><br><span class="line">    return &#123;match, addRoutes&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// åˆ›å»ºè·¯ç”±æ˜ å°„è¡¨</span><br><span class="line">function createRouteMap (routes, oldPathList, oldPathMap, oladNameMap) &#123;</span><br><span class="line">    const pathList = oldPathList || []</span><br><span class="line">    const pathMap = oldPathMap || Object.create(null)</span><br><span class="line">    const nameMap = oldNameMap || Object.create(null)</span><br><span class="line">    </span><br><span class="line">    // å¯¹è·¯ç”±é…ç½®è¿›è¡Œä¸€ä¸ªéå†ï¼šæ·»åŠ è·¯ç”±è®°å½•ä¿¡æ¯</span><br><span class="line">    routes.forEach(route =&gt; &#123;</span><br><span class="line">        addRouteRecord(pathList, pathMap, nameMap, route)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    // è°ƒæ•´é€šé…ç¬¦ä¼˜å…ˆçº§ï¼Œæ”¾åœ¨ç»“å°¾ã€å«æœ‰é€šé…ç¬¦çš„è·¯ç”±åº”è¯¥æ”¾åœ¨æœ€åã€‘</span><br><span class="line">    for (let i = 0, l = pathList.length; i &lt; l; i++) &#123;</span><br><span class="line">        if (pathList[i] === &apos;*&apos;) &#123;</span><br><span class="line">           pathList.push(pathList.splice(i, 1)[0])</span><br><span class="line">           l--</span><br><span class="line">           i--</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return &#123;pathList, pathMap, nameMap&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  é€’å½’å®ä¾‹åŒ–VueRouteræ—¶ä¼ é€’çš„è·¯ç”±ä¿¡æ¯é…ç½®routes</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addRouteRecord</span> (<span class="params">pathList, pathMap, nameMap, route, parent, matchAs</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// è·å–è·¯ç”±é…ç½®ä¿¡æ¯ä¸­é…ç½®çš„pathå’Œnameï¼Œpathä¸èƒ½ä¸ºç©º</span></span><br><span class="line">  <span class="keyword">const</span> &#123;path, name&#125; = route</span><br><span class="line">  <span class="comment">// route.componentå¿…é¡»æ˜¯ä¸€ä¸ªç»„ä»¶</span></span><br><span class="line">  <span class="comment">// routesä¸­é…ç½® ç¼–è¯‘æ­£åˆ™</span></span><br><span class="line">  <span class="keyword">const</span> pathToRegexpoptions = route.pathToRegexpOptions || &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¯¹è·¯å¾„pathçš„ä¸€ä¸ªå¤„ç†ä»¥åŠå¯¹è·¯å¾„pathæ‹¼æ¥-parent.path/path</span></span><br><span class="line">  <span class="keyword">const</span> normalizedPath = normalizePath(path, parent, pathToRegexpOptions.strict)</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> record = &#123;</span><br><span class="line">      path: normalizedPath,</span><br><span class="line">      regex: compileRouteRegex(normalizedPath, pathToRegexpOptions),</span><br><span class="line">      components: route.components || &#123;<span class="attr">default</span>: route.component&#125;,</span><br><span class="line">      instance: &#123;&#125;,</span><br><span class="line">      name,</span><br><span class="line">      parent,</span><br><span class="line">      matchAs,</span><br><span class="line">      redirect: route.redirect,</span><br><span class="line">      beforeEnter: route.beforeEnter,</span><br><span class="line">      meta: route.meta || &#123;&#125;,</span><br><span class="line">      props: route.props == <span class="literal">null</span> ? &#123;&#125; : route.components ? route.props : &#123;<span class="attr">default</span>: route.props&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// éå†routeä¸­çš„childrenï¼Œé€’å½’æ·»åŠ addRouteRecord</span></span><br><span class="line">  <span class="keyword">if</span> (route.children) &#123;</span><br><span class="line">      route.children.forEach(<span class="function"><span class="params">child</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> childMatchAs = matchAs ? cleanPath(<span class="string">`<span class="subst">$&#123;matchAs&#125;</span>/<span class="subst">$&#123;child.path&#125;</span>`</span>) : <span class="literal">undefined</span></span><br><span class="line">          addRouteRecord(pathList, pathMap, nameMap, child, record, childMatchAs)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// ... å¯¹aliasè·¯ç”±åˆ«åçš„å¤„ç†</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// é€’å½’ä¸Šé¢çš„addRouteRecordåä¸€ç›´åˆ°routeæ²¡æœ‰childrenå­èŠ‚ç‚¹ä¼šæ‰§è¡Œä¸‹é¢</span></span><br><span class="line">  <span class="comment">// ä¼šå…ˆpushæœ€åº•å±‚çš„childrenï¼Œç„¶åä¸€å±‚ä¸€å±‚å¾€ä¸Špushã€å› ä¸ºé€’å½’æ˜¯ä»å¤–å‘å†…ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šä»å†…å‘å¤–ã€‘</span></span><br><span class="line">  <span class="keyword">if</span> (!pathMap[record.path]) &#123;</span><br><span class="line">      pathList.push(record.path)</span><br><span class="line">      pathMap[record.path] = record</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å¦‚æœä¹Ÿé…ç½®äº†nameï¼Œä¼šå°†recordä¹Ÿä¿å­˜åœ¨nameMapä¸­</span></span><br><span class="line">  <span class="keyword">if</span> (name) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!nameMap[name]) &#123;</span><br><span class="line">          nameMap[name] = record</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ä¸Šé¢åˆå§‹åŒ–ä¸€ç³»åˆ—pathList,pathMapä»¥åŠnameMapåï¼Œæ˜¯ä¸ºäº†æ–¹é¢åæœŸçš„æŸ¥æ‰¾matchã€åˆå§‹åŒ–å¼€å§‹beforeCreate=&gt;init=&gt;transitionTo=&gt;router,matchã€‘ï¼Œè¯¦æƒ…è§ä¸‹æ–‡ã€‚</p><h4 id="2-åˆå§‹åŒ–å¼€å§‹ï¼šç»„ä»¶åˆå§‹åŒ–é˜¶æ®µçš„beforeCreate-è°ƒç”¨æ··å…¥çš„router-init"><a href="#2-åˆå§‹åŒ–å¼€å§‹ï¼šç»„ä»¶åˆå§‹åŒ–é˜¶æ®µçš„beforeCreate-è°ƒç”¨æ··å…¥çš„router-init" class="headerlink" title="2. åˆå§‹åŒ–å¼€å§‹ï¼šç»„ä»¶åˆå§‹åŒ–é˜¶æ®µçš„beforeCreate-è°ƒç”¨æ··å…¥çš„router.init"></a>2. åˆå§‹åŒ–å¼€å§‹ï¼šç»„ä»¶åˆå§‹åŒ–é˜¶æ®µçš„beforeCreate-è°ƒç”¨æ··å…¥çš„router.init</h4><p>  Vue.use(VueRouter)ä¹‹åæ··å…¥äº†beforeCreateé’©å­å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä¼šè°ƒç”¨this._route.init(this)ä¹Ÿå°±æ˜¯è°ƒç”¨VueRouterä¸­çš„initæ–¹æ³•ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// VueRouterç±»ä¸­,appå…¶å®å°±æ˜¯ä¸€ä¸ªvueç»„ä»¶å®ä¾‹</span></span><br><span class="line">init (app) &#123;</span><br><span class="line">    <span class="keyword">this</span>.app.push(app)</span><br><span class="line">    <span class="comment">// ç¡®ä¿åé¢çš„é€»è¾‘åªæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.app) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">this</span>.app = app</span><br><span class="line">    <span class="keyword">const</span> history = <span class="keyword">this</span>.history</span><br><span class="line">    <span class="keyword">if</span> (history <span class="keyword">instanceof</span> HTML5History) &#123;</span><br><span class="line">        <span class="comment">// transitionToï¼šè·¯ç”±è·³è½¬</span></span><br><span class="line">        history.transitionTo(history.getCurrentLocation())</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (history <span class="keyword">instanceof</span> HashHistory) &#123;</span><br><span class="line">        <span class="keyword">const</span> setupHashListener = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            history.setupListeners()</span><br><span class="line">        &#125;</span><br><span class="line">        history.transitionTo(history.getCurrentLocation(), setupHashListener, setupHashListener)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    history.listen(<span class="function"><span class="params">router</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.app.forEach(<span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">            app._route = route</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  transitionToè¿›è¡Œè·¯ç”±è·³è½¬</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">transitionTo (location, onComplete) &#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰è·¯å¾„</span></span><br><span class="line">    <span class="keyword">const</span> route = <span class="keyword">this</span>.router.match(location, <span class="keyword">this</span>.current)</span><br><span class="line">    <span class="keyword">this</span>.confirmTransition(route, () =&gt; &#123;...&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  è·å–å½“å‰è·¯å¾„this.router.matchæŒ‡å‘çš„æ˜¯VueRouterä¸­çš„matchå‡½æ•°ï¼Œmatchæœ¬è´¨æŒ‡å‘Matcherä¸­çš„matchå‡½æ•°ã€‚æ­¤matchå‡½æ•°ä¸­åˆ©ç”¨åˆ°å‰é¢åˆå§‹åŒ–çš„pathListï¼ŒpathMapï¼ŒnameMapæ•°æ®ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// VueRouterç±»ä¸­çš„matchå‡½æ•°</span></span><br><span class="line">match (raawLocation, current, redirectedFrom) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.matcher.match(raawLocation, current, redirectedFrom)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  Matcherä¸­matchå‡½æ•°ï¼Œåˆ©ç”¨åˆ°å‰é¢åˆå§‹åŒ–çš„pathListï¼ŒpathMapï¼ŒnameMapæ•°æ®ã€‚æ­¤å‡½æ•°çš„ä½œç”¨ï¼šæ ¹æ®ä¼ é€’çš„locationå’Œå½“å‰routeè®¡ç®—å¾—å‡ºå½“å‰çš„è·¯ç”±ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Matcherä¸­çš„matchå‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">match</span> (<span class="params">raw, currentRoute, redirectedFrom</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¤„ç†å½“å‰çš„è·¯å¾„ç­‰ä¿¡æ¯å¾—åˆ°å½“å‰çš„path,query,hashä»¥åŠ_normalizedæ•°æ®ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">// æˆ–è€…å¾—åˆ°çš„æ˜¯name,params,_normalized</span></span><br><span class="line">    <span class="keyword">const</span> location = normalizeLocatin(raw, currentRoute, <span class="literal">false</span>, router)</span><br><span class="line">    <span class="keyword">const</span> &#123;name&#125; = location</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (name) &#123;</span><br><span class="line">        <span class="keyword">const</span> record = nameMap[name]</span><br><span class="line">        <span class="keyword">if</span> (!record) <span class="keyword">return</span> _createRoute(<span class="literal">null</span>, location)</span><br><span class="line">        <span class="comment">// å¯¹äºparamså‚æ•°è¿›è¡Œå¤„ç†</span></span><br><span class="line">        <span class="keyword">const</span> paramNames = record.regex.keys.filter(<span class="function"><span class="params">key</span> =&gt;</span> !key.optional).map(<span class="function"><span class="params">key</span> =&gt;</span> key.name)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> location.params !== <span class="string">'object'</span>) &#123;</span><br><span class="line">            location.params = &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (currentRoute &amp;&amp; <span class="keyword">typeof</span> currentRoute.params === <span class="string">'object'</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> currentRoute.params) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!(key <span class="keyword">in</span> location.params) &amp;&amp; paramNames.includes(key)) &#123;</span><br><span class="line">                    location.params[key] = currentRoute.params[key]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> _createRoute(record, location, redirectedFrom)</span><br><span class="line">    <span class="comment">// å¯¹äºæ²¡æœ‰nameå±æ€§ï¼Œæœ‰pathå±æ€§è€Œè¨€</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (location.path) &#123;</span><br><span class="line">        location.params = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pathList.length; i++) &#123;</span><br><span class="line">            <span class="keyword">const</span> path = pathList[i]</span><br><span class="line">            <span class="keyword">const</span> record = pathMap[path]</span><br><span class="line">            <span class="comment">// åˆ¤æ–­location.pathæ˜¯å¦åŒ¹é…record.regexæ­£åˆ™ï¼Œå¹¶ä¸”å¦‚æœæœ‰paramsä¼šå¯¹paramsè¿›è¡Œå¤„ç†ã€‚</span></span><br><span class="line">            <span class="keyword">if</span> (matchRoute(record.regex, location.path, location, params)) &#123;</span><br><span class="line">                <span class="keyword">return</span> _createRoute(record, location, redirectedFrom)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> _createRoute(<span class="literal">null</span>, location)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ä¼šæ‰§è¡Œ _createRoute å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªè·¯ç”±è·¯å¾„routeã€‚_createRouteä¼šå¯¹recordè·¯å¾„è¿›è¡Œä¸€ç³»åˆ—çš„å¤„ç†åï¼Œè°ƒç”¨çœŸæ­£åˆ›å»ºè·¯ç”±routeçš„createRouteæ–¹æ³•ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_createRoute</span> (<span class="params">record, location, redirectedFrom</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (record &amp;&amp; record.redirect) &#123;</span><br><span class="line">        <span class="keyword">return</span> redirect(record, redirectedFrom || location)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (record &amp;&amp; record.matchAs) &#123;</span><br><span class="line">        <span class="keyword">return</span> alias(record, location, record.matchAs)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> createRoute(record, location, redirectedFrom, router)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  createRouteåˆ›å»ºè·¯ç”±ï¼ŒlocationæŒ‡çš„æ˜¯å½“å‰è·¯å¾„è§£æå¾—åˆ°çš„æ•°æ®å¯¹è±¡ï¼Œrecordåˆ™æ˜¯æŒ‡åˆå§‹åŒ–è·¯ç”±routesæ—¶æ‰€ä¿å­˜åˆå§‹çš„routeé…ç½®ç›¸å…³ä¿¡æ¯ï¼Œrouteræ˜¯VueRouteå®ä¾‹ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createRoute</span> (<span class="params">record, location, redirectedFrom, router</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> stringifyQuery = router &amp;&amp; router.options.stringifyQuery</span><br><span class="line">    <span class="keyword">let</span> query = location.query || &#123;&#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        query = clone(query)</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> route = &#123;</span><br><span class="line">        name: location.name || (record &amp;&amp; record.name),</span><br><span class="line">        meta: (record &amp;&amp; record.meta) || &#123;&#125;,</span><br><span class="line">        path: location.path || <span class="string">'/'</span>,</span><br><span class="line">        hash: location.hash || <span class="string">''</span>,</span><br><span class="line">        query,</span><br><span class="line">        params: location.params || &#123;&#125;,</span><br><span class="line">        fullPath: getFullPath(location, stringifyQuery),</span><br><span class="line">        matched: record ? formatMatch(record) : []</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (redirectedFrom) &#123;</span><br><span class="line">        route.redirectedFrom = getFullPath(redirectedFrom, stringifyQuery)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é¿å…å¯¹routeè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.freeze(route)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“ï¼š-1"><a href="#æ€»ç»“ï¼š-1" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><ol><li>createMatcherçš„åˆå§‹åŒ–å°±æ˜¯æ ¹æ®è·¯ç”±çš„é…ç½®æè¿°routesåˆ›å»ºæ˜ å°„è¡¨ï¼ˆä¸€ä¸ªå«æœ‰pathList,pathMap,nameMapå¯¹è±¡ï¼‰ï¼ŒåŒ…å«è·¯å¾„ã€åç§°åˆ°è·¯ç”±recordçš„æ˜ å°„å…³ç³»ã€‚</li><li>matchæ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„ä½ç½®å’Œè·¯å¾„è®¡ç®—å‡ºæ–°çš„ä½ç½®ï¼Œå¹¶åŒ¹é…åˆ°å¯¹åº”çš„è·¯ç”±routeï¼Œç„¶åæ ¹æ®æ–°çš„ä½ç½®å’Œrecordåˆ›å»ºæ–°çš„è·¯å¾„routeå¹¶è¿”å›ã€‚</li></ol><h2 id="è·¯ç”±åˆ‡æ¢"><a href="#è·¯ç”±åˆ‡æ¢" class="headerlink" title="è·¯ç”±åˆ‡æ¢"></a>è·¯ç”±åˆ‡æ¢</h2><p>  è·¯ç”±åˆ‡æ¢å…³ç³»åˆ°å¯¼èˆªå®ˆå«ç®¡ç†ï¼ŒURLå˜åŒ–ï¼Œè·¯ç”±ç»„ä»¶æ¸²æŸ“ç­‰ã€‚è·¯ç”±åˆ‡æ¢ä¸»è¦å°±æ˜¯ä¸Šé¢æœ‰æåˆ°è¿‡çš„transitionToï¼Œè€ŒtransitionToè¿™ä¸ªæ–¹æ³•é™¤äº†åœ¨åˆå§‹åŒ–çš„æ—¶å€™æœ‰è§¦å‘ï¼Œä¹Ÿåœ¨VueRouteå®ä¾‹routerçš„pushå’Œreplaceæ–¹æ³•è§¦å‘ï¼ˆHTML5Historyå’ŒHashHistoryçš„pushå’Œreplaceæ–¹æ³•ï¼‰ã€‚</p><h3 id="1-å¼€å§‹ï¼šè·¯ç”±åˆ‡æ¢-transitionTo"><a href="#1-å¼€å§‹ï¼šè·¯ç”±åˆ‡æ¢-transitionTo" class="headerlink" title="1. å¼€å§‹ï¼šè·¯ç”±åˆ‡æ¢-transitionTo"></a>1. å¼€å§‹ï¼šè·¯ç”±åˆ‡æ¢-transitionTo</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transitionTo</span> (<span class="params">location, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¾—åˆ°åŒ¹é…çš„è·¯ç”±ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> route = <span class="keyword">this</span>.router.match(location, <span class="keyword">this</span>.current)</span><br><span class="line">    <span class="comment">// å®Œæˆè·¯å¾„çš„åˆ‡æ¢</span></span><br><span class="line">    <span class="keyword">this</span>.confirmTransition(route, () =&gt; &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;, error =&gt; &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  çœŸæ­£è·¯ç”±åˆ‡æ¢confirmTransition</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">confirmTransirionTo</span> (<span class="params">route, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å½“å‰è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯formæ—§è·¯å¾„</span></span><br><span class="line">    <span class="keyword">const</span> current = <span class="keyword">this</span>.current</span><br><span class="line">    <span class="comment">// å–æ¶ˆæˆ–è€…å¤±è´¥çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">const</span> abort = <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        onAbort &amp;&amp; onAbort(error)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¯¹äºå½“å‰è·¯å¾„formå’Œè¦è·³è½¬çš„è·¯å¾„to</span></span><br><span class="line">    <span class="keyword">if</span> (isSameRoute(route, current) &amp;&amp; route.matched.length === current.matched.length) &#123;</span><br><span class="line">        <span class="keyword">this</span>.ensureURL() <span class="comment">// ä¸URLå˜åŒ–ç›¸å…³çš„</span></span><br><span class="line">        <span class="keyword">return</span> abort()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å¯¼èˆªå®ˆå«è§¦å‘"><a href="#2-å¯¼èˆªå®ˆå«è§¦å‘" class="headerlink" title="2. å¯¼èˆªå®ˆå«è§¦å‘"></a>2. å¯¼èˆªå®ˆå«è§¦å‘</h3><p>  åœ¨confirmTransitionæ–¹æ³•ä¸­ï¼Œåˆ¤æ–­fromå’Œtoä¸æ˜¯ç›¸åŒè·¯å¾„åï¼Œä¼šå¼€å§‹è§¦å‘å¯¼èˆªå®ˆå«</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">confirmTransition</span> (<span class="params">route, onComplete, onAbort</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ... å‰æœŸå¤„ç†,currentå°±æ˜¯formæ—§è·¯å¾„</span></span><br><span class="line">    <span class="keyword">const</span> current = <span class="keyword">this</span>.current</span><br><span class="line">    <span class="keyword">const</span> abort = <span class="function"><span class="params">error</span> =&gt;</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// è·å–å¾—åˆ°çš„updatedæ˜¯ä¸¤ä¸ªå…±åŒæ‹¥æœ‰çš„ï¼Œdeactivedè¡¨ç¤ºformæ‰€æ‹¥æœ‰çš„ï¼Œactiveçš„è¡¨ç¤ºtoæ‰€æ‹¥æœ‰çš„</span></span><br><span class="line">    <span class="keyword">const</span> &#123;updated, deactivated, activated&#125; = resolveQueue(<span class="keyword">this</span>.current.matched, route.matched)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">const</span> queue = [].concat(</span><br><span class="line">      <span class="comment">// ç»„ä»¶å†…çš„beforeRouteLeave</span></span><br><span class="line">      extractLeaveGuards(deactivated),</span><br><span class="line">      <span class="comment">// å…¨å±€é…ç½®çš„router.beforeEach</span></span><br><span class="line">      <span class="keyword">this</span>.router.beforeHooks,</span><br><span class="line">      <span class="comment">// ç»„ä»¶å†…çš„beforeRouteUpdate</span></span><br><span class="line">      extractUpdateGuards(updated),</span><br><span class="line">      <span class="comment">// è·¯ç”±ä¿¡æ¯é…ç½®routesä¸­çš„beforeEnter</span></span><br><span class="line">      activated.map(<span class="function"><span class="params">m</span> =&gt;</span> m.beforeEnter)</span><br><span class="line">      <span class="comment">// asyncç»„ä»¶ï¼Œå¼‚æ­¥ç»„ä»¶</span></span><br><span class="line">      resolveAsyncComponents(activated)</span><br><span class="line">    )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">this</span>.pending = route</span><br><span class="line">    <span class="keyword">const</span> iterator = <span class="function">(<span class="params">hook, next</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.pending !== route) &#123;</span><br><span class="line">            <span class="keyword">return</span> abort()</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            hook(route, current, (to) =&gt; &#123;</span><br><span class="line">                <span class="comment">// å‰é¢åˆ¤æ–­è¿›è¡Œå®¹é”™</span></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">typeof</span> to === <span class="string">'string'</span> ||</span><br><span class="line">                (<span class="keyword">typeof</span> to === <span class="string">'object'</span> &amp;&amp; (<span class="keyword">typeof</span> to.path === <span class="string">'string'</span>) || <span class="keyword">typeof</span> to.name === <span class="string">'string'</span>)) &#123;</span><br><span class="line">                    abort()</span><br><span class="line">                    <span class="keyword">if</span> (route.replace) &#123;</span><br><span class="line">                        <span class="keyword">this</span>.replace(to)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">this</span>.push(to)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    next(to)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125; <span class="keyword">catch</span>(error) &#123;</span><br><span class="line">            abort(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">    runQueue(queue, iterator, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> postEnterCbs = []</span><br><span class="line">        <span class="keyword">const</span> isValid = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">this</span>.current === route</span><br><span class="line">        <span class="comment">// ç»„ä»¶beforeRouteEnter</span></span><br><span class="line">        <span class="keyword">const</span> enterGuards = extractEnterGuards(activated, postEnterCbs, isValid)</span><br><span class="line">        <span class="comment">// å…¨å±€router.beforeResolve</span></span><br><span class="line">        <span class="keyword">const</span> queue = enterGuards.concat(<span class="keyword">this</span>.router.resolveHooks)</span><br><span class="line">        runQueue(queue, iterator, () =&gt; &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.pending !== route) &#123;</span><br><span class="line">            <span class="keyword">return</span> abort()</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">this</span>.pending = <span class="literal">null</span></span><br><span class="line">          onComplete(route)</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.router.app) &#123;</span><br><span class="line">            <span class="keyword">this</span>.router.app.$nextTick(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              postEnterCbs.forEach(<span class="function"><span class="params">cb</span> =&gt;</span> &#123;</span><br><span class="line">                cb()</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æ ¹æ®ä¸Šé¢çš„ä»£ç é€»è¾‘ï¼Œå¯ä»¥å¾—åˆ°æœ‰å…³è·¯ç”±çš„å®ˆå«å‡½æ•°ç­‰çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼šç»„ä»¶beforeRouteLeave =&gt; å…¨å±€router.beforeEach =&gt; ç»„ä»¶beforeRouteUpdate =&gt; è·¯ç”±é…ç½®routesçš„beforeEnter =&gt; ç»„ä»¶beforeRouteEnter =&gt; å…¨å±€router.beforeResolve =&gt; </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;VueRouter&quot;&gt;&lt;a href=&quot;#VueRouter&quot; class=&quot;headerlink&quot; title=&quot;VueRouter&quot;&gt;&lt;/a&gt;VueRouter&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;åœ¨Vueç»„ä»¶ä¸­æ³¨å†ŒVueRouter&lt;/p&gt;
 &lt;figure c
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>CSSåŠ¨ç”»æ€§èƒ½ä¼˜åŒ–</title>
    <link href="http://yoursite.com/2019/06/11/CSS%E5%8A%A8%E7%94%BB%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <id>http://yoursite.com/2019/06/11/CSSåŠ¨ç”»æ€§èƒ½ä¼˜åŒ–/</id>
    <published>2019-06-11T02:04:17.000Z</published>
    <updated>2019-08-01T08:48:30.561Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯ä¸ªé¡¹ç›®ä¸­æˆ–å¤šæˆ–å°‘åœ°ä¼šä½¿ç”¨åˆ°åŠ¨ç”»ï¼Œä½¿å¾—ç”¨æˆ·ä½“éªŒæ•ˆæœæ›´å¥½ã€‚é€šå¸¸ç®€å•çš„åŠ¨ç”»å¯¹æ€§èƒ½å½±å“å¾ˆå°ï¼Œä½†æ˜¯æ¶‰åŠåˆ°ç¨å¾®å¤æ‚çš„åŠ¨ç”»æˆ–è€…åœ¨é…ç½®æ¯”è¾ƒä½çš„æœºå™¨ä¸Šæ—¶ï¼Œä¸€äº›ä¸å½“çš„å¤„ç†æ–¹å¼ä¼šä½¿æ€§èƒ½é—®é¢˜å˜å¾—ååˆ†çªå‡ºâ€¦â€¦<br><a id="more"></a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å·²ç»å®Œç»“çš„ä¸€ä¸ªé¡¹ç›®ï¼Œæœ€è¿‘éœ€è¦é€‚é…å…¶ä»–çš„æœºå™¨ï¼Œå‡ºç°äº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼šä»¥å‰å¾ˆæµç•…çš„åŠ¨ç”»çªç„¶ggäº†ã€‚å› ä¸ºç°åœ¨é€‚é…çš„æœºå™¨é…ç½®æ¯”è¾ƒä½ï¼Œæ‰€ä»¥å‡ºç°äº†åŠ¨ç”»å¡é¡¿ç°è±¡ï¼šæ¸è¿›åŠ¨ç”»å˜å¾—å¾ˆé¬¼ç•œï¼Œæ²¡æœ‰æ¸è¿›æ•ˆæœï¼Œç›´æ¥å°±æ˜¯ä¸€ä¸ªå¼€å§‹çŠ¶æ€ï¼Œä¸€æ®µæ—¶é—´åç›´æ¥å˜æˆç»“æŸçŠ¶æ€ï¼Œè®©äººæ„Ÿå—ä¸åˆ°ä¸­é—´æ—¶é—´æ®µçš„æ¸è¿›æ•ˆæœã€‚ä»¥å‰å†™åŠ¨ç”»æ•ˆæœï¼Œåªè€ƒè™‘åˆ°å¦‚ä½•æ‰èƒ½è®©è¿™ä¸ªåŠ¨ç”»çœ‹èµ·æ¥æ›´è´´åˆ‡ç”¨æˆ·çš„ä½“éªŒï¼Œå¹¶æ²¡æœ‰è€ƒè™‘åˆ°åŠ¨ç”»æ€§èƒ½ä»¥åŠä¼˜åŒ–åŠ¨ç”»ã€‚<br><br></p><h2 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°å¡é¡¿"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°å¡é¡¿" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°å¡é¡¿"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°å¡é¡¿</h2><h3 id="1-æµè§ˆå™¨å¤šè¿›ç¨‹"><a href="#1-æµè§ˆå™¨å¤šè¿›ç¨‹" class="headerlink" title="1. æµè§ˆå™¨å¤šè¿›ç¨‹"></a>1. æµè§ˆå™¨å¤šè¿›ç¨‹</h3><p><strong>å‰æçŸ¥è¯†</strong>ï¼šæµè§ˆå™¨å¤šçº¿ç¨‹ï¼Œjså•çº¿ç¨‹ã€‚æµè§ˆå™¨æ‰§è¡Œjsæ˜¯å•çº¿ç¨‹æ‰§è¡Œï¼Œæ„æ€æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸ä»£è¡¨æµè§ˆå™¨åªæœ‰ä¸€ä¸ªçº¿ç¨‹ã€‚ </p><p>ç°ä»£æµè§ˆå™¨ä¸­é€šå¸¸ä¼šæœ‰ä¸¤ä¸ªé‡è¦çš„æ‰§è¡Œçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ååŒå·¥ä½œæ¥æ¸²æŸ“ä¸€ä¸ªé¡µé¢ â€”â€” ä¸»çº¿ç¨‹ï¼Œåˆæˆçº¿ç¨‹ã€‚</p><ul><li>ä¸»çº¿ç¨‹ï¼šè¿è¡ŒJavascriptï¼Œè®¡ç®—HTMLå…ƒç´ çš„CSSæ ·å¼ï¼Œé¡µé¢çš„å¸ƒå±€ï¼Œå°†å…ƒç´ ç»˜åˆ¶åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªä½å›¾ä¸­ï¼Œå°†è¿™äº›ä½å›¾äº¤ç»™åˆæˆçº¿ç¨‹ï¼›</li><li>åˆæˆçº¿ç¨‹ï¼šé€šè¿‡GPUå°†ä½å›¾ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°é¡µé¢ä¸­å¯è§æˆ–å³å°†å˜æˆå¯è§çš„éƒ¨åˆ†ä½å›¾ï¼Œè®¡ç®—å‡ºé¡µé¢ä¸­å“ªäº›éƒ¨åˆ†æ˜¯å¯è§çš„ï¼Œè®¡ç®—å½“ä½ åœ¨æ»šåŠ¨é¡µé¢æ—¶å“ªéƒ¨åˆ†æ˜¯å³å°†å¯è§çš„ï¼Œå½“ä½ æ»šåŠ¨é¡µé¢æ—¶å°†ç›¸åº”ä½ç½®çš„å…ƒç´ ç§»åŠ¨åˆ°å¯è§†åŒºåŸŸï¼›</li></ul><h3 id="2-å¡é¡¿åŸå› -2"><a href="#2-å¡é¡¿åŸå› -2" class="headerlink" title="2. å¡é¡¿åŸå› (2)"></a>2. å¡é¡¿åŸå› <sup>(2)</sup></h3><p>å¦‚æœé•¿æ—¶é—´æ‰§è¡ŒJavaScriptæˆ–è€…æ¸²æŸ“ä¸€ä¸ªå¾ˆå¤§çš„å…ƒç´ ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œåœ¨è¿™æœŸé—´ï¼Œæ˜¯æ— æ³•å“åº”ç”¨æˆ·çš„äº¤äº’ã€‚è€Œåˆæˆçº¿ç¨‹åˆ™æ˜¯ä¼šå°½é‡å»å“åº”ç”¨æˆ·çš„äº¤äº’ï¼Œå½“ä¸€ä¸ªé¡µé¢å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåˆæˆçº¿ç¨‹ä¼šä»¥æ¯ç§’60å¸§çš„é—´éš”å»ä¸æ–­é‡ç»˜è¿™ä¸ªé¡µé¢ï¼Œå³ä½¿è¿™ä¸ªé¡µé¢ä¸å®Œæ•´ã€‚è€ŒåŠ¨ç”»çš„å¡é¡¿å°±æ˜¯å› ä¸ºä¸»çº¿ç¨‹å’Œåˆæˆçº¿ç¨‹çš„è°ƒåº¦ä¸åˆç†ã€‚</p><p>åˆæˆçº¿ç¨‹ä¼šä½¿ç”¨GPUå°†ä½å›¾ç»˜åˆ¶åˆ°å±å¹•ä¸Šï¼Œè€Œä¸”GPUç›¸å¯¹äºCPUè€Œè¨€ï¼Œæ›´æ“…é•¿åšç±»ä¼¼ç»˜å›¾è¿™ç§é‡å¤ä½†æ˜¯è®¡ç®—é‡ä¸é«˜çš„äº‹ï¼›CPUçš„è¯ï¼Œæ›´é€‚åˆåšå¤§é‡çš„æ•°æ®è®¡ç®—ã€‚ã€GPUçš„å­˜å‚¨æ¯”CPUå­˜å‚¨è¦å°çš„å¾ˆå¤šã€‘<br>GPUåœ¨é¡µé¢æ¸²æŸ“ä¸­ï¼Œå¿«åœ¨äºï¼šç»˜åˆ¶ä½å›¾åˆ°å±å¹•ä¸Šï¼Œä¸€éåˆä¸€éåœ°ç»˜åˆ¶ç›¸åŒçš„ä½å›¾ï¼Œå°†åŒä¸€ä½å›¾ç»˜åˆ¶åˆ°ä¸åŒä½ç½®ï¼Œæ‰§è¡Œæ¸²æŸ“ä»¥åŠç¼©æ”¾å¤„ç†ï¼›æ…¢åœ¨äºï¼šéœ€è¦å°†ä»CPUæ¥å—åˆ°çš„ä½å›¾åŠ è½½åˆ°å®ƒçš„å†…å­˜ä¸­ã€‚</p><p>ğŸŠğŸŒ°</p><blockquote><p><em>å°†ä¸€ä¸ªå…ƒç´ çš„heightä»100pxæ”¹æˆ200pxï¼Œä½¿ç”¨transition: height 0.5s; æ¥å®ç°è¿‡æ¸¡æ•ˆæœ</em><br>å¯¹äºä½¿ç”¨transitionæ¥å®ç°çš„åŠ¨ç”»æ•ˆæœï¼Œå¹¶ä¸ä¼šè§¦å‘ç¡¬ä»¶åŠ é€Ÿï¼ˆä¹Ÿå°±æ˜¯GPUï¼‰ï¼Œå› æ­¤ï¼Œä¼šæŒ‰ç…§æ­£å¸¸çš„è¿›è¡Œã€‚å‡ºç°çš„æµç¨‹å°±æ˜¯ï¼šä¸»çº¿ç¨‹-layoutå…ƒç´  =&gt; ä¸»çº¿ç¨‹-paintå…ƒç´  =&gt; åˆæˆçº¿ç¨‹-æ›´æ–°ä½å›¾åˆ°GPUçš„å­˜å‚¨ =&gt; åˆæˆçº¿ç¨‹-GPUç»˜åˆ¶ä½å›¾åˆ°å±å¹• =&gt; ä¸»çº¿ç¨‹-å¼€å§‹æ‰§è¡ŒCSSè®¾ç½®çš„transition =&gt;<br>ä¸»çº¿ç¨‹-è®¾ç½®heightä¸º101px =&gt; ä¸»çº¿ç¨‹-relayoutå…ƒç´  =&gt; ä¸»çº¿ç¨‹-repaintå…ƒç´  =&gt; åˆæˆçº¿ç¨‹-æ›´æ–°ä½å›¾åˆ°GPUçš„å­˜å‚¨ =&gt; åˆæˆçº¿ç¨‹-GPUç»˜åˆ¶ä½å›¾åˆ°å±å¹• =&gt;<br>ä¸»çº¿ç¨‹-è®¾ç½®heightä¸º102px =&gt; ä¸»çº¿ç¨‹-relayoutå…ƒç´  =&gt; ä¸»çº¿ç¨‹-repaintå…ƒç´  =&gt; åˆæˆçº¿ç¨‹-æ›´æ–°ä½å›¾åˆ°GPUçš„å­˜å‚¨ =&gt; åˆæˆçº¿ç¨‹-GPUç»˜åˆ¶ä½å›¾åˆ°å±å¹• =&gt;<br>â€¦ =&gt;<br>â€¦ =&gt;<br>â€¦ =&gt;</p></blockquote><p>ä¸Šé¢çš„ğŸŒ°ï¼šæ„å‘³ç€æµè§ˆå™¨è¦åšå¤§é‡çš„å·¥ä½œï¼Œæ„å‘³ç€è¿™ä¸ªåŠ¨ç”»å¯èƒ½ä¼šå˜å¾—å¡é¡¿ã€‚åœ¨åŠ¨ç”»çš„æ¯ä¸€å¸§ä¸­ï¼Œæµè§ˆå™¨éƒ½éœ€è¦æ‰§è¡Œå¸ƒå±€ã€ç»˜åˆ¶ã€ä»¥åŠå°†æœ€æ–°çš„ä½å›¾ä¼ é€’ç»™GPUã€‚ä¸Šé¢æåˆ°è¿‡ï¼Œå°†ä½å›¾åŠ è½½åˆ°GPUå†…å­˜ä¸­æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒæ…¢çš„æ“ä½œï¼Œè€Œä¸”æ”¹å˜äº†ä¸€ä¸ªå…ƒç´ çš„é«˜åº¦å¯èƒ½ä¼šå¯¼è‡´éœ€è¦åŒæ­¥æ”¹å˜å®ƒçš„å­å…ƒç´ ã€ç›¸é‚»å…ƒç´ ã€çˆ¶å…ƒç´ ç­‰ç›¸å…³å…ƒç´ çš„å¤§å°ï¼Œåˆ™ä¼šè§¦å‘æµè§ˆå™¨é‡æ–°å¸ƒå±€ï¼Œå¸ƒå±€åˆæ˜¯ä¸€ä»¶ç›¸å¯¹æ¯”è¾ƒæ…¢çš„æ“ä½œã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•èƒ½å¤Ÿå‡å°‘ä½å›¾åŠ è½½åˆ°GPUå†…å­˜çš„è¿™ä¸€æ“ä½œæˆ–è€…ä¸è§¦å‘é‡æ–°å¸ƒå±€å‘¢ï¼Ÿ </p><!--CPUä¼ è¾“åˆ°GPUä¸€ä¸ªä½å›¾ï¼ŒGPUèƒ½å¿«é€Ÿå¯¹å…¶è¿›è¡Œåç§»ã€ç¼©æ”¾ã€æ—‹è½¬ã€ä¿®æ”¹é€æ˜åº¦ç­‰æ“ä½œå¼€å¯ç¡¬ä»¶åŠ é€Ÿï¼Œè®©åŠ¨ç”»å…ƒç´ ç‹¬ç«‹åˆ›å»ºä¸€ä¸ªå±‚ã€‚GPUç¡¬ä»¶åŠ é€Ÿä¼˜ç¼ºç‚¹ï¼šä¸è¦æ»¥ç”¨GPUèµ„æºï¼Œå› ä¸ºGPUä¼šç”Ÿæˆä¸å¿…è¦çš„Layerï¼Œç•™æ„æ„å¤–ç”Ÿäº§çš„Layerã€‚å°¤å…¶åœ¨ç»™Aå…ƒç´ ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿï¼Œä¼šä½¿å¾—Aå…ƒç´ ä¹‹ä¸Šçš„å…ƒç´ [z-indexæ¯”Aé«˜ï¼Œä»¥åŠAå…ƒç´ çš„å­å…ƒç´ ]éšå½¢åœ°ç”Ÿæˆå¤åˆå±‚ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œä¼šå¼•èµ·é‡æ’é‡ç»˜ï¼Œå°†éšå½¢å¤åˆå±‚çš„ç›¸å…³ä¿¡æ¯ä¼ è¾“åˆ°GPUï¼ŒåŸæœ¬æ‰€åœ¨çš„å±‚ä¼šåˆ é™¤ã€‚ã€æªè¾å¾…ä¼˜åŒ–ã€‘ç¡¬ä»¶åŠ é€Ÿæ„å‘³ç€Graphics Processing Unitï¼ˆGPUï¼‰ä¼šé€šè¿‡ä»£æ›¿Central Processing Unit (CPU)åšä¸€äº›è´Ÿè·æ¯”è¾ƒå¤§çš„äº‹æƒ…ï¼Œæ¥ååŠ©æµè§ˆå™¨å¿«é€Ÿæ¸²æŸ“é¡µé¢ï¼Œå½“CSSæ“ä½œä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„æ—¶å€™ï¼Œé€šå¸¸ä¼šä½¿é¡µé¢æ¸²æŸ“é€Ÿåº¦åŠ å¿«é¡¾åæ€ä¹‰ï¼ŒCPUå’ŒGPUéƒ½æ˜¯è®¡ç®—æœºå¤„ç†å•å…ƒã€‚CPUåœ¨ç”µè„‘ä¸»æ¿ï¼Œå‡ ä¹å¤„ç†ç”µè„‘çš„ä¸€åˆ‡æ“ä½œï¼Œæœ‰ç”µè„‘å¤§è„‘ä¹‹ç§°ï¼›GPUåœ¨æ˜¾å¡ä¸Šï¼Œè´Ÿè´£å¤„ç†å’Œæ¸²æŸ“å›¾å½¢ã€‚æ­¤å¤–GPUé€šè¿‡ç‰¹æ®Šçš„è®¾è®¡ï¼Œä½¿å…¶æ“…é•¿äºæ¸²æŸ“å›¾å½¢æ‰€éœ€çš„æ•°å­¦å’Œå‡ ä½•è¿ç®—ã€‚å› æ­¤æŠŠæ“ä½œè½¬å«åˆ°GPUå¯ä»¥è·å¾—æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å‡å°‘ç§»åŠ¨è®¾å¤‡CPUçš„äº‰ç”¨ã€‚ç¡¬ä»¶åŠ é€Ÿï¼ˆæˆ–è€…è¯´GPUåŠ é€Ÿï¼‰ä¾èµ–äºæµè§ˆå™¨æ¸²æŸ“é¡µé¢ä½¿ç”¨çš„layering modelï¼Œå½“ç‰¹å®šçš„æ“ä½œï¼ˆCSS 3Då˜å½¢ï¼‰ä½œç”¨äºé¡µé¢ä¸Šçš„ä¸€ä¸ªå…ƒç´ ï¼Œå…ƒç´ ç§»åŠ¨åˆ°å®ƒè‡ªå·±çš„layerï¼Œåœ¨è¿™ä¸ªlayerä¸­å…ƒç´ åˆä¸€ä¸å—é¡µé¢å…¶ä»–å…ƒç´ çš„å¹²æ‰°ç‹¬ç«‹æ¸²æŸ“ï¼Œç„¶åå¤åˆåˆ°é¡µé¢ä¸­å»ã€‚åœ¨è¿™ç§éš”ç¦»å†…å®¹æ¸²æŸ“çš„å·¥ä½œæ–¹å¼ä¸‹ï¼Œå¦‚æœé¡µé¢çš„å˜åŒ–ä»…ä»…æ˜¯è¯¥å…ƒç´ çš„å˜å½¢ï¼Œå…¶ä½™éƒ¨åˆ†ä¸å¿…è¢«é‡æ–°æ¸²æŸ“ï¼Œè¿™ä¼šå¸¦æ¥æ˜¾è‘—çš„é€Ÿåº¦ä¼˜åŠ¿ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åªæœ‰3Då˜å½¢ä¼šæœ‰è‡ªå·±çš„layerï¼Œ2Då˜å½¢ä¸ä¼šã€‚--><!--jsè¿ä½œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ˜¯å•çº¿ç¨‹çš„ï¼Œjsä»£ç å§‹ç»ˆåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œæ­¤çº¿ç¨‹è¢«ç§°ä½œjså¼•æ“çº¿ç¨‹ã€‚ä»¥ä¸‹æ˜¯æµè§ˆå™¨å¸¸è§çš„å‡ ç§çº¿ç¨‹ï¼š   JSå¼•æ“çº¿ç¨‹ï¼šä¹Ÿç§°ä¸ºJSå†…æ ¸ï¼Œè´Ÿè´£å¤„ç†Javascriptè„šæœ¬ç¨‹åºã€‚   GUIæ¸²æŸ“çº¿ç¨‹ï¼šè´Ÿè´£æ¸²æŸ“æµè§ˆå™¨ç•Œé¢ï¼Œè§£æHTMLï¼ŒCSSï¼Œæ„å»ºDOMæ ‘å’ŒRenderObjectæ ‘ï¼Œå¸ƒå±€å’Œç»˜åˆ¶ç­‰ã€‚å½“ç•Œé¢éœ€è¦é‡ç»˜æˆ–è€…ç”±äºæŸç§æ“ä½œå¼•å‘å›æµï¼ˆreflowï¼‰ æ—¶ï¼Œè¯¥çº¿ç¨‹å°±ä¼šæ‰§è¡Œã€‚è¿˜æœ‰äº‹ä»¶è§¦å‘çº¿ç¨‹ï¼Œå®šæ—¶è§¦å‘å™¨çº¿ç¨‹ï¼Œå¼‚æ­¥httpè¯·æ±‚çº¿ç¨‹  [^ ä¼ é€é—¨ ^](https://www.cnblogs.com/cangqinglang/p/8963557.html)    > æ³¨æ„ï¼šGUIæ¸²æŸ“çº¿ç¨‹å’ŒJSå¼•æ“çº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œä¸å¯ä»¥åŒæ—¶è¿è¡Œã€‚   > &emsp;&emsp;&emsp;å‡è®¾åœ¨ä½¿ç”¨Javascriptæ“ä½œDOMçš„åŒæ—¶æ¸²æŸ“ç•Œé¢ï¼ˆå³JSå¼•æ“çº¿ç¨‹å’ŒGUIæ¸²æŸ“çº¿ç¨‹åŒæ—¶è¿è¡Œï¼‰ï¼Œé‚£ä¹ˆæ¸²æŸ“çº¿ç¨‹å‰åè·å¾—çš„å…ƒç´ æ•°æ®å°±æœ‰å¯èƒ½ä¸ä¸€æ ·ã€‚ä¸ºäº†é˜²æ­¢æ¸²æŸ“å‡ºç°ä¸å¯é¢„æœŸçš„ç»“æœï¼Œæµè§ˆå™¨å°±è®¾ç½®JSå¼•æ“çº¿ç¨‹å’ŒGUIæ¸²æŸ“çº¿ç¨‹ä¸ºäº’æ–¥å…³ç³»ï¼Œå½“JSå¼•æ“çº¿ç¨‹æ‰§è¡Œæ—¶GUIæ¸²æŸ“çº¿ç¨‹å°±ä¼šè¢«æŒ‚èµ·ï¼ŒUIé¡µé¢æ›´æ–°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç­‰åˆ°JSå¼•æ“çº¿ç¨‹ç©ºé—²æ—¶ç«‹å³æ‰§è¡Œã€‚è¿›ç¨‹å’Œçº¿ç¨‹æ—¶ä¸ä¸€æ ·çš„ï¼Œå…·ä½“åŒºåˆ«å¤§å®¶å¯ä»¥è‡ªå·±å»äº†è§£ï¼Œåœ¨è¿™å°±ä¸è¯¦ç»†å™è¿°äº†ã€‚   æµè§ˆå™¨æ˜¯å¤šè¿›ç¨‹çš„ï¼Œä¸»è¦çš„è¿›ç¨‹æœ‰å¦‚ä¸‹ï¼š`Browserè¿›ç¨‹`ï¼šæµè§ˆå™¨çš„ä¸»è¿›ç¨‹ï¼ˆè´Ÿè´£åè°ƒã€ä¸»æ§ï¼‰ï¼Œåªæœ‰ä¸€ä¸ªã€‚  `ç¬¬ä¸‰æ–¹æ’ä»¶è¿›ç¨‹`ï¼šæ¯ç§ç±»å‹çš„æ’ä»¶å¯¹åº”ä¸€ä¸ªè¿›ç¨‹ï¼Œç»˜åˆ¶åˆ°ç”¨æˆ·ç•Œé¢ä¸Šã€‚   `GPUè¿›ç¨‹`ï¼šæœ€å¤šä¸€ä¸ªï¼Œç”¨äº3Dç»˜åˆ¶ç­‰ã€‚   `æµè§ˆå™¨æ¸²æŸ“è¿›ç¨‹`ï¼ˆæµè§ˆå™¨å†…æ ¸ï¼ŒRendererè¿›ç¨‹ï¼Œå†…éƒ¨æ˜¯å¤šçº¿ç¨‹çš„ï¼‰--><p><br></p><h2 id="ç½‘é¡µçš„åˆ†å±‚æœºåˆ¶"><a href="#ç½‘é¡µçš„åˆ†å±‚æœºåˆ¶" class="headerlink" title="ç½‘é¡µçš„åˆ†å±‚æœºåˆ¶"></a>ç½‘é¡µçš„åˆ†å±‚æœºåˆ¶</h2><p>å¦‚æœæƒ³è¦ä½¿ç”¨GPUç¡¬ä»¶åŠ é€Ÿæ¥è§£å†³CSSåŠ¨ç”»å¡é¡¿é—®é¢˜ï¼Œé‚£ä¹ˆå°±éœ€è¦äº†è§£ä¸€ä¸‹ç½‘é¡µçš„åˆ†å±‚æœºåˆ¶ã€‚<br>ç½‘é¡µä¸­çš„å…ƒç´ åˆ†å¸ƒåœ¨ä¸åŒçš„å±‚æ¬¡ä¸­ï¼Œå¹¶ä¸”CSSçš„ä¸€äº›ä»£ç ä¼šå¯¹ç½‘é¡µçš„åˆ†å±‚ç­–ç•¥äº§ç”Ÿå½±å“ï¼Œå¯¹äºä¸€äº›éœ€è¦å¤æ‚å˜æ¢å’Œå¤„ç†çš„å…ƒç´ ï¼Œå®ƒä»¬éœ€è¦æ–°å±‚ã€‚   </p><p><strong>ä¸ºä»€ä¹ˆä¼šç½‘é¡µè¦åˆ†å±‚?</strong>  </p><ul><li>æ–¹ä¾¿ç½‘é¡µå¼€å‘è€…å¼€å‘ç½‘é¡µå¹¶è®¾ç½®ç½‘é¡µçš„å±‚æ¬¡ï¼›</li><li>ä¸ºäº†webkitå¤„ç†ä¸Šçš„ä¾¿åˆ©ï¼Œä¹Ÿå°±æ˜¯ä¸ºäº†ç®€åŒ–æ¸²æŸ“çš„é€»è¾‘</li></ul><h3 id="1-Chromeçš„ç½‘é¡µæ¸²æŸ“æ–¹å¼"><a href="#1-Chromeçš„ç½‘é¡µæ¸²æŸ“æ–¹å¼" class="headerlink" title="1. Chromeçš„ç½‘é¡µæ¸²æŸ“æ–¹å¼"></a>1. Chromeçš„ç½‘é¡µæ¸²æŸ“æ–¹å¼</h3><p>&emsp;&emsp;åœ¨å®Œæˆæ„å»ºDOMåï¼Œwebkitå°±ä¼šæ„å»ºæ¸²æŸ“çš„å†…éƒ¨è¡¨ç¤ºå¹¶ä½¿ç”¨å›¾å½¢åº“å°†è¿™äº›æ¨¡å‹ç»˜åˆ¶å‡ºæ¥ã€‚ç½‘é¡µçš„æ¸²æŸ“æ–¹å¼ï¼Œç›®å‰ä¸»è¦ä¸¤ç§æ–¹å¼ï¼šè½¯ä»¶æ¸²æŸ“ï¼ˆç»˜å›¾æ“ä½œä½¿ç”¨CPUï¼Œä¹Ÿå°±æ˜¯è½¯ä»¶ç»˜å›¾ï¼‰ï¼›ç¡¬ä»¶åŠ é€Ÿæ¸²æŸ“ï¼ˆç»˜å›¾æ“ä½œä½¿ç”¨GPUï¼Œä¹Ÿå°±æ˜¯GPUç¡¬ä»¶åŠ é€Ÿç»˜å›¾ï¼‰<sup>(1)</sup> ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§æ··åˆæ¨¡å¼ï¼šå¤šä¸ªå±‚çš„æ¸²æŸ“ç»“æœåˆå¹¶åˆ°ä¸€ä¸ªå›¾åƒä¸­ï¼Œç§°ä¹‹ä¸ºåˆæˆæ¸²æŸ“ã€‚DOMä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ç›´æ¥æˆ–è€…é—´æ¥åœ°å¯¹åº”ä¸€ä¸ªå±‚ï¼Œä¸€äº›å±‚æœ‰è‡ªå·±çš„æ”¯æ’‘å¹³é¢ï¼Œè¿™äº›å±‚è¢«ç§°ä¸ºå¤åˆå±‚ï¼Œå¯¹äºè¿™äº›å¤åˆå±‚è€Œè¨€ï¼Œcompositeræ˜¯åˆ©ç”¨GPUå°†å®ƒæœ€ç»ˆæ¸²æŸ“åˆ°å±å¹•ä¸Šçš„ã€‚  </p><h3 id="2-å¤åˆå±‚"><a href="#2-å¤åˆå±‚" class="headerlink" title="2. å¤åˆå±‚"></a>2. å¤åˆå±‚</h3><p><strong>å¤åˆå±‚å½¢æˆçš„æ¡ä»¶ï¼š</strong>    </p><ul><li>å«æœ‰CSS 3Då±æ€§æˆ–è€…CSSé€è§†æ•ˆæœ</li><li>ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿçš„è§†é¢‘è§£ç æŠ€æœ¯çš„HTML5çš„videoå…ƒç´ </li><li>ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿçš„Canvas 2Då…ƒç´ æˆ–è€…WebGLæŠ€æœ¯</li><li>CSSé€æ˜æ•ˆæœçš„åŠ¨ç”»æˆ–è€…CSSå˜åŒ–çš„åŠ¨ç”»</li><li>ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿçš„CSS FiltersæŠ€æœ¯</li><li>å…ƒç´ æœ‰ä¸€ä¸ªåŒ…å«å¤åˆå±‚çš„åä»£èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯ï¼Œä¸€ä¸ªå…ƒç´ æœ‰ä¸€ä¸ªå­å…ƒç´ ï¼Œå­å…ƒç´ æ˜¯åœ¨è‡ªå·±å±‚é‡Œçš„ï¼‰</li><li>å…ƒç´ æœ‰ä¸€ä¸ªz-indexè¾ƒä½ä¸”åŒ…å«ä¸€ä¸ªå¤åˆå±‚çš„å…„å¼Ÿå…ƒç´ ï¼ˆæ¢å¥è¯è¯´å°±æ˜¯è¯¥å…ƒç´ åœ¨å¤åˆå±‚ä¸Šé¢æ¸²æŸ“ï¼‰</li></ul><p>æœ€åä¸€æ¡ï¼ŒåŸæ–‡ï¼šElement has a sibling with a lower z-index which has a compositing layer (in other words the itâ€™s rendered on top of a composited layer)  </p><p>ç®€å•ç‚¹è¯´ï¼Œä¸»è¦å°±æ˜¯translate3dï¼ŒtranslateZï¼Œopacityå±æ€§/è¿‡æ¸¡åŠ¨ç”»ï¼ˆéœ€è¦åŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ä¸­æ‰ä¼šåˆ›å»ºåˆæˆå±‚ï¼ŒåŠ¨ç”»æ²¡æœ‰å¼€å§‹æˆ–è€…ç»“æŸåå…ƒç´ è¿˜ä¼šå›åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼‰ï¼Œwill-changeå±æ€§ã€‚ã€æ³¨æ„ï¼šabsoluteå¹¶ä¸ä¼šå¼•èµ·å¤åˆå±‚ç”Ÿæˆã€‘</p><p><strong>absoluteå’Œç¡¬ä»¶åŠ é€Ÿçš„åŒºåˆ«</strong><br>absoluteï¼šè„±è½æ–‡æ¡£æµï¼Œä½†æ˜¯æ— æ³•è„±ç¦»é»˜è®¤å¤åˆå±‚ï¼ˆä¹Ÿå°±æ˜¯å’Œdocumentåœ¨ä¸€å±‚çš„ï¼‰ã€‚absoluteæ–‡æ¡£ä¸­ä¿¡æ¯æ”¹å˜æ—¶ï¼Œä¹Ÿä¸ä¼šæ”¹å˜æ™®é€šæ–‡æ¡£æµä¸­renderæ ‘ã€‚ä½†æ˜¯æµè§ˆå™¨æœ€ç»ˆç»˜åˆ¶æ—¶ï¼Œæ˜¯æ•´ä¸ªå¤åˆå±‚ç»˜åˆ¶ï¼Œæ‰€ä»¥absoluteä¸­ä¿¡æ¯çš„æ”¹å˜ï¼Œä»ç„¶ä¼šå½±å“æ•´ä¸ªå¤åˆå±‚çš„ç»˜åˆ¶ï¼Œä¸€æ—¦å¤åˆå±‚ä¸­å†…å®¹è¿‡é”™ï¼Œabsoluteå¸¦æ¥çš„ç»˜åˆ¶ä¿¡æ¯å˜åŒ–è¿‡å¤§ï¼Œèµ„æºæ¶ˆè€—å°±ä¼šå˜å¾—éå¸¸ä¸¥é‡ã€‚<br>ç¡¬ä»¶åŠ é€Ÿï¼šä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„ä¼šåœ¨å¦å¤–ä¸€ä¸ªå¤åˆå±‚ä¸­ï¼Œä¼šè‡ªå·±æ‹¥æœ‰ä¸€ä¸ªè‡ªå·±çš„å¤åˆå±‚ï¼ˆä¸æ˜¯æ‰€æœ‰çš„ç¡¬ä»¶åŠ é€Ÿåœ¨ä¸€ä¸ªå¤åˆå±‚ä¸­ï¼‰ï¼Œæ‰€ä»¥å®ƒçš„ä¿¡æ¯æ”¹å˜ä¸ä¼šå½±å“é»˜è®¤å¤åˆå±‚ï¼Œåªä¼šå½±å“å±äºè‡ªå·±çš„å¤åˆå±‚ï¼Œåªå¼•å‘æœ€åçš„åˆæˆã€‚</p><h3 id="3-GPUç»˜å›¾ä¸é‡æ’"><a href="#3-GPUç»˜å›¾ä¸é‡æ’" class="headerlink" title="3. GPUç»˜å›¾ä¸é‡æ’"></a>3. GPUç»˜å›¾ä¸é‡æ’</h3><p>&emsp;&emsp;GPUç»˜å›¾ï¼Œé€šå¸¸ä¸åƒè½¯ä»¶æ¸²æŸ“é‚£æ ·åªæ˜¯è®¡ç®—å…¶ä¸­æ›´æ–°çš„åŒºåŸŸï¼Œä¸€æ—¦æœ‰æ›´æ–°è¯·æ±‚ï¼Œå¦‚æœæ²¡æœ‰åˆ†å±‚ï¼Œå¼•æ“å¯èƒ½éœ€è¦é‡æ–°ç»˜åˆ¶æ‰€æœ‰çš„åŒºåŸŸï¼Œå› ä¸ºè®¡ç®—æ›´æ–°éƒ¨åˆ†å¯¹GPUæ¥è¯´å¯èƒ½è€—è´¹æ›´å¤šçš„æ—¶é—´ã€æ¯•ç«ŸGPUçš„è®¾è®¡ä¸æ˜¯ä¸ºäº†è®¡ç®—ã€‘ã€‚å½“ç½‘é¡µåˆ†å±‚ä¹‹åï¼Œéƒ¨åˆ†åŒºåŸŸçš„æ›´æ–°å¯èƒ½åªåœ¨ç½‘é¡µçš„ä¸€å±‚æˆ–è€…å‡ å±‚ï¼Œè€Œä¸éœ€è¦å°†æ•´ä¸ªç½‘é¡µéƒ½é‡æ–°ç»˜åˆ¶ã€‚é€šè¿‡é‡æ–°ç»˜åˆ¶ç½‘é¡µçš„ä¸€ä¸ªæˆ–è€…å‡ ä¸ªå±‚ï¼Œå¹¶å°†å®ƒä»¬å’Œå…¶ä»–ä¹‹å‰ç»˜åˆ¶å®Œçš„å±‚[æ²¡æœ‰é‡æ–°ç»˜åˆ¶çš„å±‚]åˆæˆèµ·æ¥ï¼Œæ—¢èƒ½ä½¿ç”¨GPUçš„èƒ½åŠ›ï¼Œåˆèƒ½å¤Ÿå‡å°‘é‡ç»˜çš„å¼€é”€ã€‚å› æ­¤ï¼Œåœ¨åšåŠ¨ç”»æ—¶è®©GPUå‚ä¸è¿›æ¥ï¼Œä¼šæé«˜åŠ¨ç”»æ€§èƒ½ã€‚</p><p>&emsp;&emsp;é‡æ’ï¼Œä¸€èˆ¬éœ€è¦ä¸‰ä¸ªé˜¶æ®µï¼šè®¡ç®—å¸ƒå±€ï¼ˆrecalculate styleï¼‰ã€ç»˜å›¾ï¼ˆupdate layer treeï¼‰å’Œåˆæˆï¼ˆcomposite layerï¼‰ã€‚å¦‚æœæƒ³è¦å‡å°‘æ¯ä¸€å¸§çš„æ—¶é—´ï¼Œæé«˜æ€§èƒ½ï¼Œå°±ç€é‡å‡å°‘è¿™ä¸‰ä¸ªé˜¶æ®µçš„æ—¶é—´ã€‚å…¶ä¸­ï¼Œè®¡ç®—å¸ƒå±€å’Œç»˜å›¾æ¯”è¾ƒè´¹æ—¶é—´ï¼Œè€Œåˆæˆéœ€è¦çš„æ—¶é—´ç›¸å¯¹è¦å°‘ä¸€äº›ã€‚è€Œä¸”ï¼Œå½“å¸ƒå±€çš„å˜åŒ–è¶Šå¤šï¼Œwebkité€šå¸¸éœ€è¦è¶Šå¤šçš„ç»˜å›¾æ—¶é—´ã€‚å‡å°‘ç»˜åˆ¶æ¯å¸§çš„æ—¶é—´ï¼šä½¿ç”¨åˆé€‚çš„ç½‘é¡µåˆ†å±‚æŠ€æœ¯ä»¥å‡å°‘éœ€è¦é‡æ–°è®¡ç®—çš„å¸ƒå±€å’Œç»˜å›¾ï¼›ä½¿ç”¨CSS 3Då˜å½¢å’ŒåŠ¨ç”»æŠ€æœ¯ã€‚</p><p><br></p><h2 id="ç¡¬ä»¶åŠ é€Ÿ"><a href="#ç¡¬ä»¶åŠ é€Ÿ" class="headerlink" title="ç¡¬ä»¶åŠ é€Ÿ"></a>ç¡¬ä»¶åŠ é€Ÿ</h2><p>CSSçš„åŠ¨ç”»ã€å˜å½¢ã€æ¸å˜å¹¶ä¸ä¼šè‡ªåŠ¨çš„è§¦å‘GPUåŠ é€Ÿï¼Œè€Œæ˜¯ä½¿ç”¨æµè§ˆå™¨ç¨æ…¢çš„è½¯ä»¶æ¸²æŸ“å¼•æ“ã€‚ç„¶è€Œä¸€äº›æµè§ˆå™¨æä¾›äº†ä¸€äº›å¯ä»¥è§¦å‘ç¡¬ä»¶åŠ é€Ÿçš„å±æ€§æ¥è·å–æ›´é«˜çš„æ¸²æŸ“æ€§èƒ½ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œopacityå±æ€§æ˜¯å‡ ä¸ªèƒ½å¤ŸåŠ é€Ÿçš„å±æ€§ä¹‹ä¸€ï¼Œå› ä¸ºGPUå¯ä»¥æ–¹ä¾¿çš„å¤„ç†ã€‚åŸºæœ¬ä¸Šä»»ä½•å±‚çš„é€æ˜åº¦æ¸å˜æµè§ˆå™¨éƒ½ä¼šäº¤ç»™GPUå¤„ç†æ¥åŠ é€Ÿã€‚é™¤äº†opacityèƒ½å¤Ÿä½¿ç”¨GPUå¤„ç†çš„å°±æ˜¯CSS 3Då˜å½¢äº†ã€‚<br>è§¦å‘GPUç¡¬ä»¶åŠ é€Ÿçš„å±æ€§ï¼šopacityï¼Œtransformï¼Œfilterï¼Œwill-change</p><h3 id="1-translateZ-or-translate3d-Hack"><a href="#1-translateZ-or-translate3d-Hack" class="headerlink" title="1. translateZ() (or translate3d()) Hack"></a>1. translateZ() (or translate3d()) Hack</h3><p>å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æˆ‘ä»¬éƒ½é€šè¿‡translateZ()æˆ–è€…translate3d() hackæ¥éª—å–æµè§ˆå™¨è§¦å‘ç¡¬ä»¶åŠ é€Ÿï¼Œå…·ä½“åšæ³•å°±æ˜¯ä¸ºå…ƒç´ æ·»åŠ æ²¡æœ‰å˜åŒ–çš„3Då˜å½¢ï¼Œæ¯”å¦‚å…ƒç´ åœ¨2ç»´ç©ºé—´å¯ä»¥é€šè¿‡æ·»åŠ ä»¥ä¸‹CSSæ¥ç¡¬ä»¶åŠ é€Ÿ   </p><blockquote><p>transform: translate3d(0, 0, 0); </p></blockquote><p>æ‰€è°“ç¡¬ä»¶åŠ é€Ÿå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªè¢«ä¼ é€’åˆ°GPUå¤„ç†çš„å±‚çš„æ“ä½œï¼Œç„¶è€Œå¼ºåˆ¶ä½¿ç”¨hackæ–¹å¼åˆ›å»ºlayerå¹¶ä¸æ˜¯é•¿ä¹…ä¹‹è®¡ï¼Œåˆ›å»ºlayerçš„æŠ€æœ¯å¯ä»¥ä½¿é¡µé¢åŠ é€Ÿï¼Œä½†æ˜¯ä¹Ÿæœ‰ä»£ä»·ï¼šå®ƒä»¬å ç”¨RAMå’ŒGPUå­˜å‚¨ç©ºé—´ï¼ˆè€ƒè™‘åˆ°ç§»åŠ¨è®¾å¤‡çš„å­˜å‚¨å®¹é‡æœ‰é™ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»å°å¿ƒä½¿ç”¨ï¼Œç¡®ä¿è¿™ä¹ˆåšçœŸçš„å¯¹é¡µé¢æ¸²æŸ“æœ‰æ‰€å¸®åŠ©<br>ã€æ¡ˆä¾‹ï¼š<a href="http://periodic.famo.us/" target="_blank" rel="noopener">famo.usç½‘ç«™</a>ã€‘</p><blockquote><p><a href="https://jsperf.com/translate3d-vs-xy/28" target="_blank" rel="noopener">translate3dã€translateã€top/leftã€marginå¯¹æ¯”</a></p></blockquote><p>ä¸ºäº†é¿å…åˆ›å»ºlayerçš„hacksï¼Œä¸€ä¸ªå…è®¸æˆ‘ä»¬æå‰é€šçŸ¥æµè§ˆå™¨æˆ‘ä»¬å°†å¯¹å…ƒç´ åšä½•ç§å˜åŒ–çš„CSSå±æ€§è¢«å¼•å…¥ï¼Œè¿™æ ·æµè§ˆå™¨å¯ä»¥ä¼˜åŒ–å¤„ç†å…ƒç´ æ¸²æŸ“çš„æ–¹å¼ï¼Œä¸ºå…ƒç´ æå‰å‡†å¤‡æ˜‚è´µçš„åŠ¨ç”»å¤„ç†æ“ä½œï¼Œè¿™å°±æ˜¯wiil-changeå±æ€§</p><h3 id="2-will-change"><a href="#2-will-change" class="headerlink" title="2. will-change"></a>2. will-change</h3><p>will-changeå±æ€§å¯ä»¥æå‰é€šçŸ¥æµè§ˆå™¨æˆ‘ä»¬è¦å¯¹å…ƒç´ åšä»€ä¹ˆåŠ¨ç”»ï¼Œè¿™æ ·æµè§ˆå™¨å¯ä»¥æå‰å‡†å¤‡åˆé€‚çš„ä¼˜åŒ–è®¾ç½®ã€‚è¿™æ ·å¯ä»¥é¿å…å¯¹é¡µé¢å“åº”é€Ÿåº¦æœ‰é‡è¦å½±å“çš„æ˜‚è´µæˆæœ¬ã€‚å…ƒç´ å¯ä»¥æ›´å¿«çš„è¢«æ”¹å˜ï¼Œæ¸²æŸ“çš„ä¹Ÿæ›´å¿«ï¼Œè¿™æ ·é¡µé¢å¯ä»¥å¿«é€Ÿæ›´æ–°ï¼Œè¡¨ç°çš„æ›´åŠ æµç•…ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå½“å¯¹äºç´ ä½¿ç”¨ CSS 3Då˜å½¢æ—¶ï¼Œå…ƒç´ åŠå…¶å†…å®¹å¯ä»¥åœ¨åˆæˆåˆ°é¡µé¢ä¹‹å‰è¢«åˆ›å»ºåˆ°æˆ‘ä»¬ä¹‹å‰è¯´çš„layerã€‚ç„¶è€ŒæŠŠå…ƒç´ æ”¾åˆ°layerä¸­æ˜¯ä¸ªæ˜‚è´µçš„æ“ä½œï¼Œè¿™å°†ä¼šå¯¼è‡´å˜å½¢åŠ¨ç”»å»¶è¿Ÿä¸€ä¸ªè¯¾ä»¶çš„ç¬é—´ï¼Œä¹Ÿå°±æ˜¯flicker</p><p>ä¸ºäº†é¿å…è¿™ç§å»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‘ç”Ÿä¹‹å‰é€šçŸ¥æµè§ˆå™¨ï¼Œè¿™æ ·æµè§ˆå™¨ä¼šæœ‰ä¸€å®šçš„æ—¶é—´å»å‡†å¤‡è¿™äº›å˜åŒ–ï¼Œå½“å‘ç”Ÿçš„æ—¶å€™layerå·²ç»å‡†å¤‡å¥½äº†ï¼Œè¿™æ ·åŠ¨ç”»å°±ä¼šå¾ˆæµç•…ï¼Œä¸ä¼šé—ªå±</p><p>ä½¿ç”¨will-changeæç¤ºæµè§ˆå™¨å…³äºå³å°†å‘ç”Ÿçš„å˜å½¢ååˆ†ç®€å•ï¼Œæ·»åŠ ä¸ªCSSå±æ€§å°±è¡Œ</p><p>will-change: transform;<br>ä¹Ÿå¯ä»¥å‘Šè¯‰æµè§ˆå™¨è¦æ”¹å˜å…ƒç´ çš„æ»šåŠ¨æ¡ä½ç½®ï¼Œæˆ–è€…å¤šä¸ªè¦å˜åŒ–çš„å±æ€§ï¼Œå†™ä¸‹å±æ€§çš„åå­—å°±è¡Œï¼Œä¹Ÿå¯ä»¥å†™å¤šä¸ªï¼Œé€—å·éš”å¼€</p><p>will-change: transform, opacity;<br>å£°æ˜äº†å…ƒç´ å³å°†è¿›è¡Œçš„å˜åŒ–ä¼šè®©æµè§ˆå™¨åœ¨æ¸²æŸ“é¡µé¢æ—¶åšæ›´å¥½çš„å†³å®šï¼Œè¿™æ˜æ˜¾æ¯”ä¹‹å‰è¯´çš„3D hacksè¦å¥½ã€‚<br><br></p><p><strong>æå‡ä¸ºåˆæˆå±‚ç®€å•è¯´æ¥æœ‰ä»¥ä¸‹å‡ ç‚¹å¥½å¤„</strong></p><ul><li>åˆæˆå±‚çš„ä½å›¾ï¼Œä¼šäº¤ç”± GPU åˆæˆï¼Œæ¯” CPU å¤„ç†è¦å¿«</li><li>å½“éœ€è¦ repaint æ—¶ï¼Œåªéœ€è¦ repaint æœ¬èº«ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–çš„å±‚</li><li>å¯¹äº transform å’Œ opacity æ•ˆæœï¼Œä¸ä¼šè§¦å‘ layout å’Œ paint</li></ul><h2 id="transformä»£æ›¿ç›’æ¨¡å‹å±æ€§å˜åŒ–"><a href="#transformä»£æ›¿ç›’æ¨¡å‹å±æ€§å˜åŒ–" class="headerlink" title="transformä»£æ›¿ç›’æ¨¡å‹å±æ€§å˜åŒ–"></a>transformä»£æ›¿ç›’æ¨¡å‹å±æ€§å˜åŒ–</h2><p>åœ¨ä½¿ç”¨CSS3 transitionåšåŠ¨ç”»æ•ˆæœæ—¶ï¼Œtransformå®ç°çš„åŠ¨ç”»æ˜¯ä¸åˆæˆå™¨çº¿ç¨‹æœ‰å…³çš„ï¼Œä¸éœ€è¦ç­‰å¾…ä¸»çº¿ç¨‹æ ·å¼è®¡ç®—æˆ–è€…JSæ‰§è¡Œï¼Œè®¡ç®—é€Ÿåº¦å¾ˆå¿«çš„ï¼›è€Œheightï¼Œwidthï¼Œmarginå’Œpaddingæ—¶ï¼Œå¯¼è‡´å¸ƒå±€å’Œç»˜åˆ¶çš„è°ƒæ•´ï¼Œä¸»çº¿ç¨‹éœ€è¦é‡æ–°è®¡ç®—æ ·å¼å¹¶ä¸”æ‰§è¡ŒJSï¼Œè®¡ç®—é€Ÿåº¦è‡ªç„¶å°±æ…¢äº†ã€‚   </p><blockquote><p>æ¡ˆä¾‹ï¼šå®‰å¾½é—¨æˆ·é¦–é¡µå¿«æ·å…¥å£åŠ¨ç”»ï¼Œä½¿ç”¨margin-left,left,transformçš„æ€§èƒ½å·®å¼‚</p></blockquote><ul><li><p>left<br>&emsp; <img src="left.png" alt="leftçš„é‡ç»˜å’Œé‡ç»˜æ—¶é—´"><br>&emsp; <img src="left-GPU.png" alt="leftçš„GPUä½¿ç”¨ç‡"></p></li><li><p>margin-left<br>&emsp; <img src="margin.png" alt="margin-leftçš„é‡ç»˜å’Œé‡ç»˜æ—¶é—´"><br>&emsp; <img src="margin-GPU.png" alt="margin-leftçš„GPUä½¿ç”¨ç‡"></p></li><li><p>transfrom - translate<br>&emsp; <img src="translate.png" alt="transform-translatetçš„é‡ç»˜å’Œé‡ç»˜æ—¶é—´"><br>&emsp; <img src="translate-GPU1.png" alt="transform-translateçš„GPUä½¿ç”¨ç‡"><br>&emsp; <img src="translate-GPU2.png" alt="transform-translateçš„GPUä½¿ç”¨ç‡"></p></li></ul><p>è€—æ—¶å¯¹æ¯”è¡¨ï¼Œæ–¹ä¾¿è®¡ç®—</p><table><thead><tr><th>è€—æ—¶</th><th>left</th><th>margin</th><th>transform</th></tr></thead><tbody><tr><td>Summery</td><td>5546ms</td><td>5306ms</td><td>6075ms</td></tr><tr><td>Scripting</td><td>1723.7ms</td><td>1487.6ms</td><td>1488.4ms</td></tr><tr><td>Rendering</td><td>183ms</td><td>191.6ms</td><td>95.3ms</td></tr><tr><td>Painting</td><td>464.6ms</td><td>450.5ms</td><td>78.5ms</td></tr><tr><td>Other</td><td>167.2ms</td><td>165.1ms</td><td>122.2ms</td></tr><tr><td>Idle</td><td>3007.5ms</td><td>3010.6ms</td><td>4291ms</td></tr><tr><td>GPUä½¿ç”¨ç‡</td><td>13.7MB</td><td>13.7MB</td><td>å¹³å‡åœ¨22MBï¼Œæœ€å¤§å¯è¾¾åˆ°23MB+</td></tr></tbody></table><p>é€šè¿‡ä¸Šé¢çš„è¡¨æ ¼æˆ‘ä»¬å¯ä»¥è®¡ç®—å‡ºleft,margin,transform-translateå®ç°CSS3åŠ¨ç”»æ•ˆæœæ—¶çš„æ€§èƒ½å·®å¼‚å‚æ•°ã€‚</p><table><thead><tr><th>å…³é”®æ€§èƒ½å‚æ•°</th><th>left</th><th>margin</th><th>transform</th></tr></thead><tbody><tr><td>å®é™…åŠ¨ç”»è€—æ—¶ï¼ˆæ€»æ—¶é—´ - ç©ºé—²æ—¶é—´ï¼‰</td><td>2538.5ms</td><td>2295.4ms</td><td>1784ms</td></tr></tbody></table><p>è®¡ç®—å¾—å‡ºï¼ŒtransformåŠ¨ç”»è€—æ—¶çº¦ç­‰äºå…¶ä»–ä¸¤ä¸ªçš„0.7-0.77å€ã€‚<br>å¯¹äºOtheråšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œå¹¶ä¸äº†è§£ï¼Œå¦‚æœå®é™…åŠ¨ç”»æ—¶é—´è¿˜éœ€è¦å‡å»Otherä¸­çš„æ—¶é—´çš„è¯ï¼Œæ•°æ®å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å…³é”®æ€§èƒ½å‚æ•°</th><th>left</th><th>margin</th><th>transform</th></tr></thead><tbody><tr><td>å®é™…åŠ¨ç”»è€—æ—¶ï¼ˆæ€»æ—¶é—´ - ç©ºé—²æ—¶é—´ - Otheræ—¶é—´ï¼‰</td><td>2371.3ms</td><td>2130.3ms</td><td>1661.8ms</td></tr></tbody></table><p><strong>åœ¨ä½¿ç”¨css3 transtionåšåŠ¨ç”»æ•ˆæœæ—¶ï¼Œä¼˜å…ˆé€‰æ‹©transformï¼Œå°½é‡ä¸è¦ä½¿ç”¨heightï¼Œwidthï¼Œmarginå’Œpaddingã€‚</strong></p><h2 id="GPUç¡¬ä»¶åŠ é€Ÿåˆç†ä½¿ç”¨"><a href="#GPUç¡¬ä»¶åŠ é€Ÿåˆç†ä½¿ç”¨" class="headerlink" title="GPUç¡¬ä»¶åŠ é€Ÿåˆç†ä½¿ç”¨"></a>GPUç¡¬ä»¶åŠ é€Ÿåˆç†ä½¿ç”¨</h2><p>ç¼ºç‚¹ï¼š1. è‚†æ— å¿Œæƒ®çš„å¼€å¯GPUç¡¬ä»¶åŠ é€Ÿä¼šå¯¼è‡´å¤§é‡æ¶ˆè€—è®¾å¤‡ç”µé‡ï¼Œé™ä½ç”µæ± å¯¿å‘½ã€ä¸»è¦æ˜¯åœ¨ç§»åŠ¨ç«¯ã€‘ï¼›åŒæ—¶ï¼Œä¹Ÿä¼šå ç”¨æµè§ˆå™¨ç½‘é¡µç”¨æˆ·çš„å¤§é‡ç³»ç»Ÿèµ„æºï¼›  </p><ol start="2"><li>ä¸åˆç†çš„GPUç¡¬ä»¶åŠ é€Ÿä¼šåˆæˆä¸å¿…è¦çš„éšå½¢å¤åˆå±‚ï¼Œè¿™æ ·ä¼šè®©åŸæœ¬åœ¨é»˜è®¤å¤åˆå±‚çš„åˆ é™¤ï¼Œåˆè¦å¸ƒå±€ï¼Œç»˜åˆ¶ä½å›¾ï¼Œä¼ è¾“åˆ°GPUï¼Œå­˜å‚¨åˆ°GPUå†…å­˜è¿™äº›ä¸å¿…è¦çš„æ“ä½œï¼›  </li><li>GPUæ¸²æŸ“ä¼šå½±å“å­—ä½“çš„æŠ—é”¯é½¿æ•ˆæœ <a href="https://segmentfault.com/q/1010000000467910" target="_blank" rel="noopener">å­—ä½“æ¸²æŸ“-webkit-font-smoothing</a>ï¼›  </li></ol><p><a href="https://csstriggers.com/" title="csstriggers-layoutã€paintã€composite" target="_blank" rel="noopener">å•ä¸ªCSSå±æ€§ç»™æµè§ˆå™¨å¸¦æ¥å“ªäº›å·¥ä½œé‡-å‚è€ƒç½‘ç«™</a><br><a href="https://www.smashingmagazine.com/2016/12/gpu-animation-doing-it-right/" target="_blank" rel="noopener">CSS GPU Animation: Doing It Right</a><br><a href="https://www.html5rocks.com/zh/tutorials/speed/layers/" target="_blank" rel="noopener">Accelerated Rendering in Chrome</a><br><a href="https://www.html5rocks.com/zh/tutorials/speed/high-performance-animations/" target="_blank" rel="noopener">High Performance Animations</a><br><a href="https://div.io/topic/1348" target="_blank" rel="noopener">GPUç¡¬ä»¶åŠ è½½çš„å‘</a></p><p><strong>å‚è€ƒæ–‡æ¡£</strong><br>ï¼ˆ1ï¼‰webkitæŠ€æœ¯å†…å¹•[æœ±æ°¸ç››] ç¬¬ä¸ƒç«  æ¸²æŸ“åŸºç¡€<br>ï¼ˆ2ï¼‰<a href="http://blogs.adobe.com/webplatform/2014/03/18/css-animations-and-transitions-performance/" target="_blank" rel="noopener">CSS animations and transitions performance: looking inside the browser</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯ä¸ªé¡¹ç›®ä¸­æˆ–å¤šæˆ–å°‘åœ°ä¼šä½¿ç”¨åˆ°åŠ¨ç”»ï¼Œä½¿å¾—ç”¨æˆ·ä½“éªŒæ•ˆæœæ›´å¥½ã€‚é€šå¸¸ç®€å•çš„åŠ¨ç”»å¯¹æ€§èƒ½å½±å“å¾ˆå°ï¼Œä½†æ˜¯æ¶‰åŠåˆ°ç¨å¾®å¤æ‚çš„åŠ¨ç”»æˆ–è€…åœ¨é…ç½®æ¯”è¾ƒä½çš„æœºå™¨ä¸Šæ—¶ï¼Œä¸€äº›ä¸å½“çš„å¤„ç†æ–¹å¼ä¼šä½¿æ€§èƒ½é—®é¢˜å˜å¾—ååˆ†çªå‡ºâ€¦â€¦&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>CSSé¢„ç¼–è¯‘å™¨-Less</title>
    <link href="http://yoursite.com/2019/05/24/CSS%E9%A2%84%E7%BC%96%E8%AF%91%E5%99%A8-Less/"/>
    <id>http://yoursite.com/2019/05/24/CSSé¢„ç¼–è¯‘å™¨-Less/</id>
    <published>2019-05-24T06:25:16.000Z</published>
    <updated>2019-06-10T10:53:23.699Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>CSSçš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†è®©ä¸¤ä¸ªå…ƒç´ ï¼ˆæ‹¥æœ‰åŒä¸€ä¸ªç±»åï¼‰çš„æ ·å¼ä¸ä¸€æ ·ï¼Œå°±éœ€è¦æ·»åŠ å¦å¤–ä¸€ä¸ªç±»æˆ–è€…åœ¨ä¹¦å†™CSSçš„æ—¶å€™å¤šåŠ å±‚çº§ã€‚è¿™æ ·å¾ˆä¸æ–¹ä¾¿ï¼Œè€Œä¸”ä¹Ÿå®¹æ˜“å‡ºé”™ã€‚é™¤æ­¤è¿˜æœ‰åœ¨CSSä¸­æ²¡æœ‰å˜é‡ã€å‡½æ•°è¿™ç§æ¦‚å¿µï¼Œå¹¶ä¸”æœ‰æ—¶å€™ä¸ºäº†å…¼å®¹ä¸åŒæµè§ˆå™¨è¦å†™ä¸€å †ç±»ä¼¼çš„æ ·å¼ã€‚<br><br>åœ¨cssé¢„ç¼–è¯‘å™¨ä¸­ï¼Œä¸Šé¢çš„é—®é¢˜éƒ½å¯ä»¥å¾—åˆ°è§£å†³ã€‚cssé¢„ç¼–è¯‘å™¨æœ‰å¾ˆå¤šï¼šSassã€Less ã€Stylusè¿™ä¸‰ç§æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œå½¼æ­¤ä¹‹é—´éƒ½æ˜¯å¤§åŒå°å¼‚ã€‚</p><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h2><h3 id="1-å€¼å˜é‡"><a href="#1-å€¼å˜é‡" class="headerlink" title="1. å€¼å˜é‡"></a>1. å€¼å˜é‡</h3><p>å®šä¹‰<code>@ + å˜é‡åç§°ï¼šå€¼ï¼›</code>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å°±æ˜¯<code>@ + å˜é‡</code><br><br>åœ¨é¡µé¢æ ·å¼ä¸­ï¼Œç»å¸¸ä¼šå‡ºç°å¥½å¤šå­—ä½“æˆ–è€…èƒŒæ™¯è‰²ä»€ä¹ˆçš„è®¾ç½®éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æœ‰æ—¶å€™éœ€è¦æŠŠåŸç³»ç»Ÿçš„æ ·å¼é…è‰²æ¢ä¸€å¥—ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å…¨å±€æœç´¢ï¼Œè€Œä¸”ä¸€ä¸å°å¿ƒè¿˜ä¼šæ”¹é”™ã€‚è¿™ä¸ªæ—¶å€™ç‰¹åˆ«å¸Œæœ›èƒ½å¤Ÿæ‹¥æœ‰jsçš„å®šä¹‰å˜é‡å¸¸é‡ï¼Œå†èµ‹å€¼çš„åŠŸèƒ½ï¼Œå°±å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bgColor=<span class="string">"skyblue"</span>;</span><br><span class="line">$(<span class="string">".post-content"</span>).css(<span class="string">"background-color"</span>,bgColor);</span><br><span class="line">$(<span class="string">"#wrap"</span>).css(<span class="string">"background-color"</span>,bgColor);</span><br><span class="line">$(<span class="string">".arctive"</span>).css(<span class="string">"background-color"</span>,bgColor);</span><br></pre></td></tr></table></figure><p>Lesså˜é‡ä¹¦å†™</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@color:</span> <span class="number">#999</span>;</span><br><span class="line"><span class="variable">@bgColor:</span> skyblue;<span class="comment">//ä¸è¦æ·»åŠ å¼•å·</span></span><br><span class="line"><span class="variable">@width:</span> <span class="number">50%</span>;</span><br><span class="line"><span class="selector-id">#wrap</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="variable">@bgColor</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@width</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">background</span>: skyblue;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é€‰æ‹©å™¨å˜é‡"><a href="#2-é€‰æ‹©å™¨å˜é‡" class="headerlink" title="2. é€‰æ‹©å™¨å˜é‡"></a>2. é€‰æ‹©å™¨å˜é‡</h3><p>å®šä¹‰<code>@ + å˜é‡åç§°ï¼šå€¼ï¼›</code>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å°±æ˜¯<code>@ + { + å˜é‡ + }</code>ï¼Œè¦ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹å˜é‡å<br><br>é€‰æ‹©å™¨å˜æˆåŠ¨æ€çš„ï¼ŒåæœŸä¿®æ”¹htmlçš„cssä»¥åŠIDçš„æ—¶å€™å¯ä»¥ä¸ç”¨é‡å†™ï¼Œç›´æ¥ä¿®æ”¹å˜é‡å€¼ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@mySelector:</span> #wrap;</span><br><span class="line"><span class="variable">@Wrap:</span> wrap;</span><br><span class="line"><span class="variable">@&#123;mySelector&#125;</span>&#123; <span class="comment">//å˜é‡å å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.@&#123;Wrap&#125;</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#@&#123;Wrap&#125;</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#666</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#666</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å±æ€§å˜é‡"><a href="#3-å±æ€§å˜é‡" class="headerlink" title="3. å±æ€§å˜é‡"></a>3. å±æ€§å˜é‡</h3><p>å®šä¹‰<code>@ + å˜é‡åç§°ï¼šå€¼ï¼›</code>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å°±æ˜¯<code>@ + { + å˜é‡ + }</code>ï¼Œè¦ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹å˜é‡å<br></p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@borderStyle:</span> border-style;</span><br><span class="line"><span class="variable">@Soild:</span>solid;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">@&#123;borderStyle&#125;</span>: <span class="variable">@Soild</span>;<span class="comment">//å˜é‡å å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">border-style</span>:solid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-URLå˜é‡"><a href="#4-URLå˜é‡" class="headerlink" title="4. URLå˜é‡"></a>4. URLå˜é‡</h3><p>å®šä¹‰<code>@ + å˜é‡åç§°ï¼šå€¼ï¼›</code>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å°±æ˜¯<code>@ + { + å˜é‡ + }</code>ï¼Œè¦ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹å˜é‡å<br><br>æ¯”è¾ƒå¸¸ç”¨çš„å°±æ˜¯ï¼Œå°†å‰é¢çš„ç›¸åŒè·¯å¾„å®šä¹‰æˆä¸€ä¸ªå˜é‡ï¼ŒåæœŸå¦‚æœimageæ–‡ä»¶å¤¹ä¿®æ”¹è·¯å¾„äº†ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œä¸ç”¨æ¯ä¸ªURLéƒ½è¦ä¿®æ”¹äº†ã€‚ä¸»è¦å°±æ˜¯æå–ç›¸åŒçš„ç»å¯¹/ç›¸å¯¹è·¯å¾„ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@images:</span> <span class="string">"../img"</span>;<span class="comment">//éœ€è¦åŠ å¼•å·</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: url(<span class="string">"@&#123;images&#125;/dog.png"</span>);<span class="comment">//å˜é‡å å¿…é¡»ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: url(<span class="string">"../img/dog.png"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-å£°æ˜å˜é‡"><a href="#5-å£°æ˜å˜é‡" class="headerlink" title="5. å£°æ˜å˜é‡"></a>5. å£°æ˜å˜é‡</h3><p>å®šä¹‰<code>@nameï¼š{å±æ€§: å€¼;}ï¼›</code>ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å°±æ˜¯<code>@name()</code>ï¼Œè¦ä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹å˜é‡å<br><br>å¯ä»¥å°†ä¸€å †ç›¸åŒçš„æ ·å¼æå–å‡ºæ¥</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@background:</span> &#123;<span class="attribute">background</span>:red;&#125;;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="variable">@background</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">@Rules:</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> red;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="selector-id">#con</span>&#123;</span><br><span class="line">  <span class="variable">@Rules</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#con</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">border</span>: solid <span class="number">1px</span> red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-å˜é‡è¿ç®—"><a href="#6-å˜é‡è¿ç®—" class="headerlink" title="6. å˜é‡è¿ç®—"></a>6. å˜é‡è¿ç®—</h3><ul><li>åŠ å‡æ³•æ—¶ï¼Œä»¥ç¬¬ä¸€ä¸ªæ•°æ®çš„å•ä½ä¸ºåŸºå‡†</li><li>ä¹˜é™¤æ³•æ—¶ï¼Œæ³¨æ„å•ä½ä¸€å®šè¦ç»Ÿä¸€</li></ul><p>CSS3ä¸­æœ‰ä¸€ä¸ªcalc()å‡½æ•°ï¼Œä½†æ˜¯å±€é™æ€§æ¯”è¾ƒå¤§</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@width:</span><span class="number">300px</span>;</span><br><span class="line"><span class="variable">@color:</span><span class="number">#222</span>;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="variable">@width-20</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="variable">@width-20</span>*<span class="number">5</span>;</span><br><span class="line">  <span class="attribute">margin</span>:(<span class="variable">@width-20</span>)*<span class="number">5</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="variable">@color</span>*<span class="number">2</span>;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="variable">@color</span> + <span class="number">#111</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">280px</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">margin</span>:<span class="number">1400px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#444</span>;</span><br><span class="line">  <span class="attribute">background-color</span>:<span class="number">#333</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-å˜é‡ä½œç”¨åŸŸ"><a href="#7-å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="7. å˜é‡ä½œç”¨åŸŸ"></a>7. å˜é‡ä½œç”¨åŸŸ</h3><p>ä¸€å¥è¯ç†è§£å°±æ˜¯ï¼š<strong>å°±è¿‘åŸåˆ™</strong>ï¼Œä¸è¦è·Ÿæˆ‘æé—­åŒ…ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@var:</span> <span class="variable">@a</span>;</span><br><span class="line"><span class="variable">@a:</span> <span class="number">100%</span>;</span><br><span class="line"><span class="selector-id">#wrap</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="variable">@var</span>;</span><br><span class="line">  <span class="variable">@a:</span> <span class="number">9%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">9%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-ç”¨å˜é‡å»å®šä¹‰å˜é‡"><a href="#8-ç”¨å˜é‡å»å®šä¹‰å˜é‡" class="headerlink" title="8. ç”¨å˜é‡å»å®šä¹‰å˜é‡"></a>8. ç”¨å˜é‡å»å®šä¹‰å˜é‡</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="variable">@fnord:</span>  <span class="string">"I am fnord."</span>;</span><br><span class="line"><span class="variable">@var:</span>    <span class="string">"fnord"</span>;</span><br><span class="line"><span class="selector-id">#wrap</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="variable">@@var</span>; <span class="comment">//å°†@varæ›¿æ¢ä¸ºå…¶å€¼ content:@fnord;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"I am fnord."</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="åµŒå¥—"><a href="#åµŒå¥—" class="headerlink" title="åµŒå¥—"></a>åµŒå¥—</h2><p>Lessçš„åµŒå¥—æ˜¯æœ€å¸¸ç”¨çš„ï¼Œå¹¶ä¸”å…·æœ‰å±‚çº§å…³ç³»ï¼Œèƒ½å¤Ÿé¿å…ä¸åŒå±‚çº§ä¸‹çš„ç›¸åŒç±»åå…ƒç´ çš„æ ·å¼ç›¸åŒã€‚è€Œä¸”ä¾¿äºæˆ‘ä»¬æŸ¥æ‰¾æ ·å¼è¿›è¡Œä¿®æ”¹ã€‚</p><h3 id="1-amp-å¦™ç”¨"><a href="#1-amp-å¦™ç”¨" class="headerlink" title="1. &amp; å¦™ç”¨"></a>1. &amp; å¦™ç”¨</h3><p><code>&amp;</code>: ä»£è¡¨çš„ä¸Šä¸€å±‚é€‰æ‹©å™¨çš„åå­—ï¼Œæ­¤ä¾‹ä¾¿æ˜¯headerã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-id">#header</span>&#123;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">    <span class="attribute">content</span>:<span class="string">"Less is more!"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="attribute">font-weight</span>:bold;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-tag">_content</span>&#123;<span class="comment">//ç†è§£æ–¹å¼ï¼šç›´æ¥æŠŠ &amp; æ›¿æ¢æˆ #header</span></span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#header</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">content</span>:<span class="string">"Less is more!"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-class">.title</span>&#123; <span class="comment">//åµŒå¥—äº†</span></span><br><span class="line">  <span class="attribute">font-weight</span>:bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header_content</span>&#123;<span class="comment">//æ²¡æœ‰åµŒå¥—ï¼</span></span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-åª’ä½“æŸ¥è¯¢"><a href="#2-åª’ä½“æŸ¥è¯¢" class="headerlink" title="2. åª’ä½“æŸ¥è¯¢"></a>2. åª’ä½“æŸ¥è¯¢</h3><p>åœ¨ä»¥å¾€çš„å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ åª’ä½“æŸ¥è¯¢ï¼Œéƒ½è¦æŠŠä¸€ä¸ªå…ƒç´  åˆ†å¼€å†™</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen and (<span class="attribute">max-width</span>:<span class="number">768px</span>)&#123;</span><br><span class="line">  <span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Less æä¾›äº†ä¸€ä¸ªååˆ†ä¾¿æ·çš„æ–¹å¼</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="comment">//something...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">@media</span> screen&#123;</span><br><span class="line">        <span class="keyword">@media</span> (<span class="attribute">max-width</span>:<span class="number">768px</span>)&#123;</span><br><span class="line">          <span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">@media</span> tv &#123;</span><br><span class="line">      <span class="attribute">width</span>:<span class="number">2000px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="keyword">@media</span> screen and (<span class="attribute">maxwidth</span>:<span class="number">768px</span>)&#123;</span><br><span class="line">  <span class="selector-id">#main</span>&#123;</span><br><span class="line">      <span class="attribute">width</span>:<span class="number">100px</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> tv&#123;</span><br><span class="line">  <span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">2000px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å”¯ä¸€çš„ç¼ºç‚¹å°±æ˜¯ æ¯ä¸€ä¸ªå…ƒç´ éƒ½ä¼šç¼–è¯‘å‡ºè‡ªå·± <code>@media</code> å£°æ˜ï¼Œå¹¶ä¸ä¼šåˆå¹¶ã€‚</p><blockquote><p>å¯ä»¥å€ŸåŠ© Less åœ¨å…ƒç´ ä¸­ï¼Œå»å®šä¹‰è‡ªå·±çš„ç§æœ‰æ ·å¼ã€‚</p></blockquote><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="comment">// something..</span></span><br><span class="line">  <span class="selector-tag">&amp;</span><span class="selector-class">.show</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.show</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span><span class="selector-class">.show</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.show</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none; <span class="comment">//ä¼šè¢«è¦†ç›–ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ··åˆæ–¹æ³•-mixin"><a href="#æ··åˆæ–¹æ³•-mixin" class="headerlink" title="æ··åˆæ–¹æ³•-mixin"></a>æ··åˆæ–¹æ³•-mixin</h2><h3 id="1-æ— å‚æ•°æ–¹æ³•"><a href="#1-æ— å‚æ•°æ–¹æ³•" class="headerlink" title="1. æ— å‚æ•°æ–¹æ³•"></a>1. æ— å‚æ•°æ–¹æ³•</h3><p>æ–¹æ³•çŠ¹å¦‚ å£°æ˜çš„é›†åˆï¼Œä½¿ç”¨æ—¶ ç›´æ¥é”®å…¥åç§°å³å¯ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.card</span> &#123; <span class="comment">// ç­‰ä»·äº .card()</span></span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f6f6f6</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> rgba(<span class="number">151</span>, <span class="number">151</span>, <span class="number">151</span>, .<span class="number">58</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="selector-class">.card</span>;<span class="comment">//ç­‰ä»·äº.card();</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#f6f6f6</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> rgba(<span class="number">151</span>, <span class="number">151</span>, <span class="number">151</span>, .<span class="number">58</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>.card</code> ä¸ <code>.card()</code> æ˜¯ç­‰ä»·çš„</p><ul><li>. ä¸ # çš†å¯ä½œä¸º æ–¹æ³•å‰ç¼€ã€‚</li><li>æ–¹æ³•åå†™ä¸å†™ () çœ‹ä¸ªäººä¹ æƒ¯ã€‚</li></ul><h3 id="2-é»˜è®¤å‚æ•°æ–¹æ³•"><a href="#2-é»˜è®¤å‚æ•°æ–¹æ³•" class="headerlink" title="2. é»˜è®¤å‚æ•°æ–¹æ³•"></a>2. é»˜è®¤å‚æ•°æ–¹æ³•</h3><ul><li>Less å¯ä»¥ä½¿ç”¨é»˜è®¤å‚æ•°ï¼Œå¦‚æœ æ²¡æœ‰ä¼ å‚æ•°ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨é»˜è®¤å‚æ•°ã€‚</li><li>@arguments çŠ¹å¦‚ JS ä¸­çš„ arguments æŒ‡ä»£çš„æ˜¯ å…¨éƒ¨å‚æ•°ã€‚</li><li>ä¼ çš„å‚æ•°ä¸­ å¿…é¡»å¸¦ç€å•ä½ã€‚</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.border</span>(<span class="variable">@a</span>:<span class="number">10px</span>,<span class="variable">@b</span>:<span class="number">50px</span>,<span class="variable">@c</span>:<span class="number">30px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border</span>:solid <span class="number">1px</span> <span class="variable">@color</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;<span class="comment">//æŒ‡ä»£çš„æ˜¯ å…¨éƒ¨å‚æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-class">.border</span>(<span class="number">0px</span>,<span class="number">5px</span>,<span class="number">30px</span>,red);<span class="comment">//å¿…é¡»å¸¦ç€å•ä½</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="selector-class">.border</span>(<span class="number">0px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content</span>&#123;</span><br><span class="line">  <span class="selector-class">.border</span>;<span class="comment">//ç­‰ä»·äº .border()</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>:solid <span class="number">1px</span> red;</span><br><span class="line">    <span class="attribute">box-shadow</span>:<span class="number">0px</span>,<span class="number">5px</span>,<span class="number">30px</span>,red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0px</span> <span class="number">50px</span> <span class="number">30px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#content</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>:solid <span class="number">1px</span> <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">50px</span> <span class="number">30px</span> <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-æ–¹æ³•çš„åŒ¹é…æ¨¡å¼"><a href="#3-æ–¹æ³•çš„åŒ¹é…æ¨¡å¼" class="headerlink" title="3. æ–¹æ³•çš„åŒ¹é…æ¨¡å¼"></a>3. æ–¹æ³•çš„åŒ¹é…æ¨¡å¼</h3><p>ä¸ é¢å‘å¯¹è±¡ä¸­çš„å¤šæ€ å¾ˆç›¸ä¼¼</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.triangle</span>(top,<span class="variable">@width</span>:<span class="number">20px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:transparent  transparent <span class="variable">@color</span> transparent ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.triangle</span>(right,<span class="variable">@width</span>:<span class="number">20px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:transparent <span class="variable">@color</span> transparent  transparent ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.triangle</span>(bottom,<span class="variable">@width</span>:<span class="number">20px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:<span class="variable">@color</span> transparent  transparent  transparent ;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.triangle</span>(left,<span class="variable">@width</span>:<span class="number">20px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border-color</span>:transparent  transparent  transparent <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.triangle</span>(<span class="variable">@_</span>,<span class="variable">@width</span>:<span class="number">20px</span>,<span class="variable">@color</span>:<span class="number">#000</span>)&#123;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="variable">@width</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-class">.triangle</span>(left, <span class="number">50px</span>, <span class="number">#999</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">border-color</span>:transparent  transparent  transparent <span class="number">#999</span>;</span><br><span class="line">  <span class="attribute">border-style</span>: solid;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° left è¦ä¼šæ‰¾åˆ°æ–¹æ³•ä¸­åŒ¹é…ç¨‹åº¦æœ€é«˜çš„ï¼Œå¦‚æœåŒ¹é…ç¨‹åº¦ç›¸åŒï¼Œå°†å…¨éƒ¨é€‰æ‹©ï¼Œå¹¶å­˜åœ¨ç€æ ·å¼è¦†ç›–æ›¿æ¢ã€‚</li><li>å¦‚æœåŒ¹é…çš„å‚æ•° æ˜¯å˜é‡ï¼Œåˆ™å°†ä¼šåŒ¹é…ï¼Œå¦‚ @_ ã€‚</li></ul><h3 id="4-æ–¹æ³•çš„å‘½åç©ºé—´"><a href="#4-æ–¹æ³•çš„å‘½åç©ºé—´" class="headerlink" title="4. æ–¹æ³•çš„å‘½åç©ºé—´"></a>4. æ–¹æ³•çš„å‘½åç©ºé—´</h3><p>è®©æ–¹æ³•æ›´åŠ è§„èŒƒ</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-id">#card</span>()&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#723232</span>;</span><br><span class="line">    <span class="selector-class">.d</span>(<span class="variable">@w</span>:<span class="number">300px</span>)&#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="variable">@w</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-id">#a</span>(<span class="variable">@h</span>:<span class="number">300px</span>)&#123;</span><br><span class="line">            <span class="attribute">height</span>: <span class="variable">@h</span>;<span class="comment">//å¯ä»¥ä½¿ç”¨ä¸Šä¸€å±‚ä¼ è¿›æ¥çš„æ–¹æ³•</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">    <span class="selector-id">#card</span> &gt; <span class="selector-class">.d</span> &gt; <span class="selector-id">#a</span>(<span class="number">100px</span>); <span class="comment">// çˆ¶å…ƒç´ ä¸èƒ½åŠ  æ‹¬å·</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-id">#card</span> <span class="selector-class">.d</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#con</span>&#123;</span><br><span class="line">    <span class="comment">//ä¸å¾—å•ç‹¬ä½¿ç”¨å‘½åç©ºé—´çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//.d() å¦‚æœå‰é¢æ²¡æœ‰å¼•å…¥å‘½åç©ºé—´ #card ï¼Œå°†ä¼šæŠ¥é”™</span></span><br><span class="line">    </span><br><span class="line">    <span class="selector-id">#card</span>; <span class="comment">// ç­‰ä»·äº #card();</span></span><br><span class="line">    <span class="selector-class">.d</span>(<span class="number">20px</span>); <span class="comment">//å¿…é¡»å…ˆå¼•å…¥ #card</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#wrap</span>&#123;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#con</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">20px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨ CSS ä¸­&gt; é€‰æ‹©å™¨ï¼Œé€‰æ‹©çš„æ˜¯ å„¿å­å…ƒç´ ï¼Œå°±æ˜¯ å¿…é¡»ä¸çˆ¶å…ƒç´  æœ‰ç›´æ¥è¡€æºçš„å…ƒç´ ã€‚</li><li>åœ¨å¼•å…¥å‘½ä»¤ç©ºé—´æ—¶ï¼Œå¦‚ä½¿ç”¨ &gt; é€‰æ‹©å™¨ï¼Œçˆ¶å…ƒç´ ä¸èƒ½åŠ  æ‹¬å·ã€‚</li><li>ä¸å¾—å•ç‹¬ä½¿ç”¨å‘½åç©ºé—´çš„æ–¹æ³• å¿…é¡»å…ˆå¼•å…¥å‘½åç©ºé—´ï¼Œæ‰èƒ½ä½¿ç”¨ å…¶ä¸­æ–¹æ³•ã€‚</li><li>å­æ–¹æ³• å¯ä»¥ä½¿ç”¨ä¸Šä¸€å±‚ä¼ è¿›æ¥çš„æ–¹æ³•</li></ul><h3 id="5-æ–¹æ³•çš„æ¡ä»¶ç­›é€‰"><a href="#5-æ–¹æ³•çš„æ¡ä»¶ç­›é€‰" class="headerlink" title="5. æ–¹æ³•çš„æ¡ä»¶ç­›é€‰"></a>5. æ–¹æ³•çš„æ¡ä»¶ç­›é€‰</h3><p>Less æ²¡æœ‰ if elseï¼Œå¯æ˜¯å®ƒæœ‰ when</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-id">#card</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// and è¿ç®—ç¬¦ ï¼Œç›¸å½“äº ä¸è¿ç®— &amp;&amp;ï¼Œå¿…é¡»æ¡ä»¶å…¨éƒ¨ç¬¦åˆæ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="selector-class">.border</span>(<span class="variable">@width</span>,<span class="variable">@color</span>,<span class="variable">@style</span>) <span class="keyword">when</span> (<span class="variable">@width</span>&gt;<span class="number">100px</span>) <span class="keyword">and</span>(<span class="variable">@color</span>=<span class="number">#999</span>)&#123;</span><br><span class="line">        <span class="attribute">border</span>:<span class="variable">@style</span> <span class="variable">@color</span> <span class="variable">@width</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// not è¿ç®—ç¬¦ï¼Œç›¸å½“äº éè¿ç®— !ï¼Œæ¡ä»¶ä¸º ä¸ç¬¦åˆæ‰ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="selector-class">.background</span>(<span class="variable">@color</span>) <span class="keyword">when</span> <span class="keyword">not</span> (<span class="variable">@color</span>&gt;=<span class="number">#222</span>)&#123;</span><br><span class="line">        <span class="attribute">background</span>:<span class="variable">@color</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// , é€—å·åˆ†éš”ç¬¦ï¼šç›¸å½“äº æˆ–è¿ç®— ||ï¼Œåªè¦æœ‰ä¸€ä¸ªç¬¦åˆæ¡ä»¶å°±ä¼šæ‰§è¡Œ</span></span><br><span class="line">    <span class="selector-class">.font</span>(<span class="variable">@size</span>:<span class="number">20px</span>) <span class="keyword">when</span> (<span class="variable">@size</span>&gt;<span class="number">50px</span>) , (<span class="variable">@size</span>&lt;<span class="number">100px</span>)&#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="variable">@size</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-id">#card</span>&gt;<span class="selector-class">.border</span>(<span class="number">200px</span>,<span class="number">#999</span>,solid);</span><br><span class="line">    <span class="selector-id">#card</span> <span class="selector-class">.background</span>(<span class="number">#111</span>);</span><br><span class="line">    <span class="selector-id">#card</span> &gt; <span class="selector-class">.font</span>(<span class="number">40px</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>:solid <span class="number">#999</span> <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#111</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">40px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ¯”è¾ƒè¿ç®—æœ‰ï¼š &gt; &gt;= = =&lt;&lt;ã€‚&lt; li&gt;</li><li>= ä»£è¡¨çš„æ˜¯ç­‰äº</li><li>é™¤å»å…³é”®å­— true ä»¥å¤–çš„å€¼éƒ½è¢«è§†ä¸º false</li></ul><h3 id="6-æ•°é‡ä¸å®šçš„å‚æ•°"><a href="#6-æ•°é‡ä¸å®šçš„å‚æ•°" class="headerlink" title="6. æ•°é‡ä¸å®šçš„å‚æ•°"></a>6. æ•°é‡ä¸å®šçš„å‚æ•°</h3><p>å¦‚æœä½ å¸Œæœ›ä½ çš„æ–¹æ³•æ¥å—æ•°é‡ä¸å®šçš„å‚æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨â€¦ ï¼ŒçŠ¹å¦‚ ES6 çš„æ‰©å±•è¿ç®—ç¬¦ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.boxShadow</span>(...)&#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.textShadow</span>(<span class="variable">@a</span>,...)&#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="variable">@arguments</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-class">.boxShadow</span>(<span class="number">1px</span>,<span class="number">4px</span>,<span class="number">30px</span>,red);</span><br><span class="line">    <span class="selector-class">.textShadow</span>(<span class="number">1px</span>,<span class="number">4px</span>,<span class="number">30px</span>,red);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">1px</span> <span class="number">4px</span> <span class="number">30px</span> red;</span><br><span class="line">  <span class="attribute">text-shadow</span>: <span class="number">1px</span> <span class="number">4px</span> <span class="number">30px</span> red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="7-æ–¹æ³•ä½¿ç”¨importantï¼"><a href="#7-æ–¹æ³•ä½¿ç”¨importantï¼" class="headerlink" title="7. æ–¹æ³•ä½¿ç”¨importantï¼"></a>7. æ–¹æ³•ä½¿ç”¨importantï¼</h3><p>ä½¿ç”¨æ–¹æ³• éå¸¸ç®€å•ï¼Œåœ¨æ–¹æ³•åå åŠ ä¸Šå…³é”®å­—å³å¯ã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.border</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> red;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">    <span class="selector-class">.border</span>() !important;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-id">#main</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: solid <span class="number">1px</span> red <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">50px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-å¾ªç¯æ–¹æ³•"><a href="#8-å¾ªç¯æ–¹æ³•" class="headerlink" title="8. å¾ªç¯æ–¹æ³•"></a>8. å¾ªç¯æ–¹æ³•</h3><p>Less å¹¶æ²¡æœ‰æä¾› for å¾ªç¯åŠŸèƒ½ï¼Œä½†è¿™ä¹Ÿéš¾ä¸å€’ èªæ˜çš„ç¨‹åºå‘˜ï¼Œä½¿ç”¨é€’å½’å»å®ç°ã€‚ ä¸‹é¢æ˜¯å®˜ç½‘ä¸­çš„ä¸€ä¸ª Demoï¼Œæ¨¡æ‹Ÿäº†ç”Ÿæˆæ …æ ¼ç³»ç»Ÿã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, <span class="variable">@i</span>: <span class="number">1</span>) <span class="keyword">when</span> (<span class="variable">@i</span> =&lt;<span class="variable">@n</span>) &#123;</span><br><span class="line">  <span class="selector-class">.column-</span><span class="variable">@&#123;i&#125;</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: (<span class="variable">@i</span> * <span class="number">100%</span> / <span class="variable">@n</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.generate-columns</span>(<span class="variable">@n</span>, (<span class="variable">@i</span> + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-class">.column-1</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">25%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-2</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-3</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">75%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.column-4</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-å±æ€§æ‹¼æ¥æ–¹æ³•"><a href="#9-å±æ€§æ‹¼æ¥æ–¹æ³•" class="headerlink" title="9. å±æ€§æ‹¼æ¥æ–¹æ³•"></a>9. å±æ€§æ‹¼æ¥æ–¹æ³•</h3><p><code>+_</code> ä»£è¡¨çš„æ˜¯ ç©ºæ ¼ï¼›<code>+</code> ä»£è¡¨çš„æ˜¯ é€—å·ã€‚</p><ul><li>é€—å·</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.boxShadow</span>() &#123;</span><br><span class="line">    <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">inset</span> <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">10px</span> <span class="selector-id">#555</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="selector-class">.boxShadow</span>();</span><br><span class="line">  <span class="selector-tag">box-shadow</span>+: <span class="selector-tag">0</span> <span class="selector-tag">0</span> <span class="selector-tag">20px</span> <span class="selector-tag">black</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">#555</span>, <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span> black;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>ç©ºæ ¼</li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="selector-class">.Animation</span>() &#123;</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">scale</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="selector-class">.Animation</span>();</span><br><span class="line">  <span class="selector-tag">transform</span>+<span class="selector-tag">_</span>: <span class="selector-tag">rotate</span>(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆçš„ CSS */</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: scale(<span class="number">2</span>) rotate(<span class="number">15deg</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="å¯¼å…¥"><a href="#å¯¼å…¥" class="headerlink" title="å¯¼å…¥"></a>å¯¼å…¥</h2><h3 id="1-å¯¼å…¥-less-æ–‡ä»¶-å¯çœç•¥åç¼€"><a href="#1-å¯¼å…¥-less-æ–‡ä»¶-å¯çœç•¥åç¼€" class="headerlink" title="1. å¯¼å…¥ less æ–‡ä»¶ å¯çœç•¥åç¼€"></a>1. å¯¼å…¥ less æ–‡ä»¶ å¯çœç•¥åç¼€</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import "main"; </span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line">import "main.less";</span><br></pre></td></tr></table></figure><h3 id="2-import-çš„ä½ç½®å¯éšæ„æ”¾ç½®"><a href="#2-import-çš„ä½ç½®å¯éšæ„æ”¾ç½®" class="headerlink" title="2.@import çš„ä½ç½®å¯éšæ„æ”¾ç½®"></a>2.<code>@import</code> çš„ä½ç½®å¯éšæ„æ”¾ç½®</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#main</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@import</span> <span class="string">"style"</span>;</span><br></pre></td></tr></table></figure><h3 id="3-reference"><a href="#3-reference" class="headerlink" title="3. reference"></a>3. reference</h3><p>Less ä¸­ æœ€å¼ºå¤§çš„ç‰¹æ€§ ä½¿ç”¨ å¼•å…¥çš„ Less æ–‡ä»¶ï¼Œä½†ä¸ä¼š ç¼–è¯‘å®ƒã€‚</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"><span class="keyword">@import</span> (reference) <span class="string">"bootstrap.less"</span>; </span><br><span class="line"></span><br><span class="line"><span class="selector-id">#wrap</span><span class="selector-pseudo">:extend(.navbar</span> <span class="keyword">all</span>)&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨@import (reference)å¯¼å…¥å¤–éƒ¨æ–‡ä»¶ï¼Œä½†ä¸ä¼šæ·»åŠ  æŠŠå¯¼å…¥çš„æ–‡ä»¶ ç¼–è¯‘åˆ°æœ€ç»ˆè¾“å‡ºä¸­ï¼Œåªå¼•ç”¨ã€‚</p></blockquote><h3 id="4-once"><a href="#4-once" class="headerlink" title="4. once"></a>4. once</h3><blockquote><p>@importè¯­å¥çš„é»˜è®¤è¡Œä¸ºã€‚è¿™è¡¨æ˜ç›¸åŒçš„æ–‡ä»¶åªä¼šè¢«å¯¼å…¥ä¸€æ¬¡ï¼Œè€Œéšåçš„å¯¼å…¥æ–‡ä»¶çš„é‡å¤ä»£ç éƒ½ä¸ä¼šè§£æã€‚</p></blockquote><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> (once) <span class="string">"foo.less"</span>;</span><br><span class="line"><span class="keyword">@import</span> (once) <span class="string">"foo.less"</span>; <span class="comment">// this statement will be ignored</span></span><br></pre></td></tr></table></figure><h3 id="5-multiple"><a href="#5-multiple" class="headerlink" title="5. multiple"></a>5. multiple</h3><blockquote><p>ä½¿ç”¨@import (multiple)å…è®¸å¯¼å…¥å¤šä¸ªåŒåæ–‡ä»¶ã€‚</p></blockquote><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Less */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// file: foo.less</span></span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// file: main.less</span></span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">"foo.less"</span>;</span><br><span class="line"><span class="keyword">@import</span> (multiple) <span class="string">"foo.less"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ç”Ÿæˆåçš„ CSS */</span></span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="1-åˆ¤æ–­ç±»å‹"><a href="#1-åˆ¤æ–­ç±»å‹" class="headerlink" title="1. åˆ¤æ–­ç±»å‹"></a>1. åˆ¤æ–­ç±»å‹</h3><ul><li>isnumber<blockquote><p>åˆ¤æ–­ç»™å®šçš„å€¼ æ˜¯å¦ æ˜¯ä¸€ä¸ªæ•°å­—ã€‚</p></blockquote></li></ul><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">isnumber</span>(<span class="number">#ff0</span>);     <span class="comment">// false</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(blue);     <span class="comment">// false</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(<span class="string">"string"</span>); <span class="comment">// false</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(<span class="number">1234</span>);     <span class="comment">// true</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(<span class="number">56px</span>);     <span class="comment">// true</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(<span class="number">7.8%</span>);     <span class="comment">// true</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(keyword);  <span class="comment">// false</span></span><br><span class="line"><span class="selector-tag">isnumber</span>(url(<span class="string">...</span>)); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><ul><li><p>iscolor</p><blockquote><p>åˆ¤æ–­ç»™å®šçš„å€¼ æ˜¯å¦ æ˜¯ä¸€ä¸ªé¢œè‰²ã€‚</p></blockquote></li><li><p>isurl</p><blockquote><p>åˆ¤æ–­ç»™å®šçš„å€¼ æ˜¯å¦ æ˜¯ä¸€ä¸ª url ã€‚</p></blockquote></li></ul><h3 id="2-é¢œè‰²æ“ä½œ"><a href="#2-é¢œè‰²æ“ä½œ" class="headerlink" title="2. é¢œè‰²æ“ä½œ"></a>2. é¢œè‰²æ“ä½œ</h3><ul><li><p>saturate</p><blockquote><p>å¢åŠ ä¸€å®šæ•°å€¼çš„é¢œè‰²é¥±å’Œåº¦ã€‚</p></blockquote></li><li><p>lighten</p><blockquote><p>å¢åŠ ä¸€å®šæ•°å€¼çš„é¢œè‰²äº®åº¦ã€‚</p></blockquote></li><li><p>darken</p><blockquote><p>é™ä½ä¸€å®šæ•°å€¼çš„é¢œè‰²äº®åº¦ã€‚</p></blockquote></li><li><p>fade</p><blockquote><p>ç»™é¢œè‰²è®¾å®šä¸€å®šæ•°å€¼çš„é€æ˜åº¦ã€‚</p></blockquote></li><li><p>mix</p><blockquote><p>æ ¹æ®æ¯”ä¾‹æ··åˆä¸¤ç§é¢œè‰²ã€‚</p></blockquote></li></ul><h3 id="3-æ•°å­¦å‡½æ•°"><a href="#3-æ•°å­¦å‡½æ•°" class="headerlink" title="3. æ•°å­¦å‡½æ•°"></a>3. æ•°å­¦å‡½æ•°</h3><ul><li><p>ceil</p><blockquote><p>å¢å‘ä¸Šå–æ•´ã€‚</p></blockquote></li><li><p>floor</p><blockquote><p>å‘ä¸‹å–æ•´ã€‚</p></blockquote></li><li><p>percentage</p><blockquote><p>å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºç™¾åˆ†æ¯”å­—ç¬¦ä¸²ã€‚</p></blockquote></li><li><p>round</p><blockquote><p>å››èˆäº”å…¥ã€‚</p></blockquote></li><li><p>sqrt</p><blockquote><p>è®¡ç®—ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ã€‚</p></blockquote></li></ul><ul><li><p>abs</p><blockquote><p>è®¡ç®—æ•°å­—çš„ç»å¯¹å€¼ï¼ŒåŸæ ·ä¿æŒå•ä½ã€‚</p></blockquote></li><li><p>pow</p><blockquote><p>è®¡ç®—ä¸€ä¸ªæ•°çš„ä¹˜æ–¹ã€‚</p></blockquote></li></ul><p><br><br><br></p><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><ul><li><code>/* */</code> CSSåŸç”Ÿæ³¨é‡Šï¼Œä¼šè¢«ç¼–è¯‘åœ¨ CSS æ–‡ä»¶ä¸­ã€‚</li><li><code>/   /</code> Lessæä¾›çš„ä¸€ç§æ³¨é‡Šï¼Œä¸ä¼šè¢«ç¼–è¯‘åœ¨ CSS æ–‡ä»¶ä¸­ã€‚ </li></ul><p><br><br><br></p><blockquote><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ç»§æ‰¿ç­‰ä¸€ç³»åˆ—çš„ï¼Œéœ€è¦å¤§å®¶å‚è€ƒå®˜ç½‘å»å­¦ä¹ äº†è§£<br></p></blockquote><blockquote><p>å‚è€ƒèµ„æ–™ï¼šLessä¸­æ–‡ç½‘ [<a href="http://lesscss.cn/]" target="_blank" rel="noopener">http://lesscss.cn/]</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;CSSçš„è¯­æ³•æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸ºäº†è®©ä¸¤ä¸ªå…ƒç´ ï¼ˆæ‹¥æœ‰åŒä¸€ä¸ªç±»åï¼‰çš„æ ·å¼ä¸ä¸€æ ·ï¼Œå°±éœ€è¦æ·»åŠ å¦å¤–ä¸€ä¸ªç±»æˆ–è€…åœ¨ä¹¦å†™CSSçš„æ—¶å€™å¤šåŠ å±‚çº§ã€‚è¿™æ ·å¾ˆä¸æ–¹
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>ES6åŸºç¡€çŸ¥è¯†</title>
    <link href="http://yoursite.com/2019/05/20/ES6%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2019/05/20/ES6åŸºç¡€çŸ¥è¯†/</id>
    <published>2019-05-20T07:09:15.000Z</published>
    <updated>2019-05-24T07:45:21.479Z</updated>
    
    <content type="html"><![CDATA[<p>#ES6åŸºç¡€çŸ¥è¯†ç‚¹<br>JavaScriptçš„ç»„æˆï¼šECMAScriptï¼ˆæ ¸å¿ƒï¼‰ã€DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ã€BOM ï¼ˆæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼‰<br>ECMAScriptï¼Œè§„å®šäº†è¯­è¨€çš„ç»„æˆéƒ¨åˆ†ï¼šè¯­æ³•ã€ç±»å‹ã€è¯­å¥ã€å…³é”®å­—ã€ä¿ç•™å­—ã€æ“ä½œç¬¦ã€å¯¹è±¡ã€‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„æ˜¯ES5ï¼Œä¹Ÿå°±æ˜¯ECMAScriptçš„ç¬¬5ç‰ˆæœ¬ã€‚é¡¾åæ€ä¹‰ï¼ŒES6å°±æ˜¯ECMAScriptçš„ç¬¬6ç‰ˆæœ¬ï¼Œåœ¨ES5çš„åŸºç¡€ä¸Šï¼Œåœ¨ä¿è¯å‘ä¸‹å…¼å®¹çš„å‰æä¸‹ï¼Œæä¾›å¤§é‡æ–°ç‰¹æ€§ã€‚</p><h2 id="let-constå‘½ä»¤"><a href="#let-constå‘½ä»¤" class="headerlink" title="let constå‘½ä»¤"></a>let constå‘½ä»¤</h2><h3 id="1-let"><a href="#1-let" class="headerlink" title="1. let"></a>1. let</h3><p>letç”¨äºå£°æ˜å˜é‡ï¼Œç”¨æ³•ç±»ä¼¼äºvar<br><span class="text-important">letä¸constçš„åŒºåˆ«å¦‚ä¸‹ï¼š</span></p><h5 id="1-1-letå£°æ˜çš„å˜é‡åªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—ä¸­æœ‰æ•ˆ"><a href="#1-1-letå£°æ˜çš„å˜é‡åªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—ä¸­æœ‰æ•ˆ" class="headerlink" title="1.1 letå£°æ˜çš„å˜é‡åªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—ä¸­æœ‰æ•ˆ"></a>1.1 letå£°æ˜çš„å˜é‡åªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—ä¸­æœ‰æ•ˆ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="keyword">var</span> a = <span class="number">10</span>;<span class="keyword">let</span> b = <span class="number">1</span>;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(a)<span class="comment">//==&gt;10</span></span><br><span class="line"><span class="built_in">console</span>.log(b)<span class="comment">//==&gt;æŠ¥é”™ï¼šb is not defined</span></span><br><span class="line"></span><br><span class="line">å…¸å‹æ¡ˆä¾‹ï¼š</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(i);<span class="comment">//==&gt;i is not defined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i &lt; <span class="number">10</span>;i++)&#123;</span><br><span class="line">a[i] =<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">a[<span class="number">6</span>]();<span class="comment">//==&gt;10   å˜é‡iæ˜¯varå£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆï¼Œæ¯æ¬¡å¾ªç¯ï¼Œæ–°çš„iä¼šè¦†ç›–æ‰æ—§çš„i</span></span><br></pre></td></tr></table></figure><h5 id="1-2-ä¸å­˜åœ¨å˜é‡æå‡-ä½¿ç”¨letæ—¶ï¼Œä¸€å®šè¦åœ¨å˜é‡å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™"><a href="#1-2-ä¸å­˜åœ¨å˜é‡æå‡-ä½¿ç”¨letæ—¶ï¼Œä¸€å®šè¦åœ¨å˜é‡å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™" class="headerlink" title="1.2 ä¸å­˜åœ¨å˜é‡æå‡,ä½¿ç”¨letæ—¶ï¼Œä¸€å®šè¦åœ¨å˜é‡å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™"></a>1.2 ä¸å­˜åœ¨å˜é‡æå‡,ä½¿ç”¨letæ—¶ï¼Œä¸€å®šè¦åœ¨å˜é‡å£°æ˜åä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo);<span class="comment">//===&gt;ReferenceError:foo is not defined</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">2</span>;</span><br><span class="line">&lt;notice&gt;ï¼šæ­¤æ—¶ä½¿ç”¨<span class="keyword">typeof</span>ä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ä¹‹ç™¾å®‰å…¨æ“ä½œ</span><br></pre></td></tr></table></figure><h5 id="1-3-æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰"><a href="#1-3-æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰" class="headerlink" title="1.3 æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰"></a>1.3 æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åªè¦å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨letå‘½ä»¤,å®ƒæ‰€å£°æ˜çš„å˜é‡å°±ç»‘å®šåœ¨è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—å¤–éƒ¨çš„å½±å“</span></span><br><span class="line"><span class="keyword">var</span> tmp = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">tmp = <span class="string">'abc'</span>;</span><br><span class="line"><span class="keyword">let</span> tmp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¦‚æœåŒºå—ä¸­å­˜åœ¨letå’Œconstå‘½ä»¤ï¼Œåˆ™è¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ä»ä¸€å¼€å§‹å°±å½¢æˆå°é—­ä½œç”¨åŸŸ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">x = y,y = <span class="number">2</span></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> [x,y];</span><br><span class="line">&#125;</span><br><span class="line">bar();</span><br></pre></td></tr></table></figure><h5 id="1-4-ä¸å…è®¸é‡å¤å£°æ˜"><a href="#1-4-ä¸å…è®¸é‡å¤å£°æ˜" class="headerlink" title="1.4 ä¸å…è®¸é‡å¤å£°æ˜"></a>1.4 ä¸å…è®¸é‡å¤å£°æ˜</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span>ä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡</span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> a = <span class="number">8</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123;</span><br><span class="line"><span class="keyword">let</span> arg;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123;</span><br><span class="line">&#123;<span class="keyword">let</span> arg;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-const"><a href="#2-const" class="headerlink" title="2. const"></a>2. const</h3><p>const ç”¨æ¥å£°æ˜å¸¸é‡ï¼Œä¸€æ—¦å£°æ˜ï¼Œå…¶å€¼å°±ä¸èƒ½æ”¹å˜</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> PI = <span class="number">3.14</span>;&lt;br/&gt;</span><br><span class="line">PI = <span class="number">3</span>;<span class="comment">//==&gt;TypeError:'PI' is read-only</span></span><br></pre></td></tr></table></figure><blockquote><p>2.1 const ä¸€æ—¦å£°æ˜å¸¸é‡ï¼Œå°±å¿…é¡»ç«‹å³åˆå§‹åŒ–ï¼Œä¸èƒ½ç•™åˆ°ä»¥åèµ‹å€¼ï¼›<br><br>2.2 const åªå£°æ˜ä¸èµ‹å€¼å°±ä¼šæŠ¥é”™ï¼›SyntaxError:missing = in const declaration<br><br>2.3 const ä½œç”¨åŸŸä¸letå‘½ä»¤ç›¸åŒï¼šåªåœ¨å£°æ˜æ‰€åœ¨çš„å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆ<br><br>2.4 const ä¹Ÿå­˜åœ¨æš‚æ—¶æ€§æ­»åŒºï¼Œåªèƒ½åœ¨å£°æ˜åä½¿ç”¨<br><br>2.5 const ä¸å¯é‡å¤å£°æ˜å¸¸é‡<br><br>2.6 å¯¹äºå¤åˆç±»å‹çš„å˜é‡ï¼Œå˜é‡åæŒ‡å‘åœ°å€ï¼Œä¸æŒ‡å‘æ•°æ®<br></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> foo = &#123;&#125;;</span><br><span class="line">foo.prop = <span class="number">123</span>;</span><br><span class="line"><span class="built_in">console</span>.log(foo.prop);<span class="comment">//==&gt;123</span></span><br><span class="line"></span><br><span class="line">æƒ³å¯¹å¯¹è±¡å†»ç»“ï¼Œä½¿ç”¨ <span class="built_in">Object</span>.freeze,å†»ç»“å¯¹è±¡æœ¬èº«ï¼Œå†»ç»“å¯¹è±¡çš„å±æ€§</span><br><span class="line"><span class="keyword">const</span> foo = <span class="built_in">Object</span>.freeze(&#123;&#125;);</span><br><span class="line">foo.prop = <span class="number">123</span>;<span class="comment">//==&gt;ä¸èµ·ä½œç”¨,å†»ç»“çš„å¯¹è±¡ï¼Œæ·»åŠ æ–°å±æ€§ä¸èµ·ä½œç”¨</span></span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h2><p><code>&lt;html&gt;&lt;/html&gt;</code> ä¼ ç»Ÿçš„å†™æ³•å°±æ˜¯ç”¨+è¿›è¡Œæ‹¼æ¥,å¹¶ä¸”è¿˜è¦è€ƒè™‘åˆ°å•å¼•å·ä¸åŒå¼•å·çš„äº¤æ›¿ä»¥åŠè½¬ä¹‰ï¼Œå¹¶ä¸”ä¸èƒ½æ¢è¡Œ<br>æ¨¡æ¿å­—ç¬¦ä¸²ç›´æ¥ä½¿ç”¨åå¼•å· `` å¯ä»¥å®šä¹‰å¤šè¡Œä»£ç ï¼Œå¹¶ä¸”åµŒå…¥å˜é‡<br><br><span class="text-important">ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²çš„æ³¨æ„å¦‚ä¸‹ï¼š</span></p><h5 id="2-1-è½¬ä¹‰"><a href="#2-1-è½¬ä¹‰" class="headerlink" title="2.1 ``è½¬ä¹‰  +``"></a>2.1 ``è½¬ä¹‰  +``</h5><h5 id="2-2-å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼ä»¥åŠç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¸­"><a href="#2-2-å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼ä»¥åŠç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¸­" class="headerlink" title="2.2 å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼ä»¥åŠç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¸­"></a>2.2 å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæ‰€æœ‰çš„ç©ºæ ¼ä»¥åŠç¼©è¿›éƒ½ä¼šè¢«ä¿ç•™åœ¨è¾“å‡ºä¸­</h5><h5 id="2-3-åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨"><a href="#2-3-åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨" class="headerlink" title="2.3 åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}"></a>2.3 åµŒå…¥å˜é‡ï¼Œéœ€è¦å°†å˜é‡åå†™åœ¨${}</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">name,value</span>)</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'name:'</span>+name+<span class="string">';value:'</span>+value);<span class="comment">//ä»¥å‰å†™æ³•</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`name:<span class="subst">$&#123;name&#125;</span>;value:<span class="subst">$&#123;value&#125;</span>`</span>);<span class="comment">//æ¨¡æ¿å­—ç¬¦ä¸²å†™æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-4-è°ƒç”¨å‡½æ•°"><a href="#2-4-è°ƒç”¨å‡½æ•°" class="headerlink" title="2.4 è°ƒç”¨å‡½æ•°"></a>2.4 è°ƒç”¨å‡½æ•°</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">'nihao'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="string">`everyone,<span class="subst">$&#123;fn()&#125;</span> yiyi`</span><span class="comment">//==&gt;everyone,nihao yiyi</span></span><br></pre></td></tr></table></figure><h5 id="2-5-å¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²"><a href="#2-5-å¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="2.5 ${}å¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²"></a>2.5 ${}å¤§æ‹¬å·ä¸­çš„å€¼ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§ä¸€èˆ¬çš„è§„åˆ™è½¬ä¸ºå­—ç¬¦ä¸²</h5><p>å¯¹è±¡ â€“ toString()<br><br>æ–¹æ³• â€“ æ‰§è¡Œæ–¹æ³•åå¾—åˆ°çš„å€¼</p><p><br><br><br></p><h2 id="å˜é‡çš„è§£æ„èµ‹å€¼"><a href="#å˜é‡çš„è§£æ„èµ‹å€¼" class="headerlink" title="å˜é‡çš„è§£æ„èµ‹å€¼"></a>å˜é‡çš„è§£æ„èµ‹å€¼</h2><p><span class="text-important">æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚</span>ç±»ä¼¼äºâ€œæ¨¡å¼åŒ¹é…â€</p><h3 id="1-æ•°ç»„è§£æ„èµ‹å€¼"><a href="#1-æ•°ç»„è§£æ„èµ‹å€¼" class="headerlink" title="1. æ•°ç»„è§£æ„èµ‹å€¼"></a>1. æ•°ç»„è§£æ„èµ‹å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a, b] = [<span class="number">1</span>, <span class="number">2</span>] <span class="comment">// let a = 1; let b = 2;</span></span><br><span class="line"><span class="keyword">let</span> [a, b, [c, d]] = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]] <span class="comment">// let a = 1; b = 2; let c = 3; let d = 4;</span></span><br><span class="line"><span class="keyword">let</span> [ , , third] = [<span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="string">"baz"</span>]; <span class="comment">// let third = "baz";</span></span><br><span class="line"><span class="keyword">let</span> [x, , y] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// let x = 1; y = 3;</span></span><br><span class="line"><span class="keyword">let</span> [head, ...tail] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]; <span class="comment">// let head = 1; let tail = [2, 3, 4];</span></span><br></pre></td></tr></table></figure><h5 id="1-1-è§£æ„ä¸æˆåŠŸï¼Œå€¼å°±ä¼šå˜æˆundefined"><a href="#1-1-è§£æ„ä¸æˆåŠŸï¼Œå€¼å°±ä¼šå˜æˆundefined" class="headerlink" title="1.1 è§£æ„ä¸æˆåŠŸï¼Œå€¼å°±ä¼šå˜æˆundefined"></a>1.1 è§£æ„ä¸æˆåŠŸï¼Œå€¼å°±ä¼šå˜æˆundefined</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, y, ...z] = [<span class="string">'1'</span>] <span class="comment">// let x = '1'; let y = undefined; let z = [];</span></span><br></pre></td></tr></table></figure><h5 id="1-2-å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼Œå°†ä¼šæŠ¥é”™ã€‚"><a href="#1-2-å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼Œå°†ä¼šæŠ¥é”™ã€‚" class="headerlink" title="1.2 å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼Œå°†ä¼šæŠ¥é”™ã€‚"></a>1.2 å¦‚æœç­‰å·çš„å³è¾¹ä¸æ˜¯æ•°ç»„ï¼Œå°†ä¼šæŠ¥é”™ã€‚</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">NaN</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> [foo] = &#123;&#125;;</span><br></pre></td></tr></table></figure><p><span class="text-important">åªè¦æŸç§æ•°æ®ç»“æ„å…·æœ‰ Iterator æ¥å£ï¼Œéƒ½å¯ä»¥é‡‡ç”¨æ•°ç»„å½¢å¼çš„è§£æ„èµ‹å€¼ã€‚</span></p><h5 id="1-3-è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼"><a href="#1-3-è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼" class="headerlink" title="1.3 è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼"></a>1.3 è§£æ„èµ‹å€¼å…è®¸æŒ‡å®šé»˜è®¤å€¼</h5><blockquote><p>åªæœ‰å½“ä¸€ä¸ªæ•°ç»„æˆå‘˜ä¸¥æ ¼ç­‰äº(===)undefinedï¼Œé»˜è®¤å€¼æ‰ä¼šç”Ÿæ•ˆ</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = []; <span class="comment">// x = 1</span></span><br><span class="line"><span class="keyword">let</span> [x, y = <span class="string">'aaa'</span>] = [<span class="number">1</span>, <span class="literal">undefined</span>]; <span class="comment">// x = 1; y = 'aaa'</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>] = [<span class="literal">null</span>]; <span class="comment">// x = 1</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœé»˜è®¤å€¼æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªè¡¨è¾¾å¼æ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œå³åªæœ‰åœ¨ç”¨åˆ°çš„æ—¶å€™ï¼Œæ‰ä¼šæ±‚å€¼</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'aaa'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [x = f()] = [<span class="number">1</span>];</span><br></pre></td></tr></table></figure><blockquote><p>é»˜è®¤å€¼å¯ä»¥å¼•ç”¨è§£æ„èµ‹å€¼çš„å…¶ä»–å˜é‡ï¼Œä½†è¯¥å˜é‡å¿…é¡»å·²ç»å£°æ˜</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [];     <span class="comment">// x=1; y=1</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [<span class="number">2</span>];    <span class="comment">// x=2; y=2</span></span><br><span class="line"><span class="keyword">let</span> [x = <span class="number">1</span>, y = x] = [<span class="number">1</span>, <span class="number">2</span>]; <span class="comment">// x=1; y=2</span></span><br><span class="line"><span class="keyword">let</span> [x = y, y = <span class="number">1</span>] = [];     <span class="comment">// ReferenceError: y is not defined</span></span><br></pre></td></tr></table></figure><h3 id="2-å¯¹è±¡è§£æ„èµ‹å€¼"><a href="#2-å¯¹è±¡è§£æ„èµ‹å€¼" class="headerlink" title="2. å¯¹è±¡è§£æ„èµ‹å€¼"></a>2. å¯¹è±¡è§£æ„èµ‹å€¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a, b&#125; = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125; <span class="comment">// a = 1; b = 2;</span></span><br></pre></td></tr></table></figure><blockquote><p>æ•°ç»„çš„è§£æ„ä¸å¯¹è±¡è§£æ„çš„ä¸åŒï¼šæ•°ç»„çš„å…ƒç´ æ˜¯<span class="text-important">æŒ‰æ¬¡åºæ’åˆ—</span>çš„ï¼Œå˜é‡çš„å–å€¼ç”±å®ƒçš„ä½ç½®å†³å®šï¼›è€Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸<span class="text-important">å±æ€§åŒå</span>ï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;sin, cos&#125; = <span class="built_in">Math</span></span><br></pre></td></tr></table></figure></p></blockquote><h5 id="2-1-å˜é‡åå’Œå±æ€§åä¸ä¸€è‡´"><a href="#2-1-å˜é‡åå’Œå±æ€§åä¸ä¸€è‡´" class="headerlink" title="2.1 å˜é‡åå’Œå±æ€§åä¸ä¸€è‡´"></a>2.1 å˜é‡åå’Œå±æ€§åä¸ä¸€è‡´</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">a</span>: m, <span class="attr">b</span>: n&#125; = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>&#125; <span class="comment">// m = 1; n = 2;</span></span><br></pre></td></tr></table></figure><p>a,bå…¶å®æ˜¯åŒ¹é…çš„æ¨¡å¼ï¼Œè€ŒçœŸæ­£çš„å˜é‡æ˜¯m,n<br>ä»¥å‰æ‰€å†™çš„<code>let {a, b} = {1, 2}</code>å…¶å®æ˜¯<code>let {a: a, b: b} = {a: 1, b: 2}</code>çš„ç¼©å†™</p><h5 id="2-2-åµŒå¥—è§£æ„"><a href="#2-2-åµŒå¥—è§£æ„" class="headerlink" title="2.2 åµŒå¥—è§£æ„"></a>2.2 åµŒå¥—è§£æ„</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> node = &#123;</span><br><span class="line">  loc: &#123;</span><br><span class="line">    start: &#123;</span><br><span class="line">      line: <span class="number">1</span>,</span><br><span class="line">      column: <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; loc, <span class="attr">loc</span>: &#123; start &#125;, <span class="attr">loc</span>: &#123; <span class="attr">start</span>: &#123; line &#125;&#125; &#125; = node;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç æœ‰ä¸‰æ¬¡è§£æ„èµ‹å€¼ï¼Œåˆ†åˆ«æ˜¯å¯¹locã€startã€lineä¸‰ä¸ªå±æ€§çš„è§£æ„èµ‹å€¼ã€‚æ³¨æ„ï¼Œæœ€åä¸€æ¬¡å¯¹lineå±æ€§çš„è§£æ„èµ‹å€¼ä¹‹ä¸­ï¼Œåªæœ‰lineæ˜¯å˜é‡ï¼Œlocå’Œstartéƒ½æ˜¯æ¨¡å¼ï¼Œä¸æ˜¯å˜é‡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"></span><br><span class="line">(&#123; <span class="attr">foo</span>: obj.prop, <span class="attr">bar</span>: arr[<span class="number">0</span>] &#125; = &#123; <span class="attr">foo</span>: <span class="number">123</span>, <span class="attr">bar</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure><h5 id="2-3-å¯¹è±¡è§£æ„ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼èµ·ä½œç”¨çš„æ¡ä»¶ä¹Ÿæ˜¯ä¸¥æ ¼ç­‰äºï¼ˆ-ï¼‰undefinedæ—¶"><a href="#2-3-å¯¹è±¡è§£æ„ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼èµ·ä½œç”¨çš„æ¡ä»¶ä¹Ÿæ˜¯ä¸¥æ ¼ç­‰äºï¼ˆ-ï¼‰undefinedæ—¶" class="headerlink" title="2.3 å¯¹è±¡è§£æ„ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼èµ·ä½œç”¨çš„æ¡ä»¶ä¹Ÿæ˜¯ä¸¥æ ¼ç­‰äºï¼ˆ===ï¼‰undefinedæ—¶"></a>2.3 å¯¹è±¡è§£æ„ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼èµ·ä½œç”¨çš„æ¡ä»¶ä¹Ÿæ˜¯ä¸¥æ ¼ç­‰äºï¼ˆ===ï¼‰undefinedæ—¶</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;<span class="attr">x</span>: y = <span class="number">5</span>, <span class="attr">z</span>: m = <span class="number">1</span>, w = <span class="number">3</span>&#125; = &#123;<span class="literal">null</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="3-è§£æ„æ³¨æ„çš„ç‚¹âš ï¸"><a href="#3-è§£æ„æ³¨æ„çš„ç‚¹âš ï¸" class="headerlink" title="3. è§£æ„æ³¨æ„çš„ç‚¹âš ï¸"></a>3. è§£æ„æ³¨æ„çš„ç‚¹âš ï¸</h3><h5 id="3-1-å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼"><a href="#3-1-å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼" class="headerlink" title="3.1 å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼"></a>3.1 å°†ä¸€ä¸ªå·²ç»å£°æ˜çš„å˜é‡ç”¨äºè§£æ„èµ‹å€¼</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x;</span><br><span class="line">&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;; <span class="comment">// ä¼šæŠ¥é”™ï¼Œå› ä¸º&#123;x&#125;ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªä»£ç å—</span></span><br><span class="line">(&#123;x&#125; = &#123;<span class="attr">x</span>: <span class="number">1</span>&#125;);</span><br></pre></td></tr></table></figure><h5 id="3-2-è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡å"><a href="#3-2-è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡å" class="headerlink" title="3.2 è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡å"></a>3.2 è§£æ„èµ‹å€¼å…è®¸ç­‰å·å·¦è¾¹çš„æ¨¡å¼ä¹‹ä¸­ï¼Œä¸æ”¾ç½®ä»»ä½•å˜é‡å</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(&#123;&#125; = [<span class="literal">true</span>, <span class="literal">false</span>]);</span><br><span class="line">(&#123;&#125; = <span class="string">'abc'</span>);</span><br><span class="line">(&#123;&#125; = []);</span><br></pre></td></tr></table></figure><p>ä¸ä¼šæŠ¥é”™ï¼Œå¯ä»¥æ‰§è¡Œï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰</p><h5 id="3-3-ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„"><a href="#3-3-ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„" class="headerlink" title="3.3 ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„"></a>3.3 ç”±äºæ•°ç»„æœ¬è´¨æ˜¯ç‰¹æ®Šçš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥å¯¹æ•°ç»„è¿›è¡Œå¯¹è±¡å±æ€§çš„è§£æ„</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj =&#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">name</span>: obj.name, <span class="attr">index</span>: arr[<span class="number">0</span>]&#125; = &#123;<span class="attr">name</span>: <span class="string">'zhaoshijuan'</span>, <span class="attr">index</span>: <span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span> : first, [arr.length - <span class="number">1</span>] : last&#125; = arr;</span><br><span class="line"><span class="comment">// first = 1; last = 3;</span></span><br></pre></td></tr></table></figure><blockquote><p>é™¤äº†æ•°ç»„ï¼Œå¯¹è±¡å¯ä»¥è§£æ„èµ‹å€¼ï¼Œè¿˜æœ‰å­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œæ•°å€¼ï¼Œå‡½æ•°å‚æ•°ç­‰çš„è§£æ„èµ‹å€¼ï¼Œéœ€è¦å¤§å®¶è‡ªå·±å»å­¦ä¹ ã€‚</p></blockquote><p><br><br><br></p><h2 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h2><p><span class="text-important">å®šä¹‰å‡½æ•°: var f = v =&gt; v;</span>ç›¸å½“äº: var f = function(v){return v;}</p><h5 id="1-æ— å‚æ•°æˆ–è€…éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨åœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†"><a href="#1-æ— å‚æ•°æˆ–è€…éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨åœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†" class="headerlink" title="1. æ— å‚æ•°æˆ–è€…éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨åœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†"></a>1. æ— å‚æ•°æˆ–è€…éœ€è¦å¤šä¸ªå‚æ•°ï¼Œä½¿ç”¨åœ†æ‹¬å·ä»£è¡¨å‚æ•°éƒ¨åˆ†</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function"><span class="params">()</span> =&gt;</span><span class="number">5</span>;</span><br><span class="line">ç›¸å½“äºï¼š<span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">5</span>;&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">num1,num2</span>) =&gt;</span> num1+num2;</span><br><span class="line">ç›¸å½“äºï¼š<span class="keyword">var</span> f = <span class="function"><span class="keyword">function</span>(<span class="params">num1,num2</span>)</span>&#123;<span class="keyword">return</span> num1+num2;&#125;</span><br></pre></td></tr></table></figure><h5 id="2-ä»£ç å—éƒ¨åˆ†å¤šäºä¸€è¡Œä»£ç ï¼Œä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹èµ·æ¥"><a href="#2-ä»£ç å—éƒ¨åˆ†å¤šäºä¸€è¡Œä»£ç ï¼Œä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹èµ·æ¥" class="headerlink" title="2. ä»£ç å—éƒ¨åˆ†å¤šäºä¸€è¡Œä»£ç ï¼Œä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹èµ·æ¥"></a>2. ä»£ç å—éƒ¨åˆ†å¤šäºä¸€è¡Œä»£ç ï¼Œä½¿ç”¨å¤§æ‹¬å·åŒ…è£¹èµ·æ¥</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f = <span class="function">(<span class="params">num1,num2</span>) =&gt;</span> &#123;<span class="keyword">return</span> num1+num2;&#125;</span><br></pre></td></tr></table></figure><h5 id="3-å¤§æ‹¬å·æ˜¯è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·"><a href="#3-å¤§æ‹¬å·æ˜¯è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·" class="headerlink" title="3. å¤§æ‹¬å·æ˜¯è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·"></a>3. å¤§æ‹¬å·æ˜¯è¢«è§£é‡Šä¸ºä»£ç å—ï¼Œæ‰€ä»¥å¦‚æœç®­å¤´å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»åœ¨å¯¹è±¡å¤–é¢åŠ ä¸Šæ‹¬å·</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> getTempItem = <span class="function"><span class="params">id</span> =&gt;</span> (&#123;<span class="attr">id</span>:id,<span class="attr">name</span>:<span class="string">'Temp'</span>&#125;);</span><br></pre></td></tr></table></figure><h5 id="4-ä½œç”¨ï¼šç®€åŒ–å›è°ƒå‡½æ•°"><a href="#4-ä½œç”¨ï¼šç®€åŒ–å›è°ƒå‡½æ•°" class="headerlink" title="4. ä½œç”¨ï¼šç®€åŒ–å›è°ƒå‡½æ•°"></a>4. ä½œç”¨ï¼šç®€åŒ–å›è°ƒå‡½æ•°</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = values.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a-b;&#125;);</span><br><span class="line"><span class="keyword">var</span> result = values.sort(<span class="function">(<span class="params">a,b</span>) =&gt;</span> a-b);</span><br></pre></td></tr></table></figure><h5 id="5-restå‚æ•°ä¸ç®­å¤´å‡½æ•°çš„ç»“åˆ"><a href="#5-restå‚æ•°ä¸ç®­å¤´å‡½æ•°çš„ç»“åˆ" class="headerlink" title="5. restå‚æ•°ä¸ç®­å¤´å‡½æ•°çš„ç»“åˆ"></a>5. restå‚æ•°ä¸ç®­å¤´å‡½æ•°çš„ç»“åˆ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = <span class="function">(<span class="params">...nums</span>) =&gt;</span> nums;</span><br><span class="line">numbers(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>);<span class="comment">//==&gt;[1,2,3,4,5,6]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> headAndTail = <span class="function">(<span class="params">head,...tail</span>) =&gt;</span> [head,tail]</span><br><span class="line">headAndTail(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);<span class="comment">//==&gt;[1,[2,3,4,5]]</span></span><br></pre></td></tr></table></figure><h3 id="âš ï¸æ³¨æ„ï¼š"><a href="#âš ï¸æ³¨æ„ï¼š" class="headerlink" title="âš ï¸æ³¨æ„ï¼š"></a>âš ï¸æ³¨æ„ï¼š</h3><p>1âƒ£ï¸å‡½æ•°ä½“å†…çš„thiså¯¹è±¡å°±æ˜¯å®šä¹‰æ—¶æ‰€åœ¨çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„å¯¹è±¡<br><br>2âƒ£ï¸ä¸å¯ä»¥å½“åšæ„é€ å‡½æ•°<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'id'</span>,<span class="keyword">this</span>.id);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è¿™ä¸²ä»£ç åªæœ‰ä¸€ä¸ªthisï¼Œä¹Ÿå°±æ˜¯fooçš„this,ç®­å¤´å‡½æ•°æ˜¯æ²¡æœ‰thisçš„ï¼Œæ‰€ä»¥å°±ä¸èƒ½å½“åšæ„é€ å‡½æ•°&lt;br/&gt;</span></span><br></pre></td></tr></table></figure><p>3âƒ£ï¸ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨restå‚æ•°ä»£æ›¿<br><br>//é™¤äº†thisï¼Œargumentsã€superã€new.targetåœ¨ç®­å¤´å‡½æ•°ä¸­ä¹Ÿæ˜¯ä¸å­˜åœ¨çš„</p><p><br><br><br></p><h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>Symbol ç‹¬ä¸€æ— äºŒçš„å€¼ï¼Œæ˜¯jsè¯­è¨€çš„ç¬¬7ç§æ•°æ®ç±»å‹ ï¼ˆUndefined,Null,Boolean,String,Number,Objectï¼‰</p><h3 id="1-ä½¿ç”¨æ³¨æ„"><a href="#1-ä½¿ç”¨æ³¨æ„" class="headerlink" title="1. ä½¿ç”¨æ³¨æ„"></a>1. ä½¿ç”¨æ³¨æ„</h3><h5 id="1-1-symbolå€¼é€šè¿‡symbolå‡½æ•°ç”Ÿæˆ-symbolå€¼ä¸æ˜¯å¯¹è±¡"><a href="#1-1-symbolå€¼é€šè¿‡symbolå‡½æ•°ç”Ÿæˆ-symbolå€¼ä¸æ˜¯å¯¹è±¡" class="headerlink" title="1.1 symbolå€¼é€šè¿‡symbolå‡½æ•°ç”Ÿæˆ,symbolå€¼ä¸æ˜¯å¯¹è±¡"></a>1.1 symbolå€¼é€šè¿‡symbolå‡½æ•°ç”Ÿæˆ,symbolå€¼ä¸æ˜¯å¯¹è±¡</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> s);<span class="comment">//==&gt;symbol</span></span><br></pre></td></tr></table></figure><h5 id="1-2-å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç”¨äºå¯¹symbolå®ä¾‹çš„æè¿°"><a href="#1-2-å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç”¨äºå¯¹symbolå®ä¾‹çš„æè¿°" class="headerlink" title="1.2 å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç”¨äºå¯¹symbolå®ä¾‹çš„æè¿°"></a>1.2 å¯ä»¥æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç”¨äºå¯¹symbolå®ä¾‹çš„æè¿°</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s1 = <span class="built_in">Symbol</span>(<span class="string">'foo'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(s1);<span class="comment">//==&gt;Symbol(foo)</span></span><br><span class="line"><span class="built_in">console</span>.log(s1.toString);<span class="comment">//==&gt;'Symbol(foo)'</span></span><br></pre></td></tr></table></figure><h5 id="1-3-Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—"><a href="#1-3-Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—" class="headerlink" title="1.3 Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—"></a>1.3 Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹çš„å€¼è¿›è¡Œè¿ç®—</h5><h5 id="1-4-Symbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²"><a href="#1-4-Symbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²" class="headerlink" title="1.4 Symbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²"></a>1.4 Symbolå€¼å¯ä»¥æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sym = <span class="built_in">Symbol</span>(<span class="string">'my symbol'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>(sym));<span class="comment">//==&gt;'Symbol('my symbol')'</span></span><br><span class="line"><span class="built_in">console</span>.log(sym.toString());<span class="comment">//==&gt;'Symbol('my symbol')'</span></span><br></pre></td></tr></table></figure><h5 id="1-5-Symbolå€¼å¯ä»¥è½¬ä¸ºBooleanå€¼"><a href="#1-5-Symbolå€¼å¯ä»¥è½¬ä¸ºBooleanå€¼" class="headerlink" title="1.5 Symbolå€¼å¯ä»¥è½¬ä¸ºBooleanå€¼"></a>1.5 Symbolå€¼å¯ä»¥è½¬ä¸ºBooleanå€¼</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sym1 = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(sym1));<span class="comment">//==&gt;true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Boolean</span>(!sym1));<span class="comment">//==&gt;false</span></span><br></pre></td></tr></table></figure><h3 id="2-ä½œä¸ºå±æ€§åçš„Symbol"><a href="#2-ä½œä¸ºå±æ€§åçš„Symbol" class="headerlink" title="2. ä½œä¸ºå±æ€§åçš„Symbol"></a>2. ä½œä¸ºå±æ€§åçš„Symbol</h3><p>æ¯ä¸€ä¸ªsymbolå€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ï¼Œå› æ­¤ä¸ä¼šå‡ºç°åŒåçš„å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a[mySymbol] = <span class="string">'helloWorld'</span>; </span><br><span class="line"><span class="keyword">var</span> a = &#123;[mySymbol]:<span class="string">'helloWorld'</span>&#125;;</span><br></pre></td></tr></table></figure><h5 id="2-1-Symbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œè¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­"><a href="#2-1-Symbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œè¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­" class="headerlink" title="2.1 Symbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œè¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­"></a>2.1 Symbolå€¼ä½œä¸ºå¯¹è±¡å±æ€§åæ—¶ä¸èƒ½ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼Œè¦æ”¾åœ¨æ–¹æ‹¬å·ä¸­</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">var</span> a = &#123;&#125;;</span><br><span class="line">a.mySymbol = <span class="string">'helloWorld'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a[mySymbol]);<span class="comment">//==&gt;undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(a[<span class="string">'mySymbol'</span>]);<span class="comment">//==&gt;'helloWorld'</span></span><br><span class="line"><span class="comment">//æ­¤æ—¶ï¼Œaçš„å±æ€§åç›¸å½“äºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªSymbolå€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> obj = &#123;[s]:<span class="function"><span class="keyword">function</span>(<span class="params">arg</span>)</span>&#123;...&#125;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj[s]);<span class="comment">//==&gt;function(arg)&#123;...&#125;</span></span><br></pre></td></tr></table></figure><h5 id="2-2-Symbolç±»å‹è¿˜å¯ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚"><a href="#2-2-Symbolç±»å‹è¿˜å¯ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚" class="headerlink" title="2.2 Symbolç±»å‹è¿˜å¯ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚"></a>2.2 Symbolç±»å‹è¿˜å¯ç”¨äºå®šä¹‰ä¸€ç»„å¸¸é‡ï¼Œä¿è¯è¿™ç»„å¸¸é‡çš„å€¼éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚</h5><h5 id="2-3-æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"><a href="#2-3-æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²" class="headerlink" title="2.3 æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²"></a>2.3 æ¶ˆé™¤é­”æœ¯å­—ç¬¦ä¸²</h5><p>é­”æœ¯å­—ç¬¦ä¸²ï¼šåœ¨ä»£ç ä¹‹ä¸­å¤šæ¬¡å‡ºç°ã€ä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„æŸä¸€ä¸ªå…·ä½“çš„å­—ç¬¦ä¸²æˆ–æ•°å€¼<br>ä½¿ç”¨åŒä¸€ä¸ªSymbol</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>.for()</span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a === b);<span class="comment">//==&gt;true</span></span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p><span class="text-important">æ‰€è°“Promise</span>ï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ª<code>å®¹å™¨</code>ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promise æä¾›ç»Ÿä¸€çš„ APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚</p><h3 id="1-Promiseç‰¹ç‚¹"><a href="#1-Promiseç‰¹ç‚¹" class="headerlink" title="1. Promiseç‰¹ç‚¹"></a>1. Promiseç‰¹ç‚¹</h3><blockquote><p>1.å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œçš„å½±å“ï¼Œä¸‰ç§çŠ¶æ€ï¼špending(è¿›è¡Œä¸­),fufilled(å·²æˆåŠŸ),rejected(å·²å¤±è´¥)<br><br>2.ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ã€‚çŠ¶æ€çš„ä¸¤ç§æ”¹å˜ï¼špendingâ€”&gt;fulfilled,pendingâ€”&gt;rejected</p></blockquote><h3 id="2-promiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆpromiseå®ä¾‹"><a href="#2-promiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆpromiseå®ä¾‹" class="headerlink" title="2. promiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆpromiseå®ä¾‹"></a>2. promiseå¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆpromiseå®ä¾‹</h3><p>Promiseæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ... some code</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="comment">/* å¼‚æ­¥æ“ä½œæˆåŠŸ */</span>)&#123;</span><br><span class="line">    resolve(value);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    reject(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//resolve å°†Promiseå¯¹è±¡çš„çŠ¶æ€pending---&gt;fulfilledï¼Œ</span></span><br><span class="line"><span class="comment">//reject  å°†Promiseå¯¹è±¡çš„çŠ¶æ€pending---&gt;rejected</span></span><br></pre></td></tr></table></figure><h3 id="3-thenæ–¹æ³•æŒ‡å®šresolvedå’Œrejectedå›è°ƒ-thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹-å› æ­¤å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•"><a href="#3-thenæ–¹æ³•æŒ‡å®šresolvedå’Œrejectedå›è°ƒ-thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹-å› æ­¤å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•" class="headerlink" title="3. thenæ–¹æ³•æŒ‡å®šresolvedå’Œrejectedå›è°ƒ,thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹,å› æ­¤å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•"></a>3. thenæ–¹æ³•æŒ‡å®šresolvedå’Œrejectedå›è°ƒ,thenæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„Promiseå®ä¾‹,å› æ­¤å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'sucess  resolved'</span>)</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'failure rejected(å¯é€‰)'</span>)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(resolve, ms, <span class="string">'done'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">timeout(<span class="number">100</span>).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//é“¾å¼å†™æ³•</span></span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'sucess  resolved'</span>)</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'failure rejected(å¯é€‰)'</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'then==&gt;sucess'</span>);</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'then==&gt;failure'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="4-Promise-æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯Promiseã€‚ç„¶åï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥resolvedæœ€åè¾“å‡ºã€‚"><a href="#4-Promise-æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯Promiseã€‚ç„¶åï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥resolvedæœ€åè¾“å‡ºã€‚" class="headerlink" title="4. Promise æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯Promiseã€‚ç„¶åï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥resolvedæœ€åè¾“å‡ºã€‚"></a>4. Promise æ–°å»ºåç«‹å³æ‰§è¡Œï¼Œæ‰€ä»¥é¦–å…ˆè¾“å‡ºçš„æ˜¯Promiseã€‚ç„¶åï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå°†åœ¨å½“å‰è„šæœ¬æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥resolvedæœ€åè¾“å‡ºã€‚</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise'</span>);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'resolved'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'Hi!'</span>);</span><br><span class="line"><span class="comment">// Promise</span></span><br><span class="line"><span class="comment">// Hi!</span></span><br><span class="line"><span class="comment">// resolved</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise===&gt;p1'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Promise===&gt;p2'</span>);</span><br><span class="line">  resolve(p1);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'outside'</span>);</span><br></pre></td></tr></table></figure><p>p1çš„çŠ¶æ€å°±ä¼šä¼ é€’ç»™p2ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œp1çš„çŠ¶æ€å†³å®šäº†p2çš„çŠ¶æ€ã€‚å¦‚æœp1çš„çŠ¶æ€æ˜¯pendingï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°±ä¼šç­‰å¾…p1çš„çŠ¶æ€æ”¹å˜ï¼›å¦‚æœp1çš„çŠ¶æ€å·²ç»æ˜¯resolvedæˆ–è€…rejectedï¼Œé‚£ä¹ˆp2çš„å›è°ƒå‡½æ•°å°†ä¼šç«‹åˆ»æ‰§è¡Œ</p><h3 id="5-catchæ–¹æ³•æ˜¯ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°"><a href="#5-catchæ–¹æ³•æ˜¯ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°" class="headerlink" title="5. catchæ–¹æ³•æ˜¯ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°"></a>5. catchæ–¹æ³•æ˜¯ç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getJSON(<span class="string">'/posts.json'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">posts</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å¤„ç† getJSON å’Œ å‰ä¸€ä¸ªå›è°ƒå‡½æ•°è¿è¡Œæ—¶å‘ç”Ÿçš„é”™è¯¯</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'å‘ç”Ÿé”™è¯¯ï¼'</span>, error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>getJSONæ–¹æ³•è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸ºresolvedï¼Œåˆ™ä¼šè°ƒç”¨thenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸ºrejectedï¼Œå°±ä¼šè°ƒç”¨catchæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«catchæ–¹æ³•æ•è·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'test'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Error: test</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœPromiseçŠ¶æ€å·²ç»å˜æˆresolvedï¼Œå†æŠ›å‡ºé”™è¯¯æ˜¯æ— æ•ˆçš„ã€‚</span></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">resolve(<span class="string">'ok'</span>);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'test'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>) </span>&#123; <span class="built_in">console</span>.log(value) &#125;)</span><br><span class="line">.catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123; <span class="built_in">console</span>.log(error) &#125;);</span><br><span class="line"><span class="comment">// ok</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€œå†’æ³¡â€æ€§è´¨ï¼Œä¼šä¸€ç›´å‘åä¼ é€’ï¼Œç›´åˆ°è¢«æ•è·ä¸ºæ­¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé”™è¯¯æ€»æ˜¯ä¼šè¢«ä¸‹ä¸€ä¸ªcatchè¯­å¥æ•è·ã€‚</span></span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p1==&gt;sucess'</span>)</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'test'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p2==&gt;sucess'</span>);</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'test'</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p3==&gt;sucess'</span>);</span><br><span class="line">&#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(error);<span class="comment">//æ•è·å‰ä¸‰ä¸ªPromiseå®ä¾‹çš„é”™è¯¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="6-Promise-all-ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹"><a href="#6-Promise-all-ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹" class="headerlink" title="6. Promise.all() ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹"></a>6. Promise.all() ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p1'</span>);</span><br><span class="line">resolve(<span class="string">'promise1'</span>);</span><br><span class="line">&#125;),p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p2'</span>);</span><br><span class="line">resolve(<span class="string">'promise2'</span>);</span><br><span class="line">&#125;),p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve,reject</span>)</span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'p3'</span>);</span><br><span class="line">resolve(<span class="string">'promise3'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> p = <span class="built_in">Promise</span>.all([p1,p2,p3]);</span><br><span class="line"><span class="built_in">console</span>.log(p);</span><br></pre></td></tr></table></figure><p>p1ã€p2ã€p3åªè¦æœ‰ä¸€ä¸ªrejectedï¼Œpå°±ä¼šå˜æˆrejected;åªæœ‰å…¨éƒ¨æ˜¯fulfilled,pæ‰ä¼šå˜æˆfulfilled</p><h3 id="7-Promise-race-å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹"><a href="#7-Promise-race-å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹" class="headerlink" title="7. Promise.race()  å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹"></a>7. Promise.race()  å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> p = <span class="built_in">Promise</span>.race([p1,p2,p3]);</span><br><span class="line"><span class="comment">//åªè¦p1,p2,p3æœ‰ä¸€ä¸ªç‡å…ˆæ”¹å˜çŠ¶æ€,på°±ä¼šè·Ÿç€æ”¹å˜ã€‚ç‡å…ˆæ”¹å˜çš„Promiseå®ä¾‹çš„è¿”å›å€¼,å°±ä¼ é€’ç»™pçš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="built_in">Promise</span>.race([</span><br><span class="line">  fetch(<span class="string">'/resource-that-may-take-a-while'</span>),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'request timeout'</span>)), <span class="number">5000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">]);</span><br><span class="line">p.then(<span class="function"><span class="params">response</span> =&gt;</span> <span class="built_in">console</span>.log(response));</span><br><span class="line">p.catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error));</span><br></pre></td></tr></table></figure><h3 id="8-Promise-reject-å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºrejected"><a href="#8-Promise-reject-å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºrejected" class="headerlink" title="8. Promise.reject() å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºrejected"></a>8. Promise.reject() å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºrejected</h3><h3 id="9-Promise-resolve-å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºresolved"><a href="#9-Promise-resolve-å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºresolved" class="headerlink" title="9. Promise.resolve() å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºresolved"></a>9. Promise.resolve() å°†å¯¹è±¡è½¬ä¸ºPromiseå¯¹è±¡ï¼Œå¹¶ä¸”çŠ¶æ€ä¸ºresolved</h3><p><br><br><br></p><h2 id="Moduleè¯­æ³•"><a href="#Moduleè¯­æ³•" class="headerlink" title="Moduleè¯­æ³•"></a>Moduleè¯­æ³•</h2><blockquote><p>å‰è¨€ï¼šåªä»‹ç»moduleçš„è¯­æ³•ä»¥åŠä½¿ç”¨è¿‡ç¨‹ä¸­çš„æ³¨æ„äº‹é¡¹ï¼Œä¸ä¼šä»‹ç»åŸç†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»ç ”ç©¶ã€‚</p></blockquote><p>ç”±äºåŸç”ŸJavaScriptæ²¡æœ‰æ¨¡å—è¿™ä¸€ä¸ªæ¦‚å¿µï¼Œå¯¹äºè¿‡é•¿çš„JavaScriptæ–‡ä»¶è€Œè¨€ï¼Œåªèƒ½æ‹†åˆ†ï¼Œä½†æ˜¯å½¼æ­¤ä¹‹é—´åˆä¸èƒ½å»ºç«‹è”ç³»ï¼ˆé™¤äº†ä½¿ç”¨windowé¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•æ˜¯ä¸æå€¡çš„ï¼‰ï¼ŒåæœŸç¤¾åŒºæ‰§è¡Œäº†ä¸€äº›æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œä¸»è¦å°±æ˜¯CommonJsä¸AMDã€‚CommonJsä¸»è¦åº”ç”¨äºæœåŠ¡å™¨ç«¯ï¼ˆNodeJsï¼‰ï¼›AMDä¸»è¦ç”¨äºå®¢æˆ·ç«¯ï¼ˆJavascriptï¼‰ï¼Œå…¶ä¸­æœ€å¸¸ç”¨çš„å°±æ˜¯RequireJsã€‚<br><br>ES6çš„moduleå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ï¼Œä¹Ÿå¯ä»¥åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸”è¯­æ³•ä¸€è‡´ã€‚<br><br>ES6 çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡ä½ æœ‰æ²¡æœ‰åœ¨æ¨¡å—å¤´éƒ¨åŠ ä¸Šâ€use strictâ€ã€ŒES5çš„ä¸œè¥¿ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»çœ‹çœ‹ã€ã€‚ES6æ¨¡å—ä¸­çš„thisæŒ‡å‘undefinedã€‚</p><blockquote><p>æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexportå’Œimportã€‚exportå‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimportå‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½</p></blockquote><h3 id="1-export"><a href="#1-export" class="headerlink" title="1. export"></a>1. export</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> b = <span class="string">'zhaoshijuan'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> c = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>ç­‰ä»·äº</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'zhaoshijuan'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;a, b, c&#125;</span><br></pre></td></tr></table></figure><h5 id="1-1-åˆ«å"><a href="#1-1-åˆ«å" class="headerlink" title="1.1 åˆ«å"></a>1.1 åˆ«å</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">v1</span>(<span class="params"></span>) </span>&#123; ... &#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">v2</span>(<span class="params"></span>) </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  v1 <span class="keyword">as</span> streamV1,</span><br><span class="line">  v2 <span class="keyword">as</span> streamV2,</span><br><span class="line">  v2 <span class="keyword">as</span> streamLatestVersion</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>as</code>å…³é”®å­—ï¼Œé‡æ–°å‘½åäº†å‡½æ•°v1å’Œv2çš„å¯¹å¤–æ¥å£ã€‚</p><h5 id="1-2-exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»"><a href="#1-2-exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»" class="headerlink" title="1.2 exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»"></a>1.2 exportå‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™,ç›´æ¥è¾“å‡º1ï¼Œ1åªæ˜¯ä¸€ä¸ªå€¼ï¼Œä¸æ˜¯æ¥å£</span></span><br><span class="line"><span class="keyword">export</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™ï¼Œé€šè¿‡å˜é‡mï¼Œè¿˜æ˜¯è¾“å‡º1</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> m;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†™æ³•ä¸€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> m = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;m&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†™æ³•ä¸‰</span></span><br><span class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;n <span class="keyword">as</span> m&#125;;</span><br></pre></td></tr></table></figure><h5 id="1-3-exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚"><a href="#1-3-exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚" class="headerlink" title="1.3 exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚"></a>1.3 exportå‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚</h5><p>å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œimportå‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚è¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº† ES6 æ¨¡å—çš„è®¾è®¡åˆè¡·ã€‚</p><h3 id="2-import"><a href="#2-import" class="headerlink" title="2. import"></a>2. import</h3><p>ä½¿ç”¨exportå‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»– JS æ–‡ä»¶å°±å¯ä»¥é€šè¿‡importå‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;firstName, lastName, year&#125; <span class="keyword">from</span> <span class="string">'./profile.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setName</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line">  element.textContent = firstName + <span class="string">' '</span> + lastName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>form</code>åé¢çš„æ˜¯æ¨¡å—çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ã€‚.jsçš„åç¼€å¯ä»¥çœç•¥ã€‚</p><h5 id="2-1-å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒ"><a href="#2-1-å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒ" class="headerlink" title="2.1 å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒ"></a>2.1 å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒ</h5><h5 id="2-2-åˆ«åä½¿ç”¨as"><a href="#2-2-åˆ«åä½¿ç”¨as" class="headerlink" title="2.2 åˆ«åä½¿ç”¨as"></a>2.2 åˆ«åä½¿ç”¨as</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lastName <span class="keyword">as</span> surname &#125; <span class="keyword">from</span> <span class="string">'./profile.js'</span>;</span><br></pre></td></tr></table></figure><h5 id="2-3-importå‘½åè¾“å…¥çš„å˜é‡æ˜¯åªè¯»"><a href="#2-3-importå‘½åè¾“å…¥çš„å˜é‡æ˜¯åªè¯»" class="headerlink" title="2.3 importå‘½åè¾“å…¥çš„å˜é‡æ˜¯åªè¯»"></a>2.3 importå‘½åè¾“å…¥çš„å˜é‡æ˜¯åªè¯»</h5><p>å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å¯¹è±¡é‡Œé¢çš„å±æ€§æ˜¯å¯å†™çš„ï¼Œä½†æ˜¯ä¸åˆ©äºåæœŸçš„æ’é”™ä»€ä¹ˆã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a&#125; <span class="keyword">from</span> <span class="string">'./xxx.js'</span></span><br><span class="line">a.foo = <span class="string">'hello'</span>; <span class="comment">// åˆæ³•æ“ä½œ</span></span><br></pre></td></tr></table></figure><h5 id="2-4-å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥importè¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡"><a href="#2-4-å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥importè¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡" class="headerlink" title="2.4 å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥importè¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡"></a>2.4 å¦‚æœå¤šæ¬¡é‡å¤æ‰§è¡ŒåŒä¸€å¥importè¯­å¥ï¼Œé‚£ä¹ˆåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä¸ä¼šæ‰§è¡Œå¤šæ¬¡</h5><h5 id="2-5-importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ"><a href="#2-5-importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ" class="headerlink" title="2.5 importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ"></a>2.5 importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œ</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br></pre></td></tr></table></figure><p>âš ï¸<span class="text-important">ES6æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œå› æ­¤åœ¨importæ˜¯é™æ€æ‰§è¡Œï¼Œä¸å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œè¡¨è¾¾å¼ã€‚åŠ¨æ€åŠ è½½ä½¿ç”¨import()</span></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="string">'f'</span> + <span class="string">'oo'</span> &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">module</span> = <span class="string">'my_module'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="built_in">module</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">if</span> (x === <span class="number">1</span>) &#123;</span><br><span class="line">  <span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'module1'</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'module2'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å‚è€ƒèµ„æ–™ï¼šã€ŠECMAScript 6 å…¥é—¨ã€‹é˜®ä¸€å³°è¯‘ï¼ˆ<a href="http://es6.ruanyifeng.comï¼‰" target="_blank" rel="noopener">http://es6.ruanyifeng.comï¼‰</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;#ES6åŸºç¡€çŸ¥è¯†ç‚¹&lt;br&gt;JavaScriptçš„ç»„æˆï¼šECMAScriptï¼ˆæ ¸å¿ƒï¼‰ã€DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ã€BOM ï¼ˆæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼‰&lt;br&gt;ECMAScriptï¼Œè§„å®šäº†è¯­è¨€çš„ç»„æˆéƒ¨åˆ†ï¼šè¯­æ³•ã€ç±»å‹ã€è¯­å¥ã€å…³é”®å­—ã€ä¿ç•™å­—ã€æ“ä½œç¬¦ã€å¯¹è±¡ã€‚æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„æ˜¯ES5ï¼Œä¹Ÿå°±æ˜¯ECMAS
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vueæºç åˆ†æ-ç»„ä»¶åŒ–-å¼‚æ­¥ç»„ä»¶</title>
    <link href="http://yoursite.com/2019/02/02/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E7%BB%84%E4%BB%B6%E5%8C%96-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6/"/>
    <id>http://yoursite.com/2019/02/02/vueæºç åˆ†æ-ç»„ä»¶åŒ–-å¼‚æ­¥ç»„ä»¶/</id>
    <published>2019-02-02T04:55:27.000Z</published>
    <updated>2019-02-02T10:03:19.009Z</updated>
    
    <content type="html"><![CDATA[<p>å¼‚æ­¥ç»„ä»¶ï¼Œä¸€èˆ¬ç”¨äºæŒ‰éœ€åŠ è½½ã€‚å¯¹äºä¸€äº›éœ€è¦ä¼˜åŒ–é¦–å±åŠ è½½çš„ï¼Œä¼šå‡å°‘é¦–å±çš„åŒ…ä½“ç§¯ï¼Œä¸€èˆ¬ä¼šå°†ä¸€äº›é¦–å±ç»„ä»¶å˜æˆå¼‚æ­¥ç»„ä»¶ã€‚å¼‚æ­¥ç»„ä»¶çš„å®ç°æ–¹å¼æœ‰ä¸‰ç§ï¼šå·¥å‚å‡½æ•°ï¼Œpromiseå¼‚æ­¥ç»„ä»¶ï¼Œé«˜çº§å¼‚æ­¥ç»„ä»¶ã€‚<br><a id="more"></a></p><h3 id="å·¥å‚å‡½æ•°"><a href="#å·¥å‚å‡½æ•°" class="headerlink" title="å·¥å‚å‡½æ•°"></a>å·¥å‚å‡½æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&apos;AysnComponent&apos;, function (resolve, reject) &#123;</span><br><span class="line">// è¿™ä¸ªç‰¹æ®Šçš„requireè¯­æ³•ä¼šå‘Šè¯‰webpackï¼Œè‡ªåŠ¨å°†ç¼–è¯‘åçš„ä»£ç åˆ†å‰²æˆä¸åŒçš„å—ï¼Œè¿™äº›å—ä¼šé€šè¿‡Ajaxè¯·æ±‚åŠ è½½</span><br><span class="line">require([&apos;./components/AysnComponent&apos;], (res) =&gt; &#123;</span><br><span class="line">resolve(res)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨å®šä¹‰ç»„ä»¶æ—¶ï¼Œä½¿ç”¨Vue.componentæ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨è¿™é‡Œï¼Œå®šä¹‰å¼‚æ­¥ç»„ä»¶çš„æ—¶å€™ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<br>åœ¨vueçš„æºç ä¸­ï¼Œä¼šåˆ¤æ–­ä¼ é€’çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¼šä½¿ç”¨<strong>extend</strong>æ¥åˆ›å»ºä¸€ä¸ªCtoræ„é€ å‡½æ•°ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç›´æ¥å°†ä¼ é€’çš„å‚æ•°æŒ‚è½½åœ¨Vue.options.components.AysnComponentï¼ˆå…¶ä¸­çš„AynsComponentå°±æ˜¯å®šä¹‰çš„åç§°ï¼‰ï¼Œé€šè¿‡resolveAssetæ¥åˆ›å»ºä¸€ä¸ªCtorï¼Œè¿™é‡Œçš„Ctorå…¶å®å°±æ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ é€’è¿›å»çš„å‡½æ•°ï¼‰ï¼Œé€šè¿‡å‡½æ•°resolveAyscComponent(Ctor, baseCtor, context)ã€Œå…¶å®ï¼ŒCtorå°±æ˜¯æˆ‘ä»¬ä¼ é€’çš„å‡½æ•°ï¼ŒbaseCtorå°±æ˜¯Vueï¼Œcontextå½“å‰ç»„ä»¶çš„å®ä¾‹vmã€</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” åä¸½çš„åˆ†å‰²çº¿ â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><br>ã€Œæ‰©å±• 1 ã€ï¼šonceï¼Œæ–¹æ³•åªæ‰§è¡Œä¸€æ¬¡çš„å®ç°æ–¹å¼ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function once (fn: Function): Function &#123;</span><br><span class="line">let called = true</span><br><span class="line">return function () &#123;</span><br><span class="line">if (!called) &#123;</span><br><span class="line">called = false</span><br><span class="line">fn.apply(this, arguments)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼‚æ­¥ç»„ä»¶ï¼Œä¸€èˆ¬ç”¨äºæŒ‰éœ€åŠ è½½ã€‚å¯¹äºä¸€äº›éœ€è¦ä¼˜åŒ–é¦–å±åŠ è½½çš„ï¼Œä¼šå‡å°‘é¦–å±çš„åŒ…ä½“ç§¯ï¼Œä¸€èˆ¬ä¼šå°†ä¸€äº›é¦–å±ç»„ä»¶å˜æˆå¼‚æ­¥ç»„ä»¶ã€‚å¼‚æ­¥ç»„ä»¶çš„å®ç°æ–¹å¼æœ‰ä¸‰ç§ï¼šå·¥å‚å‡½æ•°ï¼Œpromiseå¼‚æ­¥ç»„ä»¶ï¼Œé«˜çº§å¼‚æ­¥ç»„ä»¶ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="vueæºç åˆ†æ" scheme="http://yoursite.com/categories/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>electronå­¦ä¹ </title>
    <link href="http://yoursite.com/2018/11/26/electron%E5%AD%A6%E4%B9%A0/"/>
    <id>http://yoursite.com/2018/11/26/electronå­¦ä¹ /</id>
    <published>2018-11-26T05:53:43.000Z</published>
    <updated>2018-11-26T05:57:16.175Z</updated>
    
    <content type="html"><![CDATA[<ol><li>ä½¿ç”¨vue-electronè„šæ‰‹æ¶æ—¶ï¼Œelectron-builderä¸electron-packagerçš„åŒºåˆ«ï¼ˆå‚è€ƒæ–‡æ¡£ï¼š<a href="https://github.com/ielectron-userland/electron-builderä¸https://github.com/ielectron-userland/electron-packagerï¼‰" target="_blank" rel="noopener">https://github.com/ielectron-userland/electron-builderä¸https://github.com/ielectron-userland/electron-packagerï¼‰</a></li><li></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ol&gt;
&lt;li&gt;ä½¿ç”¨vue-electronè„šæ‰‹æ¶æ—¶ï¼Œelectron-builderä¸electron-packagerçš„åŒºåˆ«ï¼ˆå‚è€ƒæ–‡æ¡£ï¼š&lt;a href=&quot;https://github.com/ielectron-userland/electron-builderä¸https
      
    
    </summary>
    
      <category term="Electron" scheme="http://yoursite.com/categories/Electron/"/>
    
    
  </entry>
  
  <entry>
    <title>XHRå¯¹è±¡</title>
    <link href="http://yoursite.com/2018/11/06/XHR%E5%AF%B9%E8%B1%A1/"/>
    <id>http://yoursite.com/2018/11/06/XHRå¯¹è±¡/</id>
    <published>2018-11-06T09:55:10.000Z</published>
    <updated>2018-11-26T05:54:32.258Z</updated>
    
    <content type="html"><![CDATA[<p>XHRå…¶å®å°±æ˜¯XMLHttpRequestå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯Ajaxçš„æ ¸å¿ƒæŠ€æœ¯ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä»¥åŠè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ï¼Œèƒ½å¤Ÿä»¥å¼‚æ­¥çš„æ–¹å¼ä»æœåŠ¡å™¨è·å–ä¿¡æ¯ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;XHRå…¶å®å°±æ˜¯XMLHttpRequestå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯Ajaxçš„æ ¸å¿ƒæŠ€æœ¯ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä»¥åŠè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ï¼Œèƒ½å¤Ÿä»¥å¼‚æ­¥çš„æ–¹å¼ä»æœåŠ¡å™¨è·å–ä¿¡æ¯ã€‚&lt;/p&gt;

      
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨</title>
    <link href="http://yoursite.com/2018/10/29/%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/"/>
    <id>http://yoursite.com/2018/10/29/å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨/</id>
    <published>2018-10-29T11:35:32.000Z</published>
    <updated>2018-10-31T09:38:36.134Z</updated>
    
    <content type="html"><![CDATA[<p>å¸¸è§çš„å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨ï¼šCookieï¼ŒWeb Storageã€‚å…¶ä¸­Web Storageä¸»è¦åŒ…å«localStorageï¼ŒsessionStorageï¼ŒglobalStorageè¿™ä¸‰ç§ï¼ŒWeb Storageè§„èŒƒå‡ºç°ä¸»è¦æ˜¯ä¸ºäº†æä¾›ä¸€ç§é™¤äº†cookieä¹‹å¤–çš„ä¼šè¯å­˜å‚¨çš„é€”å¾„ï¼Œä»¥åŠä¸€ç§å¯ä»¥å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®çš„æœºåˆ¶ã€‚Cookieä¹Ÿå«åšHTTP Cookieï¼Œæœ€åˆåœ¨å®¢æˆ·ç«¯æ˜¯ç”¨äºå­˜å‚¨ä¼šè¯ä¿¡æ¯çš„ã€‚ğŸ‘“ğŸ‘Œå’³å’³ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·±å…¥çš„äº†è§£ä¸€ä¸‹Cookieä»¥åŠWeb Storageå§ï½ï½ï½<br><a id="more"></a></p><h4 id="1-Cookie"><a href="#1-Cookie" class="headerlink" title="1. Cookie"></a>1. Cookie</h4><p>Cookieä¹Ÿå°±æ˜¯HTTP Cookieï¼Œæœ€åˆåœ¨å®¢æˆ·ç«¯ç”¨äºå­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œè®¾ç½®å®Œcookieåï¼Œåœ¨æŒ‡å®šçš„åŸŸåœ°å€ä¸­ï¼Œè¯·æ±‚ä¸­å¸¦æœ‰cookieçš„ä¿¡æ¯ï¼ˆRequest Headersä¸­å°±ä¼šåŒ…å«cookieï¼‰ï¼Œcookieçš„åå’Œå€¼åœ¨ä¼ é€æ—¶æ˜¯éœ€è¦é€šè¿‡URLç¼–ç ï¼Œå¦åˆ™ä¼šä¹±ç ã€‚<br>è¯¥æ ‡å‡†è¦æ±‚æœåŠ¡å™¨å¯¹ ä»»æ„ HTTP è¯·æ±‚å‘é€ Set-Cookie HTTP å¤´ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«ä¼šè¯ä¿¡æ¯ã€‚æµè§ˆå™¨ä¼šå­˜å‚¨è¿™æ ·çš„ä¼šè¯ä¿¡æ¯ï¼Œå¹¶åœ¨è¿™ä¹‹åï¼Œé€šè¿‡ä¸ºæ¯ä¸ªè¯·æ±‚æ·»åŠ  Cookie HTTP å¤´å°†ä¿¡æ¯å‘é€å›æœåŠ¡å™¨ã€‚</p><h5 id="1-1-é™åˆ¶"><a href="#1-1-é™åˆ¶" class="headerlink" title="1.1 é™åˆ¶"></a>1.1 é™åˆ¶</h5><p>è®¿é—®é™åˆ¶ï¼šåœ¨æŸä¸ªç¯å¢ƒä¸‹è®¾ç½®äº†cookieï¼Œé‚£ä¹ˆæ­¤cookieæ˜¯ç»‘å®šåœ¨æ­¤ç‰¹å®šçš„åŸŸåä¸‹ï¼Œä»¥åå†ç»™åˆ›å»ºå®ƒçš„åŸŸåå‘é€è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåŒ…å«è¿™ä¸ªcookieã€‚è¿™ä¸ªè®©cookieåªèƒ½åœ¨åˆ›å»ºå®ƒçš„åŸŸåä¸‹è¢«è®¿é—®ï¼Œå…¶å®ƒç¯å¢ƒä¸å¯ä»¥è¿›è¡Œè®¿é—®ã€‚<br>ä¸ªæ•°é™åˆ¶ï¼šä¸åŒæµè§ˆå™¨ä¸‹ï¼Œæ¯ä¸ªåŸŸä¸­æ‰€èƒ½åŒ…å«çš„cookieä¸ªæ•°ä¹Ÿæ˜¯æœ‰é™çš„ã€‚å½“å•ä¸ªåŸŸåä¸‹çš„cookieæ•°é‡è¶…å‡ºé™åˆ¶åï¼Œæµè§ˆå™¨ä¼šåˆ é™¤ä»¥å‰è®¾ç½®çš„cookieï¼Œä½†æ˜¯IEä¸Operaä¼šåˆ é™¤æœ€å°‘ä½¿ç”¨çš„cookieï¼ŒFireFoxæ˜¯éšæœºåˆ é™¤ã€‚<br>é•¿åº¦é™åˆ¶ï¼šcookieé•¿åº¦ï¼Œåœ¨å¤§å¤šæ•°æµè§ˆå™¨ä¸‹ï¼Œå¤§çº¦æ˜¯4096Bçš„é•¿åº¦é™åˆ¶ã€‚è¿™ä¸ªé•¿åº¦é™åˆ¶æ˜¯å¯¹æ¯ä¸ªåŸŸä¸‹çš„æ‰€æœ‰çš„cookieçš„æ€»é™åˆ¶ï¼Œè€Œä¸æ˜¯å•ä¸ªcookieçš„é•¿åº¦é™åˆ¶ã€‚è¶…å‡ºé•¿åº¦é™åˆ¶ï¼Œåˆ™æµè§ˆå™¨ä¼šé»˜é»˜åœ°å°†cookieä¸¢æ‰ã€‚</p><h5 id="1-2-cookieæ„æˆ"><a href="#1-2-cookieæ„æˆ" class="headerlink" title="1.2 cookieæ„æˆ"></a>1.2 cookieæ„æˆ</h5><ol><li>åç§°nameï¼š cookieåç§°ä¸åŒºåˆ†å¤§å°å†™ï¼Œç›¸åŒå­—æ¯ï¼Œå¤§å°å†™ä¸ä¸€æ ·çš„ï¼Œä¼šè¢«å½“æˆä¸€ä¸ªcookieã€‚åœ¨å®é™…ä¸­ï¼Œæœ€å¥½å®šä¹‰ä»¥åŠåé¢ä½¿ç”¨çš„æ—¶å€™ï¼Œè¦ç›¸åŒå¤§å°å†™ç›¸åŒå­—æ¯ï¼Œå› ä¸ºæœ‰äº›æµè§ˆå™¨ä¸­cookieé”®å€¼å¯¹éœ€è¦è¿›è¡ŒURLç¼–ç ã€‚</li><li>å€¼valueï¼š å¯¹åº”cookieåç§°çš„å€¼ï¼Œæ˜¯å­—ç¬¦ä¸²ï¼Œéœ€è¦é€šè¿‡URLç¼–ç ã€‚</li><li>åŸŸdomainï¼š cookieçš„åŸŸé™åˆ¶ï¼ŒæŒ‡å®šcookieåœ¨å“ªä¸ªåŸŸä¸‹è¢«è®¿é—®ã€‚</li><li>åœ°å€pathï¼š æŒ‡å®šåŸŸä¸­çš„å“ªä¸ªè·¯å¾„ï¼Œåº”è¯¥å‘æœåŠ¡å™¨ç«¯å‘é€cookie</li><li>å¤±æ•ˆæ—¶é—´expiresï¼š cookieè¢«åˆ é™¤çš„æ—¶é—´æˆ³ã€‚åˆ°è¾¾ç»“æŸæ—¶é—´çš„æ—¶å€™ï¼Œcookieä¼šè¢«åˆ é™¤ã€‚è¿™ä¸ªå€¼è¦æ˜¯GMTæ ¼å¼çš„æ—¥æœŸ(Wdy, DD-Mon-YYYY HH:MM:SS GMT)ï¼Œå¦‚æœè®¾ç½®çš„æ—¶é—´æ˜¯åœ¨å½“å‰æ—¥æœŸä¹‹å‰ï¼Œåˆ™cookieä¼šç«‹é©¬è¢«åˆ é™¤ã€‚</li><li>å®‰å…¨æ ‡å¿—secureï¼š æŒ‡å®šä¹‹åï¼Œcookieåªæœ‰åœ¨SSLè¿æ¥çš„æ—¶å€™æ‰èƒ½å‘é€åˆ°æœåŠ¡å™¨ï¼ˆä¹Ÿå°±æ˜¯httpsä¸­åªèƒ½åœ¨httpsçš„åŸŸä¸­ï¼Œä¸èƒ½å‘é€ç»™åŒåŸŸåçš„httpä¸­ï¼‰ã€‚æ˜¯ä¸€ä¸ªéé”®å€¼å¯¹ï¼Œå°±ä¸€ä¸ªå•ç‹¬çš„secureå•è¯æ ‡å¿—ã€‚</li></ol><h5 id="1-3-cookieçš„æ“ä½œ"><a href="#1-3-cookieçš„æ“ä½œ" class="headerlink" title="1.3 cookieçš„æ“ä½œ"></a>1.3 cookieçš„æ“ä½œ</h5><p>åœ¨æµè§ˆå™¨ä¸­ï¼Œcookieæ˜¯æŒ‚è½½åœ¨documentä¸Šçš„ã€‚<br><strong>è·å–</strong>ï¼š é€šè¿‡document.cookieæ¥è·å–å½“å‰é¡µé¢å¯ç”¨çš„cookieå­—ç¬¦ä¸²ï¼ˆä¸€ä¸ªä½¿ç”¨åˆ†å·è¿æ¥èµ·æ¥çš„é”®å€¼å¯¹å­—ç¬¦ä¸²ï¼‰ï¼Œå¹¶ä¸”å¾—åˆ°çš„æ‰€æœ‰çš„é”®å€¼å¯¹éƒ½æ˜¯ç»è¿‡URLç¼–ç çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡decodeURIComponentæ¥è§£ç <br><strong>è®¾ç½®</strong>ï¼š document.cookieå¯ä»¥è®¾ç½®ä¸€ä¸ªæ–°çš„cookieå­—ç¬¦ä¸²ï¼Œè¿™ä¸ªcookieå­—ç¬¦ä¸²ä¼šè¢«è§£æå¹¶æ·»åŠ åˆ°ç°æœ‰çš„cookieé›†åˆä¸­ã€‚è®¾ç½®document.cookieå¹¶ä¸ä¼šè¦†ç›–æ‰åŸæ¥çš„cookieï¼Œè€Œæ˜¯åœ¨åŸå…ˆçš„åŸºç¡€ä¸Šæ·»åŠ ï¼ˆåªæœ‰åœ¨è®¾ç½®çš„cookieåç›¸åŒï¼Œåˆ™ä¼šè¦†ç›–æ‰åŸå…ˆè®¾ç½®çš„åŒåcookieçš„å€¼ï¼‰ã€‚åœ¨è®¾ç½®æ—¶ï¼Œæœ€å¥½æ¯æ¬¡å¯¹é”®å€¼å¯¹éƒ½è¿›è¡Œä¸€æ¬¡encodeURIComponentç¼–ç ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç æƒ…å†µ<br><strong>åˆ é™¤</strong>ï¼šæ²¡æœ‰ç›´æ¥åˆ é™¤çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å°†æœ‰æ•ˆæ—¶é—´è®¾ç½®æˆç°åœ¨ä¹‹å‰çš„æ—¶é—´ï¼Œä»è€Œä½¿å¾—cookieåˆ é™¤</p><pre><code>const COOKIE_UTIL = {    get: (name) =&gt; {        var cookieName = encodeURIComponent(name) + &apos;=&apos;,             cookieStart = document.cookie.indexOf(cookieName),             cookieValue = &apos;&apos;;        if (cookieStart &gt; -1) {            var cookieEnd = document.cookie.indexOf(&apos;;&apos;, cookieStart);            cookieEnd = cookieEnd === -1 ? document.cookie.length : cookieEnd;            cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));        }        return cookieValue;         },    set: (name, value, expires, path, domain, secure) =&gt; {        var cookieText = encodeURIComponent(name) + &quot;=&quot; + encodeURIComponent(value);        if (expires instanceof Date) {            cookieText += &apos;; expires=&apos; + expires.toGMTString();        }        if (path) {            cookieText += &apos;; path=&apos; + path;        }        if (domain) {            cookieText += &apos;; domain=&apos; + domain;        }        if (secure) {            cookieText += &apos;;secure&apos;;            }        document.cookie = cookieText;    },    unset: (name, path, domain, secure) =&gt; {        this.set(name, &quot;&quot;, new Date(0), path, domain, secure);    }};</code></pre><h4 id="2-Web-Storage"><a href="#2-Web-Storage" class="headerlink" title="2. Web Storage"></a>2. Web Storage</h4><p>Web Storageæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼ŒåŒ…å«äº†sessionStorageï¼ŒlocalStorageï¼ŒglobalStorageå¯¹è±¡ï¼Œéƒ½æ˜¯ç›´æ¥æŒ‚è½½äºwindowå¯¹è±¡ä¸Šçš„ã€‚</p><h5 id="2-1-Storageç±»å‹"><a href="#2-1-Storageç±»å‹" class="headerlink" title="2.1 Storageç±»å‹"></a>2.1 Storageç±»å‹</h5><p>Storageå®ä¾‹æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š<br><strong>1. å¢</strong> getItem(name) æŒ‡å®šåç§°nameè·å–å¯¹åº”çš„å€¼ï¼›key(index) è·å–indexå¤„çš„åç§°<br><strong>2. åˆ </strong> clear() åˆ é™¤æ‰€æœ‰çš„å€¼ï¼› ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„åˆ é™¤ delete<br><strong>3. æ”¹</strong> setItem(name, value) ä¸ºæŒ‡å®šnameè®¾ç½®ä¸€ä¸ªå¯¹åº”çš„å€¼<br><strong>4. æŸ¥</strong> getItem(name) è·å–æŒ‡å®šnameçš„å€¼<br>å±æ€§ï¼šlength ==&gt; Storageå®ä¾‹ä¸­å«æœ‰å‡ å¯¹é”®å€¼å¯¹</p><h5 id="2-2-sessionStorageå¯¹è±¡"><a href="#2-2-sessionStorageå¯¹è±¡" class="headerlink" title="2.2 sessionStorageå¯¹è±¡"></a>2.2 sessionStorageå¯¹è±¡</h5><p>sessionStorageæ˜¯ç”¨äºç‰¹å®šä¼šè¯ä¸­å­˜å‚¨æ•°æ®ï¼Œå¹¶ä¸”æ•°æ®åªä¿ç•™åˆ°<span class="font-color-red">æµè§ˆå™¨å…³é—­</span>ã€‚å­˜å‚¨åœ¨ sessionStorage ä¸­çš„æ•°æ®åªèƒ½ç”±æœ€åˆç»™å¯¹è±¡å­˜å‚¨æ•°æ®çš„é¡µé¢è®¿é—®åˆ°ï¼Œæ‰€ä»¥å¯¹å¤šé¡µé¢åº”ç”¨æœ‰é™åˆ¶ã€‚Storageå®ä¾‹å«æœ‰çš„æ–¹æ³•å’Œå±æ€§ï¼ŒsessionStorageä¹Ÿæ‹¥æœ‰ã€‚<br><strong>èŒƒå›´é™åˆ¶</strong>ï¼šè¦è®¿é—®åŒä¸€ä¸ªlocalStorageï¼Œéœ€è¦åœ¨åŒä¸€åè®®ï¼ŒåŒä¸€åŸŸåï¼ŒåŒä¸€ç«¯å£å·çš„é¡µé¢ã€‚<br><strong>å­˜å‚¨æ—¶é—´</strong>ï¼šä¸€ç›´ä¿ç•™åˆ°æµè§ˆå™¨å…³é—­ã€‚</p><h5 id="2-3-localStorageå¯¹è±¡"><a href="#2-3-localStorageå¯¹è±¡" class="headerlink" title="2.3 localStorageå¯¹è±¡"></a>2.3 localStorageå¯¹è±¡</h5><p>localStorageæ˜¯åœ¨ä¿®è®¢åçš„HTML5è§„èŒƒä¸­å–ä»£äº†globalStorageã€‚localStorageæ˜¯Storageå®ä¾‹ï¼Œå› æ­¤æ‹¥æœ‰Storageç±»å‹çš„æ‰€æœ‰æ–¹æ³•ä»¥åŠå±æ€§ã€‚<br><strong>èŒƒå›´é™åˆ¶</strong>ï¼šè¦è®¿é—®åŒä¸€ä¸ªlocalStorageï¼Œéœ€è¦åœ¨åŒä¸€åè®®ï¼ŒåŒä¸€åŸŸåï¼ŒåŒä¸€ç«¯å£å·çš„é¡µé¢ã€‚<br><strong>å­˜å‚¨æ—¶é—´</strong>ï¼šä¸€ç›´ä¿ç•™åˆ°ä¸»åŠ¨ä½¿ç”¨æ–¹æ³•åˆ é™¤æˆ–è€…ç”¨æˆ·æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ã€‚</p><h5 id="2-4-globalStorageå¯¹è±¡"><a href="#2-4-globalStorageå¯¹è±¡" class="headerlink" title="2.4 globalStorageå¯¹è±¡"></a>2.4 globalStorageå¯¹è±¡</h5><p>globalStorageä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è·¨åŸŸä¼šè¯ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç‰¹å®šçš„é™åˆ¶ã€‚åœ¨ä½¿ç”¨globalStorageï¼Œé¦–å…ˆè¦æŒ‡å®šå“ªäº›åŒºåŸŸå¯ä»¥è®¿é—®è¯¥æ•°æ®ï¼Œå¯ä»¥é€šè¿‡æ–¹æ‹¬å·æ ‡è®°ä½¿ç”¨å±æ€§æ¥å®ç°ã€‚<br>eg: globalStorage[â€˜my.comâ€™].name = â€˜zhaoshijuanâ€™<br>è¿™é‡Œè®¿é—®çš„globalStorage[â€˜my.comâ€™]æ˜¯é’ˆå¯¹åŸŸåâ€˜my.comâ€™çš„å­˜å‚¨ç©ºé—´<br>âš ï¸ globalStorageä¸æ˜¯Storageå®ä¾‹ï¼Œè€Œä¸Šé¢çš„globalStorage[â€˜my.comâ€™]æ‰æ˜¯Storageå¯¹è±¡ï¼Œå› æ­¤æ‹¥æœ‰Storageä¸Šçš„æ–¹æ³•ä»¥åŠå±æ€§çš„æ˜¯globalStorage[â€˜my.comâ€™]è¿™ä¸ªå¯¹è±¡ã€‚<br>globalStorage[â€˜â€™].name = â€˜zhaoshijuanâ€™ï¼Œè¿™ä¸ªè®¾ç½®æ˜¯å¯¹ä»»ä½•äººéƒ½çœ‹è§ï¼Œæ²¡æœ‰åŸŸé™åˆ¶ã€‚<br>globalStorage[â€˜netâ€™].name = â€˜zhaoshijuanâ€™ï¼Œè¿™ä¸ªè®¾ç½®ä¼šè®©æ‰€æœ‰ä»¥.netç»“æŸçš„åŸŸåè®¿é—®ã€‚<br>åœ¨ä¸ç¡®å®šåŸŸåæ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™æ ·è®¾ç½®ï¼šglobalStorage[â€˜location.hostâ€™].name = â€˜zhaoshijuanâ€™<br><strong>èŒƒå›´é™åˆ¶</strong>ï¼šæ ¹æ®globalStorageå[]æ‹¬å·è€Œå®šã€‚<br><strong>å­˜å‚¨æ—¶é—´</strong>ï¼šå¦‚æœæ²¡æœ‰ä½¿ç”¨removeItemæˆ–è€…deleteåˆ é™¤ï¼Œä¼šä¸€ç›´ä¿ç•™åˆ°ç”¨æˆ·åˆ é™¤æµè§ˆå™¨ç¼“å­˜ä¸ºæ­¢ã€‚</p><blockquote><p>Strogeå¯¹è±¡ä¸­å­˜å‚¨çš„éƒ½æ˜¯å­—ç¬¦ä¸²</p></blockquote><h5 id="2-5-Storageäº‹ä»¶"><a href="#2-5-Storageäº‹ä»¶" class="headerlink" title="2.5 Storageäº‹ä»¶"></a>2.5 Storageäº‹ä»¶</h5><p>å¯¹Storageå¯¹è±¡è¿›è¡Œçš„ä¿®æ”¹ï¼Œéƒ½ä¼šè§¦å‘storageäº‹ä»¶ï¼Œstorageäº‹ä»¶æ˜¯ç»‘å®šåœ¨documentä¸Šçš„ã€‚storageäº‹ä»¶eventå¯¹è±¡å«æœ‰å¦‚ä¸‹å‡ ä¸ªå±æ€§ï¼š<br>domainï¼šå‘ç”Ÿå˜åŒ–çš„å­˜å‚¨ç©ºé—´çš„åŸŸå<br>keyï¼šå˜åŒ–çš„é”®å<br>newValueï¼šä¿®æ”¹å€¼ï¼Œåˆ™æ˜¯æ–°å€¼ï¼›åˆ é™¤å€¼ï¼Œåˆ™æ˜¯undefined<br>oldValueï¼šé”®å¯¹åº”å€¼è¢«ä¿®æ”¹ä¹‹å‰çš„å€¼</p><p>addEventListener(document, â€˜storageâ€™, function(event) {})</p><h4 id="3-Cookieä¸Web-Storageå¯¹æ¯”"><a href="#3-Cookieä¸Web-Storageå¯¹æ¯”" class="headerlink" title="3. Cookieä¸Web Storageå¯¹æ¯”"></a>3. Cookieä¸Web Storageå¯¹æ¯”</h4><h5 id="3-1-åŒºåˆ«"><a href="#3-1-åŒºåˆ«" class="headerlink" title="3.1 åŒºåˆ«"></a>3.1 åŒºåˆ«</h5><ol><li>å­˜å‚¨å†…å®¹æ˜¯å¦å‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼šå½“è®¾ç½®äº†Cookieåï¼Œæ•°æ®ä¼šå‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œé€ æˆä¸€å®šçš„å®½å¸¦æµªè´¹ï¼› web storage,ä¼šå°†æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ï¼Œä¸ä¼šé€ æˆå®½å¸¦æµªè´¹ï¼›</li><li>æ•°æ®å­˜å‚¨å¤§å°ä¸åŒï¼šCookieæ•°æ®ä¸èƒ½è¶…è¿‡4K,é€‚ç”¨äºä¼šè¯æ ‡è¯†ï¼›web storageæ•°æ®å­˜å‚¨å¯ä»¥è¾¾åˆ°5M;</li><li>æ•°æ®å­˜å‚¨çš„æœ‰æ•ˆæœŸé™ä¸åŒï¼šcookieåªåœ¨è®¾ç½®äº†Cookidè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿å…³é—­çª—å£æˆ–è€…æµè§ˆå™¨ï¼›sessionStorage,ä»…åœ¨å…³é—­æµè§ˆå™¨ä¹‹å‰æœ‰æ•ˆï¼›localStorage,æ•°æ®å­˜å‚¨æ°¸ä¹…æœ‰æ•ˆï¼›</li><li>ä½œç”¨åŸŸä¸åŒï¼šcookieå’ŒlocalStorageæ˜¯åœ¨åŒæºåŒçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ï¼›sessionStorageä¸åœ¨ä¸åŒçš„æµè§ˆå™¨çª—å£ä¸­å…±äº«ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªé¡µé¢ï¼›</li></ol><h5 id="3-2-Web-Storageç›¸æ¯”Cookieçš„ä¼˜åŠ¿"><a href="#3-2-Web-Storageç›¸æ¯”Cookieçš„ä¼˜åŠ¿" class="headerlink" title="3.2 Web Storageç›¸æ¯”Cookieçš„ä¼˜åŠ¿"></a>3.2 Web Storageç›¸æ¯”Cookieçš„ä¼˜åŠ¿</h5><ol><li>å­˜å‚¨ç©ºé—´æ›´å¤§ï¼šIE8ä¸‹æ¯ä¸ªç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ä¸º10Mï¼Œå…¶ä»–æµè§ˆå™¨å®ç°ç•¥æœ‰ä¸åŒï¼Œä½†éƒ½æ¯”Cookieè¦å¤§å¾ˆå¤šã€‚</li><li>å­˜å‚¨å†…å®¹ä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼šå½“è®¾ç½®äº†Cookieåï¼ŒCookieçš„å†…å®¹ä¼šéšç€è¯·æ±‚ä¸€å¹¶å‘é€çš„æœåŠ¡å™¨ï¼Œè¿™å¯¹äºæœ¬åœ°å­˜å‚¨çš„æ•°æ®æ˜¯ä¸€ç§å¸¦å®½æµªè´¹ã€‚è€ŒWeb Storageä¸­çš„æ•°æ®åˆ™ä»…ä»…æ˜¯å­˜åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸æœåŠ¡å™¨å‘ç”Ÿä»»ä½•äº¤äº’ã€‚</li><li>æ›´å¤šä¸°å¯Œæ˜“ç”¨çš„æ¥å£ï¼šWeb Storageæä¾›äº†ä¸€å¥—æ›´ä¸ºä¸°å¯Œçš„æ¥å£ï¼Œå¦‚setItem,getItem,removeItem,clearç­‰,ä½¿å¾—æ•°æ®æ“ä½œæ›´ä¸ºç®€ä¾¿ã€‚cookieéœ€è¦è‡ªå·±å°è£…ã€‚</li><li>ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼šæ¯ä¸ªåŸŸï¼ˆåŒ…æ‹¬å­åŸŸï¼‰æœ‰ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´ï¼Œå„ä¸ªå­˜å‚¨ç©ºé—´æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå› æ­¤ä¸ä¼šé€ æˆæ•°æ®æ··ä¹±ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¸¸è§çš„å®¢æˆ·ç«¯æ•°æ®å­˜å‚¨ï¼šCookieï¼ŒWeb Storageã€‚å…¶ä¸­Web Storageä¸»è¦åŒ…å«localStorageï¼ŒsessionStorageï¼ŒglobalStorageè¿™ä¸‰ç§ï¼ŒWeb Storageè§„èŒƒå‡ºç°ä¸»è¦æ˜¯ä¸ºäº†æä¾›ä¸€ç§é™¤äº†cookieä¹‹å¤–çš„ä¼šè¯å­˜å‚¨çš„é€”å¾„ï¼Œä»¥åŠä¸€ç§å¯ä»¥å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®çš„æœºåˆ¶ã€‚Cookieä¹Ÿå«åšHTTP Cookieï¼Œæœ€åˆåœ¨å®¢æˆ·ç«¯æ˜¯ç”¨äºå­˜å‚¨ä¼šè¯ä¿¡æ¯çš„ã€‚ğŸ‘“ğŸ‘Œå’³å’³ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·±å…¥çš„äº†è§£ä¸€ä¸‹Cookieä»¥åŠWeb Storageå§ï½ï½ï½&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>Functionå¯¹è±¡</title>
    <link href="http://yoursite.com/2018/10/26/Function%E5%AF%B9%E8%B1%A1/"/>
    <id>http://yoursite.com/2018/10/26/Functionå¯¹è±¡/</id>
    <published>2018-10-26T06:18:11.000Z</published>
    <updated>2018-10-29T09:44:33.098Z</updated>
    
    <content type="html"><![CDATA[<p>æ¯æ¬¡çœ‹æºç æˆ–è€…æ‰¾ä¸€äº›æ±‚æœ€å¤§å€¼æœ€å°å€¼ç®€ä¾¿æ–¹æ³•æ—¶ï¼Œå°±ä¼šé‡è§call(),apply()è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“æ—¶çš„ç†è§£å°±æ˜¯ï¼šè®¾ç½®å‡½æ•°ä¸Šä¸‹æ–‡ï¼ŒthisæŒ‡å‘ã€‚ä½†æ˜¯â€¦â€¦ç†è§£å¾—å¤ªç‰‡é¢äº†ï¼Œæ­£å¥½æœ‰æ—¶é—´ï¼Œå°±æ‰“ç®—äº†è§£ä¸€ä¸‹ğŸ‘ğŸ‘ğŸ‘<br><a id="more"></a></p><h4 id="1-Functionç±»å‹"><a href="#1-Functionç±»å‹" class="headerlink" title="1. Functionç±»å‹"></a>1. Functionç±»å‹</h4><p>æˆ‘ä»¬å…ˆäº†è§£ä¸€æ³¢Functionè¿™ç§å¼•ç”¨ç±»å‹å§ï½ï½ï½</p><h5 id="1-1-å‡½æ•°å®šä¹‰"><a href="#1-1-å‡½æ•°å®šä¹‰" class="headerlink" title="1.1 å‡½æ•°å®šä¹‰"></a>1.1 å‡½æ•°å®šä¹‰</h5><p>ã€Œ1ã€å‡½æ•°å£°æ˜è¯­æ³• function fun () {}<br>ã€Œ2ã€å‡½æ•°è¡¨è¾¾å¼å®šä¹‰  var fun = function () {}<br>ã€Œ3ã€Functionæ„é€ å‡½æ•°  var fun = new Function (â€˜params1â€™, â€˜params2â€™, â€˜return params1 + prams2â€™)</p><blockquote><p>ä¸æ¨èä½¿ç”¨Functionæ„é€ å‡½æ•°å®šä¹‰ï¼Œå› ä¸ºä¼šå¯¼è‡´ä¸¤æ¬¡è§£æï¼šç¬¬ä¸€æ¬¡æ˜¯è§£æå¸¸è§„çš„jsä»£ç ï¼Œç¬¬äºŒæ¬¡æ˜¯è§£æä¼ å…¥æ„é€ å‡½æ•°ä¸­çš„å­—ç¬¦ä¸²</p></blockquote><h6 id="1-2-å‡½æ•°å†…éƒ¨çš„ä¸€äº›å±æ€§"><a href="#1-2-å‡½æ•°å†…éƒ¨çš„ä¸€äº›å±æ€§" class="headerlink" title="1.2 å‡½æ•°å†…éƒ¨çš„ä¸€äº›å±æ€§"></a>1.2 å‡½æ•°å†…éƒ¨çš„ä¸€äº›å±æ€§</h6><p>æ¯ä¸ªå‡½æ•°å†…éƒ¨éƒ½å¯ä»¥ä½¿ç”¨argumentsæ¥è®¿é—®ä¼ å…¥çš„æ‰€æœ‰çš„å‚æ•°ï¼ˆæ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼‰ï¼›<br>arguments.calleeæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘æ‹¥æœ‰è¿™ä¸ªargumentså¯¹è±¡çš„å‡½æ•°ï¼›<br>calleræ˜¯å‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œä¿å­˜ç€è°ƒç”¨æ­¤å‡½æ•°çš„å‡½æ•°å¼•ç”¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var inner = function() &#123; </span><br><span class="line">console.log(inner.caller); // outer</span><br><span class="line">// ç­‰ä»·äºä¸‹é¢</span><br><span class="line">console.log(arguments.callee.caller)</span><br><span class="line">&#125;;</span><br><span class="line">var outer = function() &#123;</span><br><span class="line">inner();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœæŸå‡½æ•°åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹è°ƒç”¨çš„è¯ï¼Œåˆ™æŸå‡½æ•°çš„callerä¸ºnull</p><h5 id="1-3-å‡½æ•°å±æ€§"><a href="#1-3-å‡½æ•°å±æ€§" class="headerlink" title="1.3 å‡½æ•°å±æ€§"></a>1.3 å‡½æ•°å±æ€§</h5><p>ã€Œ1ã€é•¿åº¦lengthï¼šè¡¨ç¤ºçš„å‡½æ•°æ¥å—çš„å‘½åå‚æ•°çš„ä¸ªæ•°<br>ã€Œ2ã€åŸå‹prototypeï¼šä¸å¯æšä¸¾ï¼Œä¿å­˜äº†æ‰€æœ‰å®ä¾‹æ–¹æ³•</p><h4 id="2-å‡½æ•°å†…éƒ¨éç»§æ‰¿æ–¹æ³•ï¼šapplyï¼Œcallï¼Œbind"><a href="#2-å‡½æ•°å†…éƒ¨éç»§æ‰¿æ–¹æ³•ï¼šapplyï¼Œcallï¼Œbind" class="headerlink" title="2. å‡½æ•°å†…éƒ¨éç»§æ‰¿æ–¹æ³•ï¼šapplyï¼Œcallï¼Œbind"></a>2. å‡½æ•°å†…éƒ¨éç»§æ‰¿æ–¹æ³•ï¼šapplyï¼Œcallï¼Œbind</h4><p>applyï¼Œcallï¼Œbindä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯æŒ‡å®šåœ¨ç‰¹å®šä½œç”¨åŸŸå†…è°ƒç”¨æ­¤å‡½æ•°ï¼Œå®é™…ä¸Šç›¸å½“äºè®¾ç½®äº†æ­¤å‡½æ•°å†…çš„thiså¯¹è±¡çš„å€¼</p><h5 id="2-1-apply"><a href="#2-1-apply" class="headerlink" title="2.1 apply"></a>2.1 apply</h5><p>applyï¼ˆä½œç”¨åŸŸï¼Œæ•°ç»„ç±»å‹å‚æ•°ï¼‰<br>ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªåœ¨å…¶ä¸­è¿è¡Œçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼Œä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„ï¼ˆargumentsæˆ–è€…Arrayå®ä¾‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function sum (num1, num2) &#123;</span><br><span class="line">return num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line">function applySum (num1, num2) &#123;</span><br><span class="line">return sum.apply(this, arguments);</span><br><span class="line">&#125;</span><br><span class="line">function applySum1 (num1, num2) &#123;</span><br><span class="line">return sum.apply(this, [num1, num2]);</span><br><span class="line">&#125;</span><br><span class="line">applySum(10, 10); // 20</span><br><span class="line">applySum1(10, 10); // 20</span><br></pre></td></tr></table></figure><h5 id="2-2-call"><a href="#2-2-call" class="headerlink" title="2.2 call"></a>2.2 call</h5><p>callï¼ˆä½œç”¨åŸŸï¼Œå‚æ•°1ï¼Œå‚æ•°2ï¼Œâ€¦â€¦ï¼Œå‚æ•°Nï¼‰<br>ä¸¤ç±»å‚æ•°ï¼šä¸€ç±»ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°åœ¨å…¶ä¸­è¿è¡Œçš„å‡½æ•°çš„ä½œç”¨åŸŸï¼›å¦ä¸€ç±»ä¹Ÿå°±æ˜¯å‚æ•°ï¼Œæ˜¯ç›´æ¥ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°å¿…é¡»é€ä¸€åˆ—ä¸¾å‡ºæ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function sum (num1, num2) &#123;</span><br><span class="line">return num1 + num2;</span><br><span class="line">&#125;</span><br><span class="line">function callSum (num1, num2) &#123;</span><br><span class="line">return sum.call(this, num1, num2)</span><br><span class="line">&#125;</span><br><span class="line">callSum(10 ,10)// 20</span><br></pre></td></tr></table></figure><h5 id="2-3-bind-IE9"><a href="#2-3-bind-IE9" class="headerlink" title="2.3 bind   IE9+"></a>2.3 bind   <span class="font-color-red">IE9+</span></h5><p>bind()è¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ï¼Œå…¶thisçš„å€¼ä¼šè¢«ç»‘å®šåˆ°ä¼ ç»™bind()å‡½æ•°çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.color = &apos;red&apos;;</span><br><span class="line">var object = &#123; color: &apos;blue&apos; &#125;;</span><br><span class="line">function getColor () &#123;</span><br><span class="line">return this.color;</span><br><span class="line">&#125;</span><br><span class="line">var getColor1 = getColor.bind(object);</span><br><span class="line">getColor1(); // blue</span><br></pre></td></tr></table></figure><h5 id="2-4-applyã€callã€bindåŒºåˆ«"><a href="#2-4-applyã€callã€bindåŒºåˆ«" class="headerlink" title="2.4 applyã€callã€bindåŒºåˆ«"></a>2.4 applyã€callã€bindåŒºåˆ«</h5><p>call,apply,bindä½œç”¨ï¼šæ‰©å¤§äº†å‡½æ•°èµ–ä»¥è¿è¡Œçš„ä½œç”¨åŸŸã€‚<br>å¯¹äºcallï¼Œapplyçš„ç¬¬ä¸€ä¸ªå‚æ•°å¦‚æœæŒ‡å®šæˆnullæˆ–è€…undefinedçš„æ—¶å€™ï¼Œåˆ™æ­¤æ—¶çš„thiså°±ä¼šæŒ‡å‘å…¨å±€ç¯å¢ƒã€‚</p><p>ã€Œ1ã€callï¼ŒapplyåŒºåˆ«ä¸»è¦åœ¨äºä¼ å‚ï¼Œé™¤äº†æŒ‡å®šä½œç”¨åŸŸçš„å‚æ•°å¤–ï¼Œcallçš„å…¶ä»–å‚æ•°ä¸»è¦æ˜¯ç›´æ¥ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ï¼Œéœ€è¦ä¸€ä¸€åˆ—ä¸¾ï¼›è€Œapplyçš„å…¶ä»–å‚æ•°æ˜¯ä¸€ä¸ªå‚æ•°æ•°ç»„ï¼ˆargumentsæˆ–è€…Arrayå®ä¾‹ï¼‰ã€‚å…¶å®å°±æ˜¯å‚æ•°æ ¼å¼ä¸ä¸€æ ·ã€‚<br>ã€Œ2ã€bindä¸callï¼Œapplyçš„åŒºåˆ«ä¸»è¦æ˜¯callï¼Œapplyä¸ä¼šç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥ä¼ é€’ä½œç”¨åŸŸï¼›è€Œbindåˆ™æ˜¯ä½¿ç”¨ä¼ å…¥çš„ä½œç”¨åŸŸç»‘å®šthisåˆ›å»ºä¸€ä¸ªå‡½æ•°çš„å®ä¾‹ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var numbers = [1, 2, 3, 4, 5, 6, 7];</span><br><span class="line">var max1 = Math.max.apply(null, numbers);</span><br><span class="line">// ç­‰ä»·äºä¸‹é¢</span><br><span class="line">var max2 = Math.max.call(null, ...numbers);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¯æ¬¡çœ‹æºç æˆ–è€…æ‰¾ä¸€äº›æ±‚æœ€å¤§å€¼æœ€å°å€¼ç®€ä¾¿æ–¹æ³•æ—¶ï¼Œå°±ä¼šé‡è§call(),apply()è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“æ—¶çš„ç†è§£å°±æ˜¯ï¼šè®¾ç½®å‡½æ•°ä¸Šä¸‹æ–‡ï¼ŒthisæŒ‡å‘ã€‚ä½†æ˜¯â€¦â€¦ç†è§£å¾—å¤ªç‰‡é¢äº†ï¼Œæ­£å¥½æœ‰æ—¶é—´ï¼Œå°±æ‰“ç®—äº†è§£ä¸€ä¸‹ğŸ‘ğŸ‘ğŸ‘&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>Arrayæ•°ç»„ä¹‹æ—…</title>
    <link href="http://yoursite.com/2018/10/23/Array%E6%95%B0%E7%BB%84%E4%B9%8B%E6%97%85/"/>
    <id>http://yoursite.com/2018/10/23/Arrayæ•°ç»„ä¹‹æ—…/</id>
    <published>2018-10-23T07:01:41.000Z</published>
    <updated>2018-10-31T09:55:10.166Z</updated>
    
    <content type="html"><![CDATA[<p>è¦å­¦ä¹ ES6ä¸­çš„æ•°ç»„æ‰©å±•ç¯‡ç« ï¼Œæ‰€ä»¥å°±å…ˆå»é¢„ä¹ äº†ä¸€æ³¢åŸæœ¬æ¥è§¦åˆ°çš„Arrayã€‚æ‰€è°“æ¸©æ•…è€ŒçŸ¥æ–°å˜›~~<br>é¦–å…ˆæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹jsä¸­çš„å¯¹è±¡ï¼š1.å†…éƒ¨å¯¹è±¡ï¼Œå†…éƒ¨å¯¹è±¡åŒ…å«ä¸‹é¢ä¸‰ç§ï¼šé”™è¯¯å¯¹è±¡ï¼ˆæ ‡è¯†é”™è¯¯ï¼‰ï¼Œå†…ç½®å¯¹è±¡ï¼ˆä¸éœ€è¦ä½¿ç”¨newæ“ä½œç¬¦æ¥è¿›è¡Œåˆå§‹åŒ–ï¼ŒMathä¸JSONä¸¤ç§ï¼‰ï¼Œå¸¸ç”¨å¯¹è±¡ï¼ˆ8ç§ï¼ŒStringã€Numberã€Dateã€Functionã€Booleanã€Arrayã€Objectã€RegExpï¼‰ï¼›2.å®¿ä¸»å¯¹è±¡ï¼Œå®¿ä¸»å¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªwindowä¸documentã€‚3.è‡ªå®šä¹‰å¯¹è±¡ï¼Œé™¤äº†å†…éƒ¨å¯¹è±¡ä»¥åŠå®¿ä¸»å¯¹è±¡ä¹‹å¤–ï¼Œå…¶å®ƒéƒ½ä¸ºè‡ªå®šä¹‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å¼€å‘è€…è‡ªå·±å®šä¹‰çš„å¯¹è±¡ã€‚<br>è¯´èµ·Arrayï¼Œèƒ½æƒ³åˆ°çš„å°±æ˜¯å±æ€§lengthï¼Œæ–¹æ³•pushï¼Œpopï¼Œreverseï¼Œshiftï¼Œunshiftï¼Œjionï¼Œsliceï¼Œspliceâ€¦â€¦ç­‰æ–¹æ³•<br>æ¨èå–œé©¬æ‹‰é›…ä¸Šçš„ã€Œé™ªä½ è¯»ä¹¦ï¼ˆJavaScript WEB ç¼–ç¨‹ï¼‰ã€çš„è¯¾ç¨‹~~~<br><a id="more"></a></p><p>åŸºç¡€æ•°æ®ç±»å‹ï¼šNumberã€undefinedã€nullã€Booleanã€Stringã€symbol<br>å¤æ‚ç±»å‹ï¼šObject<br>typeOf(null) === â€˜Objectâ€™<br>jsè§£é‡Šå™¨ï¼Œä¼šå°†å…¶è¿›è¡Œè§£é‡Šï¼Œè½¬åŒ–æˆäºŒè¿›åˆ¶ï¼Œé»˜è®¤å‰ä¸‰ä½æ˜¯0çš„å°±æ˜¯Objectç±»å‹ã€‚è€Œnullè½¬åŒ–æˆäºŒè¿›åˆ¶çš„æ—¶å€™ï¼Œä¼šå˜æˆæ‰€æœ‰ä½ç½®ä¸Šå…¨æ˜¯0ã€‚</p><h3 id="Arrayæ•°ç»„"><a href="#Arrayæ•°ç»„" class="headerlink" title="Arrayæ•°ç»„"></a>Arrayæ•°ç»„</h3><p>æ˜¯ä¸€ä¸ªæœ‰åºçš„åˆé›†ã€‚å¯¹è±¡æ˜¯æ— åºçš„åˆé›†ï¼Œå¯¹äºæœ‰åºçš„å¯¹è±¡ç§°ä½œä¸ºæ•°ç»„ã€‚æ•°ç»„é‡Œé¢å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ç±»å‹ï¼Œæ•°ç»„å¤§å°å¯ä»¥è°ƒæ•´ã€‚</p><h4 id="1-åˆ›å»ºæ•°ç»„"><a href="#1-åˆ›å»ºæ•°ç»„" class="headerlink" title="1. åˆ›å»ºæ•°ç»„"></a>1. åˆ›å»ºæ•°ç»„</h4><p>newå…³é”®å­— new Array(å‚æ•°),å…¶ä¸­å‚æ•°åªæ˜¯ä¸€ä¸ªæ•°å­—çš„è¯ï¼Œåˆ™åˆ›å»ºå‡ºæ¥çš„æ˜¯ä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„ï¼Œé‡Œé¢çš„æ¯é¡¹éƒ½æ˜¯undefinedã€‚ä¸è¦ä½¿ç”¨å¤šä¸ªé€—å·è¿›è¡Œåˆ›å»ºæ•°ç»„<br>å­—é¢é‡    [array1, array2]</p><h4 id="2-æ–¹æ³•"><a href="#2-æ–¹æ³•" class="headerlink" title="2. æ–¹æ³•"></a>2. æ–¹æ³•</h4><h5 id="2-1-è¯»å†™"><a href="#2-1-è¯»å†™" class="headerlink" title="2.1 è¯»å†™"></a>2.1 è¯»å†™</h5><p>è¯»å–arr[index]ï¼›å†™arr[index] = 1ï¼›<br>åˆ é™¤delete arr[index],æ•°ç»„é•¿åº¦ä¸ä¼šå˜åŒ–ï¼Œä½†æ˜¯åœ¨indexä½ç½®ä¸Šçš„æ•°æ®å°±æ˜¯undefined</p><h5 id="2-2-åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹"><a href="#2-2-åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹" class="headerlink" title="2.2 åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹"></a>2.2 åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ç±»å‹</h5><ol><li>instanceof  arr instanceof Array</li><li>åŸå‹æ„é€ å‡½æ•° arr.<strong> proto </strong>.constructor === Array</li><li>Object.prototype.toString.call(arr) == â€˜[object Array]â€™</li><li>ES6ä¸­çš„isArrayæ–¹æ³•  Array.isArray(arr)</li></ol><h5 id="2-3-å˜å¼‚æ–¹æ³•"><a href="#2-3-å˜å¼‚æ–¹æ³•" class="headerlink" title="2.3 å˜å¼‚æ–¹æ³•"></a>2.3 å˜å¼‚æ–¹æ³•</h5><p>å˜å¼‚æ–¹æ³•ï¼Œåœ¨Vueä¸­åŒ…å«ï¼Œå®ƒä»¬ä¼šè§¦å‘è§†å›¾æ›´æ–°<br>æ ˆæ–¹æ³•ï¼špush,popåœ¨æ•°ç»„çš„æœ«ç«¯è¿›è¡Œæ·»åŠ æˆ–è€…åˆ é™¤ï¼Œè¿”å›å€¼pushæ˜¯æ•°ç»„çš„é•¿åº¦popæ˜¯å¼¹å‡ºçš„é‚£ä¸€é¡¹ï¼Œå¯¹æ•°ç»„é€ æˆå½±å“<br>é˜Ÿåˆ—æ–¹æ³•ï¼šunshift,shiftåœ¨æ•°ç»„çš„é¦–ç«¯è¿›è¡Œæ·»åŠ æˆ–è€…åˆ é™¤ï¼Œè¿”å›å€¼unshiftæ˜¯æ•°ç»„çš„é•¿åº¦shiftæ˜¯å¼¹å‡ºçš„é‚£ä¸€é¡¹ï¼Œå¯¹æ•°ç»„é€ æˆå½±å“<br>æ’åºï¼šsort æŒ‰ç…§å­—ç¬¦ä¸²çš„ASIIç è¿›è¡Œæ’åºã€‚ï¼ˆfn(a,b){}ï¼‰æŒ‰ç…§fnæ–¹æ³•æ’åºï¼Œa-bä»å°åˆ°å¤§ï¼Œb-aä»å¤§åˆ°å°<br>åè½¬ï¼šreverse<br>åˆ é™¤ï¼Œæˆªå–ï¼Œæ›¿æ¢ï¼šsplice(index,num,item) indexæ˜¯æ·»åŠ /åˆ é™¤çš„ä½ç½®ï¼Œè´Ÿæ•°å°±æ˜¯ä»åå¾€å‰ï¼›numæ˜¯åˆ é™¤çš„æ•°é‡ï¼›itemæ˜¯åœ¨indexä½ç½®ä¸Šæ·»åŠ çš„æ–°å†…å®¹</p><h5 id="2-4-éå˜å¼‚æ–¹æ³•"><a href="#2-4-éå˜å¼‚æ–¹æ³•" class="headerlink" title="2.4 éå˜å¼‚æ–¹æ³•"></a>2.4 éå˜å¼‚æ–¹æ³•</h5><p>å¯¹äºéå˜å¼‚çš„ï¼Œåˆ™ä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œéœ€è¦ä½¿ç”¨vm.$setæˆ–è€…Vue.setæ–¹æ³•<br>æˆªå–ï¼šsliceï¼ˆstart,endï¼‰è¿”å›çš„æ˜¯ä»startå¼€å§‹ï¼Œendç»“æŸçš„æˆªå–çš„å­æ•°ç»„ã€‚startï¼Œendå¯ä»¥ä¸ºè´Ÿæ•°ï¼Œè¡¨ç¤ºä»æ•°ç»„æœ«ç«¯åˆ°å¼€å§‹ã€‚startï¼Œendéƒ½æ²¡æœ‰ï¼Œåˆ™æˆªå–æ•´ä¸ªæ•°ç»„ï¼›åªæœ‰startï¼Œä»startå¼€å§‹åˆ°ç»“æŸæˆªå–ï¼›æœ‰startï¼Œendï¼Œæˆªå–startè‡³endã€‚<br>è½¬ä¸ºå­—ç¬¦ä¸²ï¼šjoin(separator) å°†æ•°ç»„è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œä¸­é—´ä½¿ç”¨separatoråˆ†éš”å¼€ã€‚<br>è¿æ¥æ•°ç»„ï¼šconcat(arr1,â€¦â€¦,arrn) è¿æ¥ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæ•°ç»„ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚</p><blockquote><p>æ‰©å±•ï¼špushä¸concatçš„åŒºåˆ«ï¼ŒåŒæ ·ï¼šéƒ½æ˜¯è¿æ¥ä½œç”¨ã€‚ä¸åŒï¼špushä¼šå½±å“æ•°ç»„ï¼Œconcatä¸å½±å“ï¼›å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œpushåªä¼šå¢åŠ ä¸€é¡¹ï¼Œç›´æ¥å°†æ•°ç»„ä½œä¸ºå®ƒæœ€æ–°çš„ä¸€é¡¹ï¼Œä¼šå˜æˆä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œconcatçš„è¯ï¼Œç›´æ¥å°†æ•°ç»„ä¸€ä¸ªä¸€ä¸ªçš„æ·»åŠ åˆ°åŸæ¥çš„æ•°ç»„ä¸Šï¼Œè¿˜æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„ã€‚</p></blockquote><h5 id="2-5-ES5çš„indexOfä¸lastIndexOf"><a href="#2-5-ES5çš„indexOfä¸lastIndexOf" class="headerlink" title="2.5 ES5çš„indexOfä¸lastIndexOf"></a>2.5 ES5çš„indexOfä¸lastIndexOf</h5><p>arr.indexOf(item) è¿”å›itemåœ¨arræ•°ç»„ä¸­ä»å·¦åˆ°å³çš„indexï¼Œæœ‰è¿”å›indexï¼Œæ²¡æœ‰è¿”å›-1<br>arr.lastIndexOf(item) è¿”å›itemåœ¨arræ•°ç»„ä¸­ä»å³åˆ°å·¦çš„indexï¼Œæœ‰è¿”å›indexï¼Œæ²¡æœ‰è¿”å›-1</p><h5 id="2-6-å…¶å®ƒä¸€äº›ä¸å¸¸ç”¨å¸¸è§çš„æ–¹æ³•"><a href="#2-6-å…¶å®ƒä¸€äº›ä¸å¸¸ç”¨å¸¸è§çš„æ–¹æ³•" class="headerlink" title="2.6 å…¶å®ƒä¸€äº›ä¸å¸¸ç”¨å¸¸è§çš„æ–¹æ³•"></a>2.6 å…¶å®ƒä¸€äº›ä¸å¸¸ç”¨å¸¸è§çš„æ–¹æ³•</h5><ol><li>every</li><li>fill</li><li>filter</li><li>forEach</li><li>Map</li><li>reduce</li><li>reduceRight</li></ol><h4 id="3-ES6-æ•°ç»„æ‰©å±•"><a href="#3-ES6-æ•°ç»„æ‰©å±•" class="headerlink" title="3. ES6 æ•°ç»„æ‰©å±•"></a>3. ES6 æ•°ç»„æ‰©å±•</h4><h5 id="3-1"><a href="#3-1" class="headerlink" title="3.1"></a>3.1</h5><h4 id="4-æ•°ç»„åº”ç”¨"><a href="#4-æ•°ç»„åº”ç”¨" class="headerlink" title="4. æ•°ç»„åº”ç”¨"></a>4. æ•°ç»„åº”ç”¨</h4><h5 id="4-1-æ•°ç»„å»é‡"><a href="#4-1-æ•°ç»„å»é‡" class="headerlink" title="4.1 æ•°ç»„å»é‡"></a>4.1 æ•°ç»„å»é‡</h5><p>æ–¹æ³•ä¸€ï¼šå¾ªç¯å»é‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šES6ä¸­çš„setæ•°æ®ç±»å‹<br>Setå®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const set = new Set([1, 2, 3, 4, 4]);</span><br><span class="line">[...set]æˆ–è€…new Array(...set) // [1,2,3,4]</span><br></pre></td></tr></table></figure><p>æ–¹æ³•ä¸‰ï¼šæ•°ç»„å­˜æ”¾ï¼ŒindexOfåˆ¤æ–­<br>éå†æ–°æ•°ç»„ï¼Œä¸å­˜åœ¨å°±pushè¿›æ–°æ•°ç»„ä¸­ï¼Œå­˜åœ¨å°±è·³è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.unique = function() &#123;</span><br><span class="line">    var n = []; // å­˜æ”¾å·²éå†çš„æ»¡è¶³æ¡ä»¶çš„å…ƒç´ </span><br><span class="line">    for (var i = 0; i &lt; this.length; i++) &#123;</span><br><span class="line">        // indexOf()åˆ¤æ–­å½“å‰å…ƒç´ æ˜¯å¦å·²å­˜åœ¨</span><br><span class="line">        if (n.indexOf(this[i]) == -1) &#123;</span><br><span class="line">        n.push(this[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•å››ï¼šå¯¹è±¡å­˜æ”¾ï¼Œå“ˆå¸Œç®—æ³•(æ˜ å°„)åˆ¤æ–­<br>éå†æ–°æ•°ç»„ï¼Œä¸å­˜åœ¨å°±pushè¿›æ–°æ•°ç»„ä¸­ï¼Œå­˜åœ¨å°±è·³è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.unique = function() &#123;</span><br><span class="line">    // nä¸ºhashè¡¨ï¼Œrä¸ºä¸´æ—¶æ•°ç»„</span><br><span class="line">    var n = &#123;&#125;, r = [];</span><br><span class="line">    for (var i = 0; i &lt; this.length; i++) &#123;</span><br><span class="line">        // å¦‚æœhashè¡¨ä¸­æ²¡æœ‰å½“å‰é¡¹</span><br><span class="line">        if (!n[this[i]]) &#123;</span><br><span class="line">            // å­˜å…¥hashè¡¨</span><br><span class="line">            n[this[i]] = true;</span><br><span class="line">            // æŠŠå½“å‰æ•°ç»„çš„å½“å‰é¡¹pushåˆ°ä¸´æ—¶æ•°ç»„é‡Œé¢</span><br><span class="line">            r.push(this[i]); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return r;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äº”ï¼šç°æ’åºï¼Œåæ¯”è¾ƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.unique = function() &#123;</span><br><span class="line">    this.sort();</span><br><span class="line">    var re = [this[0]];</span><br><span class="line">    for (var i = 1; i &lt; this.length; i++) &#123;</span><br><span class="line">        if (this[i] !== re[re.length - 1]) &#123;</span><br><span class="line">            re.push(this[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return re;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="4-2-æ•°ç»„æ‹å¹³"><a href="#4-2-æ•°ç»„æ‹å¹³" class="headerlink" title="4.2 æ•°ç»„æ‹å¹³"></a>4.2 æ•°ç»„æ‹å¹³</h5><p>æ–¹æ³•ä¸€ï¼šåªé€‚åˆäºŒç»´æ•°ç»„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.concat.apply([],arr)</span><br></pre></td></tr></table></figure><p>æ–¹æ³•äºŒï¼šES6çš„Generatorå‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var arr = [1, [[2, 3], 4], [5, 6]];</span><br><span class="line">var arrCopy = [];</span><br><span class="line"></span><br><span class="line">var flat = function* (a) &#123;</span><br><span class="line">  var length = a.length;</span><br><span class="line">  for (var i = 0; i &lt; length; i++) &#123;</span><br><span class="line">    var item = a[i];</span><br><span class="line">    if (Object.prototype.toString.call(item) == &apos;[object Array]&apos;) &#123;</span><br><span class="line">      yield* flat(item);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      yield item;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">for (var f of flat(arr)) &#123;</span><br><span class="line">  arrCopy.push(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¦å­¦ä¹ ES6ä¸­çš„æ•°ç»„æ‰©å±•ç¯‡ç« ï¼Œæ‰€ä»¥å°±å…ˆå»é¢„ä¹ äº†ä¸€æ³¢åŸæœ¬æ¥è§¦åˆ°çš„Arrayã€‚æ‰€è°“æ¸©æ•…è€ŒçŸ¥æ–°å˜›~~&lt;br&gt;é¦–å…ˆæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹jsä¸­çš„å¯¹è±¡ï¼š1.å†…éƒ¨å¯¹è±¡ï¼Œå†…éƒ¨å¯¹è±¡åŒ…å«ä¸‹é¢ä¸‰ç§ï¼šé”™è¯¯å¯¹è±¡ï¼ˆæ ‡è¯†é”™è¯¯ï¼‰ï¼Œå†…ç½®å¯¹è±¡ï¼ˆä¸éœ€è¦ä½¿ç”¨newæ“ä½œç¬¦æ¥è¿›è¡Œåˆå§‹åŒ–ï¼ŒMathä¸JSONä¸¤ç§ï¼‰ï¼Œå¸¸ç”¨å¯¹è±¡ï¼ˆ8ç§ï¼ŒStringã€Numberã€Dateã€Functionã€Booleanã€Arrayã€Objectã€RegExpï¼‰ï¼›2.å®¿ä¸»å¯¹è±¡ï¼Œå®¿ä¸»å¯¹è±¡ä¸»è¦æœ‰ä¸¤ä¸ªwindowä¸documentã€‚3.è‡ªå®šä¹‰å¯¹è±¡ï¼Œé™¤äº†å†…éƒ¨å¯¹è±¡ä»¥åŠå®¿ä¸»å¯¹è±¡ä¹‹å¤–ï¼Œå…¶å®ƒéƒ½ä¸ºè‡ªå®šä¹‰å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å¼€å‘è€…è‡ªå·±å®šä¹‰çš„å¯¹è±¡ã€‚&lt;br&gt;è¯´èµ·Arrayï¼Œèƒ½æƒ³åˆ°çš„å°±æ˜¯å±æ€§lengthï¼Œæ–¹æ³•pushï¼Œpopï¼Œreverseï¼Œshiftï¼Œunshiftï¼Œjionï¼Œsliceï¼Œspliceâ€¦â€¦ç­‰æ–¹æ³•&lt;br&gt;æ¨èå–œé©¬æ‹‰é›…ä¸Šçš„ã€Œé™ªä½ è¯»ä¹¦ï¼ˆJavaScript WEB ç¼–ç¨‹ï¼‰ã€çš„è¯¾ç¨‹~~~&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>vueæºç åˆ†æ-ç»„ä»¶åŒ–</title>
    <link href="http://yoursite.com/2018/10/15/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E7%BB%84%E4%BB%B6%E5%8C%96/"/>
    <id>http://yoursite.com/2018/10/15/vueæºç åˆ†æ-ç»„ä»¶åŒ–/</id>
    <published>2018-10-15T13:39:06.000Z</published>
    <updated>2019-02-02T04:50:17.227Z</updated>
    
    <content type="html"><![CDATA[<p>ç»ˆäºå¼„æ‡‚äº†å®šä¹‰ä¸€ä¸ªvueå®ä¾‹åˆ°æ¸²æŸ“æˆé¡µé¢DOMçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå¿ƒæƒ…ç‚’é¸¡æ£’ï¼Œä»Šå¤©æ‰“ç®—å¼€å§‹äº†è§£ä¸€ä¸‹vueçš„å¦å¤–ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³ â€” <strong>ç»„ä»¶åŒ–</strong>ã€‚<br>æ‰€è°“ç»„ä»¶åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†é¡µé¢æ ¹æ®ä¸€äº›è§„åˆ™ï¼ˆä¸šåŠ¡/é€»è¾‘ç­‰ï¼‰åˆ’åˆ†æˆä¸€ä¸ªä¸ªç»„ä»¶ï¼ˆComponentï¼‰ï¼Œæ¯ä¸ªç»„ä»¶çš„css,js,æ¨¡ç‰ˆ,å›¾ç‰‡ç­‰èµ„æºéƒ½ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªç»„ä»¶çš„èµ„æºéƒ½æ”¾åœ¨ä¸€èµ·å¼€å‘ç»´æŠ¤ã€‚è¿™æ ·ä¾¿äºç»´æŠ¤ä»¥åŠå®ç°å¯å¤ç”¨ï½ï½ï½<br><a id="more"></a></p><h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><p><span class="text-important">ç»„ä»¶çš„ vnode æ˜¯æ²¡æœ‰ children çš„</span></p><h4 id="1-createComponent"><a href="#1-createComponent" class="headerlink" title="1. createComponent"></a>1. createComponent</h4><p>ç»„ä»¶çš„åˆ›å»ºæœ€å¼€å§‹èµ°çš„å’Œ<a href="../../../../2018/10/09/vueæºç åˆ†æ-æ•°æ®é©±åŠ¨/#more">vueæºç åˆ†æ-æ•°æ®é©±åŠ¨</a>ç« èŠ‚çš„æµç¨‹æ˜¯ä¸€æ ·çš„ã€‚ä¹Ÿæ˜¯ï¼Œnew Vue() ==&gt; this._init() ==&gt; initMixin() ==&gt; $mount() ==&gt; mountComponent() ==&gt; _render() ==&gt; $createElement ==&gt; createElement() ==&gt; _createElement()<br>ä½†æ˜¯ï¼Œåœ¨_createElement()æ–¹æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ªåˆ¤æ–­ï¼Œä¸ä¹‹å‰çš„ä¸ä¸€æ ·<span class="font-color-red">if (typeof tag === â€˜stringâ€™)</span><br><img src="createElement.png" alt="åˆ¤æ–­">åœ¨<a href="../../../../2018/10/09/vueæºç åˆ†æ-æ•°æ®é©±åŠ¨/#more">vueæºç åˆ†æ-æ•°æ®é©±åŠ¨</a>ç« èŠ‚ä¸­ï¼Œtagæ˜¯ä¸€ä¸ªâ€˜divâ€™æ»¡è¶³ï¼Œåˆ™ç›´æ¥è¿›å…¥åˆ¤æ–­ä¸­ã€‚æ­¤å¤„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œtagåˆ™æ˜¯ä¸€ä¸ªå¯¹è±¡<br><img src="tag_detail.png" alt="tagçš„è¯¦æƒ…">æ‰€ä»¥ï¼Œç›´æ¥è¿›å…¥createComponentæ–¹æ³•ä¸­ï¼Œå¹¶ä¸”ä¼ å…¥äº†ä¸€ç³»åˆ—çš„å‚æ•°ï¼ˆtag,data,context,childrenï¼‰,å…¶ä¸­åªæœ‰tagä»¥åŠcontextæœ‰å€¼ï¼Œå¹¶ä¸”contextå…¶å®å°±æ˜¯Vueã€‚<br><img src="createComponent.png" alt="createComponent">å…¶ä¸­context.$options._baseå…¶å®å°±æ˜¯Vueæ„é€ å‡½æ•°ï¼ŒCtorå°±æ˜¯tagï¼ŒCtorå¦‚æœæ˜¯å¯¹è±¡çš„è¯ï¼Œåˆ™ä¼šè°ƒç”¨Vue.extendæ–¹æ³•<br><img src="extend.png" alt="extend">extendæ–¹æ³•ä¸»è¦æ˜¯æ ¹æ®Vueæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªSubæ„é€ å‡½æ•°ï¼Œå¹¶ä¸”åœ¨æŠŠä¼ å…¥çš„optionså’ŒVueä¸Šé¢åŸæœ¬æŒ‚è½½çš„optionsè¿›è¡Œä¸€ä¸ªmergeOptionsï¼Œå°†optionså†…å®¹è¿›è¡Œåˆå¹¶ï¼Œå¹¶ä¸”èµ‹å€¼ç»™Sub.optionsï¼Œåˆ™å½“å‰ç»„ä»¶å°±ä¼šå«æœ‰è‡ªå·±çš„optionsï¼Œä»¥åŠæŒ‚è½½åœ¨Vueä¸Šçš„å…¨å±€componentï¼Œdirectiveï¼Œfilter<br>å…¶ä¸­ï¼ŒvalidateComponentNameæ˜¯ç”¨æ¥æ£€éªŒç»„ä»¶åç§°æ˜¯å¦åˆæ³•åˆç†ã€‚<br>subæ„é€ å‡½æ•°ä¸­å«æœ‰this. _ init()å…¶å®ä¹Ÿå°±æ˜¯ä¸Šä¸€ç« èŠ‚ä¸­ _ initæ–¹æ³•ã€‚<br>å› æ­¤åæœŸå°±ä¼šå†æ¬¡è¿›å…¥ _ initæ–¹æ³•åˆ›å»ºç»„ä»¶ï¼Œç›´æ¥è¿›å…¥initInternalComponentæ–¹æ³•ä¸­ï¼Œåœ¨initInternalComponentæ–¹æ³•ä¸­ï¼Œå°±æ˜¯ä¸€ç³»ç»Ÿçš„èµ‹å€¼ç­‰ã€‚</p><h4 id="2-patch"><a href="#2-patch" class="headerlink" title="2. patch"></a>2. patch</h4><p>åœ¨ä¸Šé¢createComponentä¹‹åï¼Œè¿›å…¥createComponentæ–¹æ³•ä¸­<br><img src="createComponent2.png" alt="createComponent2"><br>å…¶ä¸­æœ‰ä¸€ä¸ªinstallComponentHooksçš„æ–¹æ³•ï¼ŒhooksToMergeå…¶å®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå«æœ‰initï¼Œprepatch,insert,destoryè¿™å››ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡ä¾¿åˆ©ï¼Œç»™dataä¸Šæ·»åŠ ä¸Šé’©å­å‡½æ•°ï¼ˆhookï¼‰<br><img src="installComponentHooks.png" alt="installComponentHooks"><br>å°†componentVNodeHookså¯¹è±¡ä¸­çš„ç›¸åº”çš„é’©å­å‡½æ•°èµ‹å€¼ç»™dataã€‚<br>æ¥ç€æ‰§è¡ŒcreateComponenté‡Œé¢çš„æ–¹æ³•new VNodeï¼Œè¿”å›ä¸€ä¸ªvnode<br>æ‰§è¡Œå¦å¤–ä¸€ä¸ªcreateComponentæ–¹æ³•ï¼Œè°ƒç”¨åŸæœ¬èµ‹å€¼å†vnodeä¸Šçš„hookå‡½æ•°ï¼Œå°†içš„initæ–¹æ³•èµ‹å€¼ç»™iï¼Œå†è°ƒç”¨iæ–¹æ³•<br><img src="createComponent3.png" alt="createComponent3"><br>è¿›å…¥åŸæœ¬hooksToMergeå¯¹è±¡èµ‹å€¼ç»™dataä¸Šçš„initæ–¹æ³•ï¼Œé€šè¿‡createComponentInstanceForVnodeå‡½æ•°åˆ›å»ºç»„ä»¶å¯¹è±¡<br><img src="componentVNodeHooks-init&amp;prepatch.png" alt="componentVNodeHooks-init&amp;prepatch"><br>åœ¨createComponentInstanceForVnodeå‡½æ•°ä¸­ï¼Œæœ€ç»ˆè¿”å›<span class="text-important">new vnode.componentOptions.Ctor(options)</span>ï¼Œè€Œvnode.componentOptions.Ctoä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨1. createComponentä¸­åˆ©ç”¨Vueæ„é€ å‡½æ•°åˆ›å»ºçš„ä¸€ä¸ªSubæ„é€ å‡½æ•°<br><img src="createComponentInstanceForVnode.png" alt="createComponentInstanceForVnode"><br>å†æ¬¡å›åˆ°subæ„é€ å‡½æ•°ä¸­ï¼Œè°ƒç”¨äº†this. _ initæ–¹æ³•ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨<a href="../../../../2018/10/09/vueæºç åˆ†æ-æ•°æ®é©±åŠ¨/#more">vueæºç åˆ†æ-æ•°æ®é©±åŠ¨</a>ç« èŠ‚ä¸­new Vue()åç«‹é©¬æ‰§è¡Œçš„åˆå§‹åŒ–<br><img src="sub.png" alt="sub"><br>å†æ¬¡è¿›å…¥vue.prototype. _ initæ–¹æ³•ä¸­ï¼Œæ­¤æ—¶ç”±äºæ˜¯ç»„ä»¶ï¼Œä¼šè°ƒç”¨initInternalComponent(vm, options);æ–¹æ³•ï¼Œè€Œæ­¤æ—¶çš„æ²¡æœ‰elè¿™ä¸ªå±æ€§å€¼æ²¡æœ‰å€¼ï¼Œåˆ™å°±ä¸ä¼šå»æ‰§è¡Œvm.$mount(vm.$options.el);<br>åœ¨initInternalComponentæ–¹æ³•ä¸­ï¼Œè¿›è¡Œäº†ä¸€ç³»åˆ—çš„èµ‹å€¼ã€‚å…¶ä¸­æ³¨æ„ï¼šopts._parentVnode = parentVnodeï¼Œåˆ™ç»„ä»¶å¯¹è±¡ä¸Šçš„_parentVnodeæ˜¯ä¸€ä¸ªå ä½node<br><img src="initInternalComponent.png" alt="initInternalComponent"><br>ç»§ç»­å›åˆ°componentVNodeHooksä¸­ï¼Œè°ƒç”¨child.$mountæ–¹æ³•è¿›è¡ŒæŒ‚è½½ï¼Œè°ƒç”¨mountComponentï¼Œåœ¨mountComponentå‡½æ•°ä¸­å®šä¹‰ updateComponent = function () { vm._update(vm._render(), hydrating); }; èµ°èµ·<a href="../../../../2018/10/09/vueæºç åˆ†æ-æ•°æ®é©±åŠ¨/#more">vueæºç åˆ†æ-æ•°æ®é©±åŠ¨</a>ç« èŠ‚çš„æµç¨‹ï¼ˆ_render() ==&gt; $createElement ==&gt; createElement ==&gt; _createElement ==&gt; ï¼‰é‡Œå±‚çš„å…ƒç´ ç»„ä»¶è¿›è¡Œä¸Šé¢çš„æµç¨‹</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»ˆäºå¼„æ‡‚äº†å®šä¹‰ä¸€ä¸ªvueå®ä¾‹åˆ°æ¸²æŸ“æˆé¡µé¢DOMçš„æ•´ä¸ªè¿‡ç¨‹ï¼Œå¿ƒæƒ…ç‚’é¸¡æ£’ï¼Œä»Šå¤©æ‰“ç®—å¼€å§‹äº†è§£ä¸€ä¸‹vueçš„å¦å¤–ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³ â€” &lt;strong&gt;ç»„ä»¶åŒ–&lt;/strong&gt;ã€‚&lt;br&gt;æ‰€è°“ç»„ä»¶åŒ–ï¼Œä¹Ÿå°±æ˜¯å°†é¡µé¢æ ¹æ®ä¸€äº›è§„åˆ™ï¼ˆä¸šåŠ¡/é€»è¾‘ç­‰ï¼‰åˆ’åˆ†æˆä¸€ä¸ªä¸ªç»„ä»¶ï¼ˆComponentï¼‰ï¼Œæ¯ä¸ªç»„ä»¶çš„css,js,æ¨¡ç‰ˆ,å›¾ç‰‡ç­‰èµ„æºéƒ½ç›¸äº’ç‹¬ç«‹ï¼Œæ¯ä¸ªç»„ä»¶çš„èµ„æºéƒ½æ”¾åœ¨ä¸€èµ·å¼€å‘ç»´æŠ¤ã€‚è¿™æ ·ä¾¿äºç»´æŠ¤ä»¥åŠå®ç°å¯å¤ç”¨ï½ï½ï½&lt;br&gt;
    
    </summary>
    
      <category term="vueæºç åˆ†æ" scheme="http://yoursite.com/categories/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>JavaScript - æ•°æ®å­˜å‚¨</title>
    <link href="http://yoursite.com/2018/10/10/JavaScript-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/"/>
    <id>http://yoursite.com/2018/10/10/JavaScript-æ•°æ®å­˜å‚¨/</id>
    <published>2018-10-10T03:09:21.000Z</published>
    <updated>2018-10-29T09:44:03.165Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´ä»¥æ¥éƒ½çŸ¥é“cookieã€sessionStorageã€localStorageè¿™äº›ç”¨äºç¼“å­˜æ•°æ®çš„,ä½†å¹¶æ²¡æœ‰æ­£å¼åœ°å»äº†è§£ç ”ç©¶è¿‡å®ƒä»¬ï¼Œæ­¤æ¬¡é¡¹ç›®ä¸­ç”¨åˆ°è¿™äº›çŸ¥è¯†ï¼Œæ­£å¥½å­¦ä¹ ä¸€æ³¢ï½<br>cookieï¼šä¹Ÿå°±æ˜¯HTTP cookieï¼Œå®¢æˆ·ç«¯ç”¨äºå­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå¹¶ä¸”è¦æ±‚æœåŠ¡å™¨å¯¹ä»»æ„HTTPè¯·æ±‚å‘é€Set-Cookie HTTPå¤´ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†ã€‚<br>Web Storageï¼šä¸€ç§ä¸ºäº†å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®ï¼Œæ–°é€”å¾„çš„æ ‡å‡†ã€‚åŒ…å«ä¸¤ç§å¯¹è±¡å®šä¹‰ï¼šsessionStorageã€globalStorageâ€¦â€¦<br><a id="more"></a></p><h3 id="1-cookie"><a href="#1-cookie" class="headerlink" title="1. cookie"></a>1. cookie</h3><h3 id="2-Web-Storage"><a href="#2-Web-Storage" class="headerlink" title="2. Web Storage"></a>2. Web Storage</h3><h4 id="2-1-sessionStorage"><a href="#2-1-sessionStorage" class="headerlink" title="2.1 sessionStorage"></a>2.1 sessionStorage</h4><h4 id="2-2-globalStorage"><a href="#2-2-globalStorage" class="headerlink" title="2.2 globalStorage"></a>2.2 globalStorage</h4>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´ä»¥æ¥éƒ½çŸ¥é“cookieã€sessionStorageã€localStorageè¿™äº›ç”¨äºç¼“å­˜æ•°æ®çš„,ä½†å¹¶æ²¡æœ‰æ­£å¼åœ°å»äº†è§£ç ”ç©¶è¿‡å®ƒä»¬ï¼Œæ­¤æ¬¡é¡¹ç›®ä¸­ç”¨åˆ°è¿™äº›çŸ¥è¯†ï¼Œæ­£å¥½å­¦ä¹ ä¸€æ³¢ï½&lt;br&gt;cookieï¼šä¹Ÿå°±æ˜¯HTTP cookieï¼Œå®¢æˆ·ç«¯ç”¨äºå­˜å‚¨ä¼šè¯ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œå¹¶ä¸”è¦æ±‚æœåŠ¡å™¨å¯¹ä»»æ„HTTPè¯·æ±‚å‘é€Set-Cookie HTTPå¤´ä½œä¸ºå“åº”çš„ä¸€éƒ¨åˆ†ã€‚&lt;br&gt;Web Storageï¼šä¸€ç§ä¸ºäº†å­˜å‚¨å¤§é‡å¯ä»¥è·¨ä¼šè¯å­˜åœ¨çš„æ•°æ®ï¼Œæ–°é€”å¾„çš„æ ‡å‡†ã€‚åŒ…å«ä¸¤ç§å¯¹è±¡å®šä¹‰ï¼šsessionStorageã€globalStorageâ€¦â€¦&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>vueæºç åˆ†æ - æ•°æ®é©±åŠ¨</title>
    <link href="http://yoursite.com/2018/10/09/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8/"/>
    <id>http://yoursite.com/2018/10/09/vueæºç åˆ†æ-æ•°æ®é©±åŠ¨/</id>
    <published>2018-10-09T02:49:58.000Z</published>
    <updated>2019-02-02T04:50:51.888Z</updated>
    
    <content type="html"><![CDATA[<p>æ•°æ®é©±åŠ¨æ˜¯vue.jsçš„ä¸€ä¸ªé‡è¦çš„æ€æƒ³ã€‚æ•°æ®é©±åŠ¨ï¼šè§†å›¾æ ¹æ®æ•°æ®é©±åŠ¨ç”Ÿæˆï¼Œæˆ‘ä»¬ä¸ä¼šé€šè¿‡ç›´æ¥ä¿®æ”¹domæ¥ä¿®æ”¹è§†å›¾ï¼Œä¼šé€šè¿‡ä¿®æ”¹æ•°æ®æ¥å®Œæˆå¯¹è§†å›¾çš„ä¿®æ”¹ã€‚<br><a id="more"></a></p><blockquote><p>Runtime-only: éœ€è¦å€ŸåŠ©ç±»ä¼¼äºwebpackçš„vue-loaderæ¥å°†.vueæ–‡ä»¶ç¼–è¯‘æˆJavaScriptã€‚å› ä¸ºæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µåšçš„ï¼Œæ‰€ä»¥åªåŒ…å«è¿è¡Œæ—¶çš„Vue.jsä»£ç ï¼Œä»£ç ä½“ç§¯æ›´è½»ä¾¿ã€‚<br><br>Runtime + compiler: æ²¡æœ‰å¯¹ä»£ç åšé¢„ç¼–è¯‘ã€‚å› ä¸ºåœ¨Vue.js2.0ä¸­ï¼Œæœ€åæ¸²æŸ“éƒ½æ˜¯é€šè¿‡renderå‡½æ•°ï¼Œå¦‚æœç¼–å†™äº†templateï¼Œåˆ™éœ€è¦ç¼–è¯‘æˆrenderå‡½æ•°ï¼Œè€Œè¿™ä¸ªç¼–è¯‘è¿‡ç¨‹å‘ç”Ÿåœ¨è¿è¡Œæ—¶ï¼Œæ‰€ä»¥éœ€è¦å¸¦æœ‰ç¼–è¯‘å™¨çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”è¿™ä¸ªç¼–è¯‘è¿‡ç¨‹å¯¹æ€§èƒ½ä¼šæœ‰ä¸€å®šçš„æŸè€—ã€‚</p></blockquote><h3 id="1-new"><a href="#1-new" class="headerlink" title="1. new"></a>1. new</h3><blockquote><p>new Vue()ä¸€ä¸ªå®ä¾‹å¹²äº†ä»€ä¹ˆï¼Ÿ</p></blockquote><p><img src="https://i.imgur.com/lny4o5V.png" alt="new vueæ—¶çš„ä»£ç "><br>new Vue()ååªä¼šåˆ¤æ–­ä½¿ç”¨çš„è¯­æ³•å¯¹ä¸å¯¹ï¼Œç„¶åå°±è°ƒç”¨å·²ç»æŒ‚è½½åˆ°VueåŸå‹ä¸Šçš„_initæ–¹æ³•(é€šè¿‡initMixin(Vue))ï¼Œåœ¨initMixin()ä¹‹å‰ï¼ŒVueä¸Šåªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°å¤–åŠ ä¸€ä¸ª<strong>proto</strong>ï¼ˆä¹Ÿå°±æ˜¯Objectæ‰€å«æœ‰çš„ï¼‰ã€‚<br><img src="https://i.imgur.com/PNzomC5.png" alt="vue.prototype"></p><h3 id="2-init"><a href="#2-init" class="headerlink" title="2. init"></a>2. init</h3><p>initMixinæ–¹æ³•åœ¨Vue.prototypeä¸ŠæŒ‚è½½äº†ä¸€ä¸ª_initæ–¹æ³•<br><img src="https://i.imgur.com/Yt9N7Rl.png" alt=""><br>åœ¨initMixinæ–¹æ³•ä¸­ï¼šå…ˆå°†optionsè¿›è¡Œæ•´åˆï¼ˆå…·ä½“å…ˆä¸ç®¡ï¼‰ï¼›<br>ååˆè¿›è¡Œäº†ä¸€ç³»ç»Ÿçš„åˆå§‹åŒ–ï¼šç”Ÿå‘½å‘¨æœŸåˆå§‹åŒ–ï¼ˆinitLifecycleï¼‰ã€äº‹ä»¶åˆå§‹åŒ–ï¼ˆinitEventsï¼‰ã€æ¸²æŸ“ï¼ˆinitRenderï¼‰ã€callHook()ã€åˆå§‹åŒ–æ•°æ®ï¼ˆinitStateï¼‰ä»¥åŠä¸€äº›å…¶å®ƒçš„åˆå§‹åŒ–(initInjectionsã€initProvide)</p><p>å…¶ä¸­initStateæ–¹æ³•ä¸­å«æœ‰initDataæ–¹æ³•(å…¶ä¸­å«æœ‰ä¸€ä¸ªproxy(vm, â€œ_dataâ€, key)ï¼Œä¸ºdataä¸­æ•°æ®é¡¹è¿›è¡Œä¸€ä¸ªä»£ç†è®¾ç½®)</p><p><img src="https://i.imgur.com/UHwd04N.png" alt=""><br>ä¹Ÿå°±æ˜¯åˆ©ç”¨äº†Object.defineProperty()æ–¹æ³•æ¥è®¾ç½®è®¿é—®å™¨å±æ€§ï¼Œä»è€Œå®ç°äº†ç›´æ¥ä¿®æ”¹ç±»ä¼¼this.message = 12ä¹Ÿå°±æ˜¯ä¿®æ”¹äº†this._data.message = 12</p><p>é™¤äº†_dataä¼šä½¿ç”¨proxyæ–¹æ³•æ¥è¿›è¡Œä¸€å±‚è®¾ç½®ä»£ç†ï¼Œè¿˜ä¼šæœ‰_propsï¼Œå› æ­¤_dataä¸_propsé‡Œé¢å®šä¹‰çš„å±æ€§åç§°ä¸èƒ½ç›¸åŒï¼Œä¸ç„¶å°±ä¼šå‡ºç°è¦†ç›–çš„æƒ…å†µï¼ˆå†™ç»„ä»¶ä¸­ç»å¸¸å°±ä¼šé‡è§propsä¸­æœ‰ä¸€ä¸ªaï¼Œdataä¸­ä¹Ÿæœ‰ä¸€ä¸ªaï¼Œåˆ™åæœŸçˆ¶ç»„ä»¶ä¿®æ”¹açš„å€¼åï¼Œç»„ä»¶å¹¶ä¸ä¼šè·Ÿç€è¿›è¡Œå˜åŒ–ï¼‰</p><h3 id="3-mount"><a href="#3-mount" class="headerlink" title="3. $mount"></a>3. $mount</h3><p>åœ¨initMixinæ–¹æ³•çš„æœ€åæ ¹æ®vm.$options.elæ˜¯å¦å­˜åœ¨æ¥å†³å®šæ˜¯å¦æŒ‚è½½</p><p><code>if (vm.$options.el) {  vm.$mount(vm.$options.el);}</code></p><p>$mountæ–¹æ³•æ˜¯æŒ‚è½½åœ¨vueæ„é€ å‡½æ•°prototypeä¸Šçš„ï¼Œé‡Œé¢ç›´æ¥è°ƒç”¨çš„æ˜¯mountComponentæ–¹æ³•ï¼ŒåæœŸåˆå®šä¹‰äº†updateComponentå‡½æ•°ï¼ˆé‡Œé¢è°ƒç”¨äº†vueä¸Šçš„ _update æ–¹æ³•ï¼Œ _update æ–¹æ³•ä¸­ä¼ é€’äº†vueçš„ _render å‡½æ•°æ¸²æŸ“å‡ºæ¥çš„vnodeä»¥åŠhydratingï¼‰ï¼Œåˆæ–°å»ºäº†ä¸€ä¸ª <span style="color:red;">æ¸²æŸ“watcher</span>(åæœŸå‘ç”Ÿå˜åŒ–ï¼Œè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œæ¸²æŸ“watcherä¸­çš„updateComponentæ–¹æ³•ï¼Œä»è€Œé‡æ–°æ¸²æŸ“äº†ä¸€æ¬¡)</p><p><img src="$mount.png" alt="$mount"></p><p>è¯¥è¿‡ç¨‹ä¸»è¦åšäº†ï¼šå¯¹options.renderè¿›è¡Œä¸€ä¸ªåˆ¤æ–­ï¼Œçœ‹çœ‹æ˜¯å¦ä¹¦å†™äº†renderå‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰å†™ï¼Œåˆ™å¯¹templateè¿›è¡Œè§£æï¼Œ(å…¶ä¸­æ²¡æœ‰templateçš„æ—¶å€™ï¼Œä¼šæ ¹æ®getOuterHTMLæ¥å¾—åˆ°æ¨¡ç‰ˆå­—ç¬¦ä¸²)ï¼Œç„¶åä¼šæ ¹æ®templateè¿›è¡Œç¼–è¯‘ï¼ˆä½¿ç”¨compileToFunctionï¼‰ï¼Œç¼–è¯‘å¾—åˆ°renderå‡½æ•°ä»¥åŠstaticRenderFnsé™æ€renderå‡½æ•°ã€‚å› ä¸ºvueåªè®¤renderå‡½æ•°ã€‚<br><br>æœ‰äº†renderå‡½æ•°ä¹‹åï¼Œå°±ä¼šè°ƒç”¨mount.call(this,el,hydrating)ï¼Œè¿™ä¸ªmountå‡½æ•°å…¶å®å°±æ˜¯vue.prototype.$mountã€‚ç„¶åå°±ä¼šæ‰§è¡Œä¸Šé¢çš„è¿‡ç¨‹ï¼ˆ$mountï¼‰</p><h3 id="4-compile"><a href="#4-compile" class="headerlink" title="4. compile"></a>4. compile</h3><p>å‡½æ•°compileToFunctionæ¥è¿›è¡Œç¼–è¯‘ï¼Œæ‹¿åˆ°renderæ¸²æŸ“å‡½æ•°ä»¥åŠstaticRenderFnsé™æ€renderå‡½æ•°</p><h3 id="5-render"><a href="#5-render" class="headerlink" title="5. render"></a>5. render</h3><p>_renderæ–¹æ³•æ˜¯å®ä¾‹çš„ä¸€ä¸ªç§æœ‰æ–¹æ³•ï¼Œå®ƒç”¨æ¥æŠŠå®ä¾‹æ¸²æŸ“æˆvnodeï¼ˆè™šæ‹ŸNodeï¼‰ã€‚<br><img src="render.png" alt="_render"><br>vnode = render.call(vm. _renderProxy, vm.$createElement);<br>å…¶ä¸­vm. _renderProxyæ˜¯ä¸Šä¸‹æ–‡ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå°±æ˜¯vmå®ä¾‹ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹æ˜¯ä¸€ä¸ªProxyå®ä¾‹ã€‚(ä¼šåœ¨initè¿‡ç¨‹ä¸­æœ‰ä¸‹é¢çš„ä»£ç )</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (process.env.NODE_ENV !== &apos;production&apos;) &#123;</span><br><span class="line">  initProxy(vm);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  vm._renderProxy = vm;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>$createElemtåœ¨initRenderä¸­å®šä¹‰ï¼ŒinitRenderå‡½æ•°åœ¨initä¸­æ‰§è¡Œã€‚åœ¨$createElementå‡½æ•°ä¸­è°ƒç”¨äº†createElementæ–¹æ³•ï¼ŒcreateElementæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªVNode</p><h3 id="6-vnode"><a href="#6-vnode" class="headerlink" title="6. vnode"></a>6. vnode</h3><p>äº§ç”Ÿçš„å‰æï¼šæµè§ˆå™¨ä¸­çš„DOMæ¯”è¾ƒåºå¤§ï¼Œå¹¶ä¸”è®¾è®¡çš„æ¯”è¾ƒå¤æ‚ï¼Œé¢‘ç¹åœ°å»æ›´æ–°DOMï¼Œä¹Ÿä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜ã€‚Virtual DOM ä½¿ç”¨jså¯¹è±¡æ¥æè¿°DOMã€‚<br>Virtual DOMé™¤äº†æ•°æ®ç»“æ„çš„å®šä¹‰ï¼Œæ˜ å°„åˆ°çœŸå®çš„DOMä¸Šï¼Œè¿˜éœ€è¦ç»å†VNodeçš„createã€diffã€patchç­‰è¿‡ç¨‹ã€‚è€ŒVueä¸­çš„createElementå°±æ˜¯VNodeçš„createã€‚</p><p><img src="createElement.png" alt="createElement"></p><p>createElementæ–¹æ³•è°ƒç”¨çš„æ˜¯ _createElementæ–¹æ³•ï¼Œåœ¨ _createElementæ–¹æ³•ä¸­ï¼Œå¯¹childrenåšäº†normalizeå¤„ç†ï¼ˆä¹Ÿå°±æ˜¯å°†childrenå˜æˆä¸€ç»´æ•°ç»„ï¼Œæ¶‰åŠåˆ°çš„æ–¹æ³•æœ‰ï¼šnormalizeChildrenï¼ŒnormalizeArrayChildrenï¼ŒsimpleNormalizeChildrenï¼‰</p><h3 id="7-patch"><a href="#7-patch" class="headerlink" title="7. patch"></a>7. patch</h3><blockquote><p>é€šè¿‡ _renderå‡½æ•°ä»¥åŠcreateElementå‡½æ•°æ‹¿åˆ°äº†VNodeï¼Œå¦‚ä½•æ¸²æŸ“åˆ°çœŸå®DOMä¸Šå‘¢ï¼Ÿ</p></blockquote><p>é€šè¿‡vueä¸­ _updateæ–¹æ³•ï¼Œå°†VNodeæ¸²æŸ“æˆçœŸå®çš„DOMï¼Œæ­¤æ–¹æ³•ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹è¢«è°ƒç”¨ï¼šé¦–æ¬¡æ¸²æŸ“ï¼Œæ•°æ®æ›´æ–°ã€‚</p><p><img src="update.png" alt="update"></p><p>å…¶ä¸­ï¼Œä¼šèµ°åˆ°vm.<strong> patch </strong> æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.__ patch __ = inBrowser ? patch : noop;</span><br></pre></td></tr></table></figure></p><p><br>åœ¨æœåŠ¡å™¨ç«¯æ˜¯æ²¡æœ‰DOMè¿™ä¸ªæ¦‚å¿µçš„ï¼Œæ‰€ä»¥ä¸åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œåˆ™æ˜¯ä¸éœ€è¦æ¸²æŸ“æˆçœŸå®DOMçš„ã€‚<br>è°ƒç”¨<strong>patch</strong>æ–¹æ³•çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯çœŸå®çš„DOMï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆ‘ä»¬å¾—åˆ°çš„VNodeã€‚é€šè¿‡<strong>patch</strong>æ–¹æ³•ä¸­çš„createElmå°†VNodeæŒ‚è½½åˆ°çœŸå®çš„DOMä¸Šï¼Œ(å¦‚æœæœ‰å­èŠ‚ç‚¹ï¼Œåˆ™é€’å½’è°ƒç”¨createElmï¼Œæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥åˆ›å»ºä¸€ä¸ªDOM)ï¼Œæœ€åé€šè¿‡insertæ–¹æ³•æ’å…¥çœŸå®DOMä¸­ï¼ˆé‡Œé¢åˆ†æƒ…å†µè°ƒç”¨äº†insertBeforeä¸appendChildï¼‰ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ•°æ®é©±åŠ¨æ˜¯vue.jsçš„ä¸€ä¸ªé‡è¦çš„æ€æƒ³ã€‚æ•°æ®é©±åŠ¨ï¼šè§†å›¾æ ¹æ®æ•°æ®é©±åŠ¨ç”Ÿæˆï¼Œæˆ‘ä»¬ä¸ä¼šé€šè¿‡ç›´æ¥ä¿®æ”¹domæ¥ä¿®æ”¹è§†å›¾ï¼Œä¼šé€šè¿‡ä¿®æ”¹æ•°æ®æ¥å®Œæˆå¯¹è§†å›¾çš„ä¿®æ”¹ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="vueæºç åˆ†æ" scheme="http://yoursite.com/categories/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
  <entry>
    <title>Flowåˆè¯†</title>
    <link href="http://yoursite.com/2018/10/06/Flow%E5%88%9D%E8%AF%86/"/>
    <id>http://yoursite.com/2018/10/06/Flowåˆè¯†/</id>
    <published>2018-10-06T02:35:16.000Z</published>
    <updated>2018-10-29T09:43:14.759Z</updated>
    
    <content type="html"><![CDATA[<p>å€ŸåŠ©å­¦ä¹ vue.jsæºç ï¼Œåœ¨å…¶è¿‡ç¨‹ä¸­ï¼Œè®¤è¯†åˆ°äº†Flowï¼Œè¯¥ç¯‡ä¸»è¦ä»‹ç»ä¸€ä¸‹æœ€åŸºæœ¬çš„Flow<br><a id="more"></a></p><h3 id="åˆè¯†Flow"><a href="#åˆè¯†Flow" class="headerlink" title="åˆè¯†Flow"></a>åˆè¯†Flow</h3><h4 id="1-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="1. æ˜¯ä»€ä¹ˆï¼Ÿ"></a>1. æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Flowæ˜¯ä¸€ç§é™æ€ç±»å‹æ£€æŸ¥å·¥å…·ï¼Œæ˜¯ä¸€ç§å·¥å…·ã€‚</p><blockquote><p>é™æ€ç±»å‹æ£€æŸ¥ï¼š åœ¨ç¼–è¾‘æœŸé—´å°½æ—©å‘ç°ï¼ˆç”±ç±»å‹å¼•èµ·çš„ï¼‰bugï¼Œåˆä¸å½±å“ä»£ç è¿è¡Œï¼ˆä¸éœ€è¦è¿è¡Œæ—¶åŠ¨æ€æ£€æŸ¥ç±»å‹ï¼‰</p></blockquote><h4 id="2-Flowçš„å·¥ä½œæ–¹å¼"><a href="#2-Flowçš„å·¥ä½œæ–¹å¼" class="headerlink" title="2. Flowçš„å·¥ä½œæ–¹å¼"></a>2. Flowçš„å·¥ä½œæ–¹å¼</h4><h5 id="2-1-ç±»å‹æ¨æ–­"><a href="#2-1-ç±»å‹æ¨æ–­" class="headerlink" title="2.1 ç±»å‹æ¨æ–­"></a>2.1 ç±»å‹æ¨æ–­</h5><blockquote><p>é€šè¿‡å˜é‡ä½¿ç”¨ä¸Šä¸‹æ–‡æ¥æ¨æ–­å‡ºå˜é‡ç±»å‹ï¼Œç„¶åæ ¹æ®è¿™äº›æ¨æ–­æ¥æ£€æŸ¥ç±»å‹</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*@flow*/``</span><br><span class="line">function split(str) &#123;</span><br><span class="line">  return str.split(&apos; &apos;)</span><br><span class="line">&#125;</span><br><span class="line">split(11)</span><br></pre></td></tr></table></figure><p><span style="color:red;">ä¼šæŠ¥é”™</span>ï¼šåŸå› æ˜¯æˆ‘ä»¬æœŸå¾…çš„æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œä½†æ˜¯ä¼ å…¥çš„æ˜¯æ•°å­—ç±»å‹</p><h5 id="2-2-ç±»å‹æ³¨é‡Š"><a href="#2-2-ç±»å‹æ³¨é‡Š" class="headerlink" title="2.2 ç±»å‹æ³¨é‡Š"></a>2.2 ç±»å‹æ³¨é‡Š</h5><blockquote><p>äº‹å…ˆæ³¨é‡Šå¥½æˆ‘ä»¬æœŸå¾…çš„ç±»å‹ï¼ŒFlowä¼šåŸºäºè¿™äº›æ³¨é‡Šæ¥åˆ¤æ–­</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/*@flow*/</span><br><span class="line"></span><br><span class="line">function add(x, y)&#123;</span><br><span class="line">  return x + y</span><br><span class="line">&#125;</span><br><span class="line">add(&apos;Hello&apos;, 11)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç <span style="color:red;">ä¸ä¼šæŠ¥é”™</span>ï¼ŒFlowçš„æ£€æŸ¥ä¸å‡ºæ¥ï¼Œå› ä¸ºâ€˜+â€™å¯ä»¥ç”¨äºå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ç”¨äºæ•°å­—<br>åˆ™ï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ç±»å‹æ³¨é‡Šï¼ˆï¼šï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*@flow*/</span><br><span class="line"></span><br><span class="line">function add(x: number, y: number): number &#123;</span><br><span class="line">  return x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(&apos;Hello&apos;, 11)</span><br></pre></td></tr></table></figure><ul><li>æ•°ç»„ç±»å‹æ³¨é‡Šæ ¼å¼ï¼šArray&lt; T &gt;ï¼ŒT è¡¨ç¤ºæ•°ç»„ä¸­æ¯é¡¹çš„æ•°æ®ç±»å‹</li><li>ä¸€ä¸ªå˜é‡å¯èƒ½å¤šä¸ªç±»å‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<span style="color:red;"> â€˜|â€™ </span>æ¥è¿æ¥ä¸¤ç§ç±»å‹ï¼Œè¡¨ç¤ºæˆ–</li><li>è‹¥æƒ³ä»»æ„ç±»å‹<span style="color:red;"> T </span>å¯ä»¥ä¸º null æˆ–è€… undefinedï¼Œåªéœ€ç±»ä¼¼å¦‚ä¸‹å†™æˆå¯ä»¥ä½¿ç”¨<span style="color:red;"> ?T </span>çš„æ ¼å¼å³å¯</li></ul><hr><p>å‚è€ƒï¼š<a href="https://flow.org/en/docs/getting-started/" target="_blank" rel="noopener">Flowå®˜ç½‘</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å€ŸåŠ©å­¦ä¹ vue.jsæºç ï¼Œåœ¨å…¶è¿‡ç¨‹ä¸­ï¼Œè®¤è¯†åˆ°äº†Flowï¼Œè¯¥ç¯‡ä¸»è¦ä»‹ç»ä¸€ä¸‹æœ€åŸºæœ¬çš„Flow&lt;br&gt;
    
    </summary>
    
      <category term="JavaScript" scheme="http://yoursite.com/categories/JavaScript/"/>
    
    
  </entry>
  
  <entry>
    <title>vueæºç è§£æ</title>
    <link href="http://yoursite.com/2018/09/30/vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/"/>
    <id>http://yoursite.com/2018/09/30/vueæºç è§£æ/</id>
    <published>2018-09-30T08:33:47.000Z</published>
    <updated>2019-02-02T04:51:14.299Z</updated>
    
    <content type="html"><![CDATA[<p>å¼€å§‹å­¦ä¹ vue<br><a id="more"></a></p><h2 id="vueæºç è§£æ"><a href="#vueæºç è§£æ" class="headerlink" title="vueæºç è§£æ"></a>vueæºç è§£æ</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><h3 id="æ•°æ®é©±åŠ¨"><a href="#æ•°æ®é©±åŠ¨" class="headerlink" title="æ•°æ®é©±åŠ¨"></a>æ•°æ®é©±åŠ¨</h3><h3 id="ç»„ä»¶åŒ–"><a href="#ç»„ä»¶åŒ–" class="headerlink" title="ç»„ä»¶åŒ–"></a>ç»„ä»¶åŒ–</h3><h3 id="æ·±å…¥å“åº”å¼åŸç†"><a href="#æ·±å…¥å“åº”å¼åŸç†" class="headerlink" title="æ·±å…¥å“åº”å¼åŸç†"></a>æ·±å…¥å“åº”å¼åŸç†</h3><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><h3 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h3>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å§‹å­¦ä¹ vue&lt;br&gt;
    
    </summary>
    
      <category term="vueæºç åˆ†æ" scheme="http://yoursite.com/categories/vue%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
  </entry>
  
</feed>
